<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation for Mycodo"><link rel="shortcut icon" href=../images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.5.0"><title>Inputs - Mycodo</title><link rel=stylesheet href=../assets/stylesheets/main.b5d04df8.min.css><link rel=stylesheet href=../assets/stylesheets/palette.9ab2c1f8.min.css><meta name=theme-color content=#2196f3><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Barlow:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Barlow",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=preference data-md-color-primary=blue data-md-color-accent=indigo> <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#custom-inputs class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=.. title=Mycodo class="md-header-nav__button md-logo" aria-label=Mycodo> <img src=../images/favicon.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Mycodo </span> <span class="md-header-nav__topic md-ellipsis"> Inputs </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/kizniche/Mycodo/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> kizniche/Mycodo </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../Data-Viewing/ class="md-tabs__link md-tabs__link--active"> Usage </a> </li> <li class=md-tabs__item> <a href=../Supported-Inputs/ class=md-tabs__link> Supported Devices </a> </li> <li class=md-tabs__item> <a href=../System-Information/ class=md-tabs__link> System </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Mycodo class="md-nav__button md-logo" aria-label=Mycodo> <img src=../images/favicon.png alt=logo> </a> Mycodo </label> <div class=md-nav__source> <a href=https://github.com/kizniche/Mycodo/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> kizniche/Mycodo </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title=Home class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../About/ title=About class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../Frequently-Asked-Questions/ title="Frequently Asked Questions" class=md-nav__link> Frequently Asked Questions </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class=md-nav__link for=nav-4> Usage <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Usage data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Data-Viewing/ title="Data Viewing" class=md-nav__link> Data Viewing </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Inputs <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title=Inputs class="md-nav__link md-nav__link--active"> Inputs </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#custom-inputs class=md-nav__link> Custom Inputs </a> </li> <li class=md-nav__item> <a href=#input-actions class=md-nav__link> Input Actions </a> </li> <li class=md-nav__item> <a href=#input-options class=md-nav__link> Input Options </a> </li> <li class=md-nav__item> <a href=#the-things-network class=md-nav__link> The Things Network </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Maths/ title=Maths class=md-nav__link> Maths </a> </li> <li class=md-nav__item> <a href=../Outputs/ title=Outputs class=md-nav__link> Outputs </a> </li> <li class=md-nav__item> <a href=../Functions/ title=Functions class=md-nav__link> Functions </a> </li> <li class=md-nav__item> <a href=../Methods/ title=Methods class=md-nav__link> Methods </a> </li> <li class=md-nav__item> <a href=../LCDs/ title=LCDs class=md-nav__link> LCDs </a> </li> <li class=md-nav__item> <a href=../Alerts/ title=Alerts class=md-nav__link> Alerts </a> </li> <li class=md-nav__item> <a href=../Notes/ title=Notes class=md-nav__link> Notes </a> </li> <li class=md-nav__item> <a href=../Camera/ title=Camera class=md-nav__link> Camera </a> </li> <li class=md-nav__item> <a href=../Energy-Usage/ title="Energy Usage" class=md-nav__link> Energy Usage </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Supported Devices <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Supported Devices" data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Supported Devices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Supported-Inputs/ title="Supported Inputs" class=md-nav__link> Supported Inputs </a> </li> <li class=md-nav__item> <a href=../Supported-Outputs/ title="Supported Outputs" class=md-nav__link> Supported Outputs </a> </li> <li class=md-nav__item> <a href=../Supported-Widgets/ title="Supported Widgets" class=md-nav__link> Supported Widgets </a> </li> <li class=md-nav__item> <a href=../I2C-Multiplexers/ title="I2C Multiplexers" class=md-nav__link> I2C Multiplexers </a> </li> <li class=md-nav__item> <a href=../Analog-To-Digital-Converters/ title="Analog-To-Digital Converters" class=md-nav__link> Analog-To-Digital Converters </a> </li> <li class=md-nav__item> <a href=../Interfaces/ title=Interfaces class=md-nav__link> Interfaces </a> </li> <li class=md-nav__item> <a href=../Dependencies/ title=Dependencies class=md-nav__link> Dependencies </a> </li> <li class=md-nav__item> <a href=../Device-Notes/ title="Device Notes" class=md-nav__link> Device Notes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> System <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=System data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> System </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../System-Information/ title="System Information" class=md-nav__link> System Information </a> </li> <li class=md-nav__item> <a href=../Configuration-Settings/ title="System Configuration" class=md-nav__link> System Configuration </a> </li> <li class=md-nav__item> <a href=../Upgrade-Backup-Restore/ title=Upgrade/Backup/Restore class=md-nav__link> Upgrade/Backup/Restore </a> </li> <li class=md-nav__item> <a href=../Export-Import/ title=Export/Import class=md-nav__link> Export/Import </a> </li> <li class=md-nav__item> <a href=../Mycodo-Client/ title="Mycodo Client" class=md-nav__link> Mycodo Client </a> </li> <li class=md-nav__item> <a href=../API/ title=API class=md-nav__link> API </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Troubleshooting/ title=Troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../Translations/ title=Translations class=md-nav__link> Translations </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#custom-inputs class=md-nav__link> Custom Inputs </a> </li> <li class=md-nav__item> <a href=#input-actions class=md-nav__link> Input Actions </a> </li> <li class=md-nav__item> <a href=#input-options class=md-nav__link> Input Options </a> </li> <li class=md-nav__item> <a href=#the-things-network class=md-nav__link> The Things Network </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/kizniche/Mycodo/edit/master/docs/Inputs.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Inputs</h1> <p>Page: <code>Setup -&gt; Data</code></p> <p>For a full list of supported Inputs, see <a href=../Supported-Inputs/ >Supported Input Devices</a>.</p> <p>Inputs, such as sensors, ADC signals, or even a response from a command, enable measuring conditions in the environment or elsewhere, which will be stored in a time-series database (InfluxDB). This database will provide measurements for <a href=Data-Viewing/#dashboard>Dashboards</a>, <a href=../LCDs/ >LCDs</a>, <a href=Functions/#pid-controller>PID Controllers</a>, <a href=Functions/#conditional>Conditional Statements</a>, and other parts of Mycodo to operate from. Add, configure, and activate inputs to begin recording measurements to the database and allow them to be used throughout Mycodo.</p> <h3 id=custom-inputs>Custom Inputs<a class=headerlink href=#custom-inputs title="Permanent link">~</a></h3> <p>See <a href=https://github.com/kizniche/Mycodo/wiki/Building-a-Custom-Input-Module>Building a Custom Input Module</a> Wiki page.</p> <p>There is a Custom Input import system in Mycodo that allows user-created Inputs to be created an used in the Mycodo system. Custom Inputs can be uploaded and imported from the <code>[Gear Icon] -&gt; Configure -&gt; Custom Inputs</code> page. After import, they will be available to use on the <code>Setup -&gt; Data</code> page.</p> <p>If you have a sensor that is not currently supported by Mycodo, you can build your own input module and import it into Mycodo.</p> <p>Open any of the built-in modules located in the inputs directory (<a href=https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/ >https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/</a>) for examples of the proper formatting.</p> <p>There's also minimal input module template that generates random data as an example:</p> <p><a href=https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/examples/minimal_humidity_temperature.py>https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/examples/minimal_humidity_temperature.py</a></p> <p>There's also an input module that includes all available INPUT_INFORMATION options along with descriptions:</p> <p><a href=https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/examples/example_all_options_temperature.py>https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/examples/example_all_options_temperature.py</a></p> <p>Additionally, I have another github repository devoted to Custom Modules that are not included in the built-in set, at <a href=https://github.com/kizniche/Mycodo-custom>kizniche/Mycodo-custom</a>.</p> <h3 id=input-actions>Input Actions<a class=headerlink href=#input-actions title="Permanent link">~</a></h3> <p>Input Actions are functions within the Input module that can be executed from the Web UI. This is useful for things such as calibration or other functionality specific to the input. By default there is at least one action, Acquire Measurements Now, which will cause the input to acquire measurements rather than waiting until the next Period has elapsed.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Actions can only be executed while the Input is active.</p> </div> <h3 id=input-options>Input Options<a class=headerlink href=#input-options title="Permanent link">~</a></h3> <p>In addition to several supported sensors and devices, a Linux command may be specified that will be executed and the return value stored in the measurement database to be used throughout the Mycodo system.</p> <table> <thead> <tr class=header> <th>Setting</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Activate</td> <td>After the sensor has been properly configured, activation begins acquiring measurements from the sensor. Any activated conditional statements will now being operating.</td> </tr> <tr> <td>Deactivate</td> <td>Deactivation stops measurements from being acquired from the sensor. All associated conditional statements will cease to operate.</td> </tr> <tr> <td>Save</td> <td>Save the current configuration entered into the input boxes for a particular sensor.</td> </tr> <tr> <td>Delete</td> <td>Delete a particular sensor.</td> </tr> <tr> <td>Acquire Measurements Now</td> <td>Force the input to conduct measurements and them in the database.</td> </tr> <tr> <td>Up/Down</td> <td>Move a particular sensor up or down in the order displayed.</td> </tr> <tr> <td>Power Output</td> <td>Select a output that powers the sensor. This enables powering cycling (turn off then on) when the sensor returns 3 consecutive errors to attempt to fix the issue. Transistors may also be used instead of a relay (note: NPN transistors are preferred over PNP for powering sensors).</td> </tr> <tr> <td>Location</td> <td>Depending on what sensor is being used, you will need to either select a serial number (DS18B20 temperature sensor), a GPIO pin (in the case of sensors read by a GPIO), or an I2C address. or other.</td> </tr> <tr> <td>I2C Bus</td> <td>The bus to be used to communicate with the I2C address.</td> </tr> <tr> <td>Period (seconds)</td> <td>After the sensor is successfully read and a database entry is made, this is the duration of time waited until the sensor is measured again.</td> </tr> <tr> <td>Measurement Unit</td> <td>Select the unit to save the measurement as (only available for select measurements).</td> </tr> <tr> <td>Pre Output</td> <td>If you require a output to be activated before a measurement is made (for instance, if you have a pump that extracts air to a chamber where the sensor resides), this is the output number that will be activated. The output will be activated for a duration defined by the Pre Duration, then once the output turns off, a measurement by the sensor is made.</td> </tr> <tr> <td>Pre Output Duration (seconds)</td> <td>This is the duration of time that the Pre Output runs for before the sensor measurement is obtained.</td> </tr> <tr> <td>Pre Output During Measurement</td> <td>If enabled, the Pre Output stays on during the acquisition of a measurement. If disabled, the Pre Output is turned off directly before acquiring a measurement.</td> </tr> <tr> <td>Command</td> <td>A linux command (executed as the user 'root') that the return value becomes the measurement</td> </tr> <tr> <td>Command Measurement</td> <td>The measured condition (e.g. temperature, humidity, etc.) from the linux command</td> </tr> <tr> <td>Command Units</td> <td>The units of the measurement condition from the linux command</td> </tr> <tr> <td>Edge</td> <td>Edge sensors only: Select whether the Rising or Falling (or both) edges of a changing voltage are detected. A number of devices to do this when in-line with a circuit supplying a 3.3-volt input signal to a GPIO, such as simple mechanical switch, a button, a magnet (reed/hall) sensor, a PIR motion detector, and more.</td> </tr> <tr> <td>Bounce Time (ms)</td> <td>Edge sensors only: This is the number of milliseconds to bounce the input signal. This is commonly called debouncing a signal [1] and may be necessary if using a mechanical circuit.</td> </tr> <tr> <td>Reset Period (seconds)</td> <td>Edge sensors only: This is the period of time after an edge detection that another edge will not be recorded. This enables devices such as PIR motion sensors that may stay activated for longer periods of time.</td> </tr> <tr> <td>Measurement</td> <td>Analog-to-digital converter only: The type of measurement being acquired by the ADC. For instance, if the resistance of a photocell is being measured through a voltage divider, this measurement would be &quot;light&quot;.</td> </tr> <tr> <td>Units</td> <td>Analog-to-digital converter only: This is the unit of the measurement. With the above example of &quot;light&quot; as the measurement, the unit may be &quot;lux&quot; or &quot;intensity&quot;.</td> </tr> <tr> <td>BT Adapter</td> <td>The Bluetooth adapter to communicate with the input.</td> </tr> <tr> <td>Clock Pin</td> <td>The GPIO (using BCM numbering) connected to the Clock pin of the ADC</td> </tr> <tr> <td>CS Pin</td> <td>The GPIO (using BCM numbering) connected to the CS pin of the ADC</td> </tr> <tr> <td>MISO Pin</td> <td>The GPIO (using BCM numbering) connected to the MISO pin of the ADC</td> </tr> <tr> <td>MOSI Pin</td> <td>The GPIO (using BCM numbering) connected to the MOSI pin of the ADC</td> </tr> <tr> <td>RTD Probe Type</td> <td>Select to measure from a PT100 or PT1000 probe.</td> </tr> <tr> <td>Resistor Reference (Ohm)</td> <td>If your reference resistor is not the default (400 Ohm for PT100, 4000 Ohm for PT1000), you can manually set this value. Several manufacturers now use 430 Ohm resistors on their circuit boards, therefore it's recommended to verify the accuracy of your measurements and adjust this value if necessary.</td> </tr> <tr> <td>Channel</td> <td>Analog-to-digital converter only: This is the channel to obtain the voltage measurement from the ADC.</td> </tr> <tr> <td>Gain</td> <td>Analog-to-digital converter only: set the gain when acquiring the measurement.</td> </tr> <tr> <td>Sample Speed</td> <td>Analog-to-digital converter only: set the sample speed (typically samples per second).</td> </tr> <tr> <td>Volts Min</td> <td>Analog-to-digital converter only: What is the minimum voltage to use when scaling to produce the unit value for the database. For instance, if your ADC is not expected to measure below 0.2 volts for your particular circuit, set this to &quot;0.2&quot;.</td> </tr> <tr> <td>Volts Max</td> <td>Analog-to-digital converter only: This is similar to the Min option above, however it is setting the ceiling to the voltage range. Units Min Analog-to-digital converter only: This value will be the lower value of a range that will use the Min and Max Voltages, above, to produce a unit output. For instance, if your voltage range is 0.0 -1.0 volts, and the unit range is 1 -60, and a voltage of 0.5 is measured, in addition to 0.5 being stored in the database, 30 will be stored as well. This enables creating calibrated scales to use with your particular circuit.</td> </tr> <tr> <td>Units Max</td> <td>Analog-to-digital converter only: This is similar to the Min option above, however it is setting the ceiling to the unit range.</td> </tr> <tr> <td>Weighting</td> <td>The This is a number between 0 and 1 and indicates how much the old reading affects the new reading. It defaults to 0 which means the old reading has no effect. This may be used to smooth the data.</td> </tr> <tr> <td>Pulses Per Rev</td> <td>The number of pulses for a complete revolution.</td> </tr> <tr> <td>Port</td> <td>The server port to be queried (Server Port Open input).</td> </tr> <tr> <td>Times to Check</td> <td>The number of times to attempt to ping a server (Server Ping input).</td> </tr> <tr> <td>Deadline (seconds)</td> <td>The maximum amount of time to wait for each ping attempt, after which 0 (offline) will be returned (Server Ping input).</td> </tr> <tr> <td>Number of Measurement</td> <td>The number of unique measurements to store data for this input.</td> </tr> <tr> <td>Application ID</td> <td>The Application ID on The Things Network.</td> </tr> <tr> <td>App API Key</td> <td>The Application API Key on The Things Network.</td> </tr> <tr> <td>Device ID</td> <td>The Device ID of the Application on The Things Network.</td> </tr> </tbody> </table> <ol> <li><a href=https://kylegabriel.com/projects/2016/02/morse-code-translator.html#debouncing>Debouncing a signal</a></li> </ol> <h3 id=the-things-network>The Things Network<a class=headerlink href=#the-things-network title="Permanent link">~</a></h3> <p><a href=https://www.thethingsnetwork.org/ >The Things Network</a> (TTN) Input module enables downloading of data from TTN if the Data Storage Integration is enabled in your TTN Application. The Data Storage Integration will store data for up to 7 days. Mycodo will download this data periodically and store the measurements locally.</p> <p>The payload on TTN must be properly decoded to variables that correspond to the "Name" option under "Select Measurements", in the lower section of the Input options. For instance, in your TTN Application, if a custom Payload Format is selected, the decoder code may look like this:</p> <div class=codehilite><pre><span></span><code><span class=kd>function</span> <span class=nx>Decoder</span><span class=p>(</span><span class=nx>bytes</span><span class=p>,</span> <span class=nx>port</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>decoded</span> <span class=o>=</span> <span class=p>{};</span>
    <span class=kd>var</span> <span class=nx>rawTemp</span> <span class=o>=</span> <span class=nx>bytes</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=nx>bytes</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=mi>256</span><span class=p>;</span>
    <span class=nx>decoded</span><span class=p>.</span><span class=nx>temperature</span> <span class=o>=</span> <span class=nx>sflt162f</span><span class=p>(</span><span class=nx>rawTemp</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span><span class=p>;</span>
    <span class=k>return</span> <span class=nx>decoded</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>sflt162f</span><span class=p>(</span><span class=nx>rawSflt16</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>rawSflt16</span> <span class=o>&amp;=</span> <span class=mh>0xFFFF</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=nx>rawSflt16</span> <span class=o>===</span> <span class=mh>0x8000</span><span class=p>)</span>
        <span class=k>return</span> <span class=o>-</span><span class=mf>0.0</span><span class=p>;</span>
    <span class=kd>var</span> <span class=nx>sSign</span> <span class=o>=</span> <span class=p>((</span><span class=nx>rawSflt16</span> <span class=o>&amp;</span> <span class=mh>0x8000</span><span class=p>)</span> <span class=o>!==</span> <span class=mi>0</span><span class=p>)</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=mi>1</span><span class=p>;</span>
    <span class=kd>var</span> <span class=nx>exp1</span> <span class=o>=</span> <span class=p>(</span><span class=nx>rawSflt16</span> <span class=o>&gt;&gt;</span> <span class=mi>11</span><span class=p>)</span> <span class=o>&amp;</span> <span class=mh>0xF</span><span class=p>;</span>
    <span class=kd>var</span> <span class=nx>mant1</span> <span class=o>=</span> <span class=p>(</span><span class=nx>rawSflt16</span> <span class=o>&amp;</span> <span class=mh>0x7FF</span><span class=p>)</span> <span class=o>/</span> <span class=mf>2048.0</span><span class=p>;</span>
    <span class=k>return</span> <span class=nx>sSign</span> <span class=o>*</span> <span class=nx>mant1</span> <span class=o>*</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>pow</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=nx>exp1</span> <span class=o>-</span> <span class=mi>15</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <p>This will decode the 2-byte payload into a temperature float value with the name "temperature". Set "Number of Measurements" to "1", then set the "Name" for the first channel (CH0) to "temperature" and the "Measurement Unit" to "Temperature: Celsius (°C)".</p> <p>Upon activation of the Input, data will be downloaded for the past 7 days. The latest data timestamp will be stored so any subsequent activation of the Input will only download new data (since the last known timestamp).</p> <p>There are several example Input modules that, in addition to storing the measurements of a sensor in the influx database, will write the measurements to a serial device. This is useful of you have a LoRaWAN transmitter connected via serial to receive measurement information from Mycodo and transmit it to a LoRaWAN gateway (and subsequently to The Things Network). The data on TTN can then be downloaded elsewhere with the TTN Input. These example Input modules are located in the following locations:</p> <p><code>~/Mycodo/mycodo/inputs/examples/bme280_ttn.py</code></p> <p><code>~/Mycodo/mycodo/inputs/examples/k30_ttn.py</code></p> <p>For example, the following excerpt from <code>bme_280.py</code> will write a set of comma-separated strings to the user-specified serial device with the first string (the letter "B") used to denote the sensor/measurements, followed by the actual measurements (humidity, pressure, and temperature, in this case).</p> <div class=codehilite><pre><span></span><code><span class=n>string_send</span> <span class=o>=</span> <span class=s1>&#39;B,</span><span class=si>{}</span><span class=s1>,</span><span class=si>{}</span><span class=s1>,</span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
    <span class=n>return_dict</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=s1>&#39;value&#39;</span><span class=p>],</span>
    <span class=n>return_dict</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=s1>&#39;value&#39;</span><span class=p>],</span>
    <span class=n>return_dict</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s1>&#39;value&#39;</span><span class=p>])</span>
<span class=bp>self</span><span class=o>.</span><span class=n>serial_send</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>serial</span><span class=o>.</span><span class=n>Serial</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>serial_device</span><span class=p>,</span> <span class=mi>9600</span><span class=p>)</span>
<span class=bp>self</span><span class=o>.</span><span class=n>serial_send</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>string_send</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</code></pre></div> <p>This is useful if multiple data strings are to be sent to the same serial device (e.g. if both <code>bme280_ttn.py</code> and <code>k30_ttn.py</code> are being used at the same time), allowing the serial device to distinguish what data is being received.</p> <p>The full code used to decode both <code>bme280_ttn.py</code> and <code>k30_ttn.py</code>, with informative comments, is located at <code>~/Mycodo/mycodo/inputs/examples/ttn_data_storage_decoder_example.js</code>.</p> <p>These example Input modules may be modified to suit your needs and imported into Mycodo through the <code>[Gear Icon] -&gt; Configure -&gt; Custom Inputs</code> page. After import, they will be available to use on the <code>Setup -&gt; Data</code> page.</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../Data-Viewing/ title="Data Viewing" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Data Viewing </div> </div> </a> <a href=../Maths/ title=Maths class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Maths </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.92ffa368.min.js></script> <script src=../assets/javascripts/bundle.5123e3d4.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>