<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Mycodo Manual</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style>
    html {
      font-size: 100%;
      overflow-y: scroll;
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }
  
    body {
      color: #444;
      font-family: Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman', serif;
      font-size: 12px;
      line-height: 1.7;
      padding: 1em;
      margin: auto;
      max-width: 90%;
      background: #fefefe;
    }
  
    a {
      color: #0645ad;
      text-decoration: none;
    }
  
    a:visited {
      color: #0b0080;
    }
  
    a:hover {
      color: #06e;
    }
  
    a:active {
      color: #faa700;
    }
  
    a:focus {
      outline: thin dotted;
    }
  
    *::-moz-selection {
      background: rgba(255, 255, 0, 0.3);
      color: #000;
    }
  
    *::selection {
      background: rgba(255, 255, 0, 0.3);
      color: #000;
    }
  
    a::-moz-selection {
      background: rgba(255, 255, 0, 0.3);
      color: #0645ad;
    }
  
    a::selection {
      background: rgba(255, 255, 0, 0.3);
      color: #0645ad;
    }
  
    p {
      margin: 1em 0;
    }
  
    img {
      max-width: 100%;
    }
  
    h1, h2, h3, h4, h5, h6 {
      color: #111;
      line-height: 125%;
      margin-top: 2em;
      font-weight: normal;
    }
  
    h4, h5, h6 {
      font-weight: bold;
    }
  
    h1 {
      font-size: 2.5em;
    }
  
    h2 {
      font-size: 2em;
    }
  
    h3 {
      font-size: 1.5em;
    }
  
    h4 {
      font-size: 1.2em;
    }
  
    h5 {
      font-size: 1em;
    }
  
    h6 {
      font-size: 0.9em;
    }
  
    blockquote {
      color: #666666;
      margin: 0;
      padding-left: 3em;
      border-left: 0.5em #EEE solid;
    }
  
    hr {
      display: block;
      height: 2px;
      border: 0;
      border-top: 1px solid #aaa;
      border-bottom: 1px solid #eee;
      margin: 1em 0;
      padding: 0;
    }
  
    pre, code, kbd, samp {
      color: #000;
      font-family: monospace, monospace;
      _font-family: 'courier new', monospace;
      font-size: 0.98em;
    }
  
    pre {
      white-space: pre;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
  
    b, strong {
      font-weight: bold;
    }
  
    dfn {
      font-style: italic;
    }
  
    ins {
      background: #ff9;
      color: #000;
      text-decoration: none;
    }
  
    mark {
      background: #ff0;
      color: #000;
      font-style: italic;
      font-weight: bold;
    }
  
    sub, sup {
      font-size: 75%;
      line-height: 0;
      position: relative;
      vertical-align: baseline;
    }
  
    sup {
      top: -0.5em;
    }
  
    sub {
      bottom: -0.25em;
    }
  
    ul, ol {
      margin: 1em 0;
      padding: 0 0 0 2em;
    }
  
    li p:last-child {
      margin-bottom: 0;
    }
  
    ul ul, ol ol {
      margin: .3em 0;
    }
  
    dl {
      margin-bottom: 1em;
    }
  
    dt {
      font-weight: bold;
      margin-bottom: .8em;
    }
  
    dd {
      margin: 0 0 .8em 2em;
    }
  
    dd:last-child {
      margin-bottom: 0;
    }
  
    img {
      border: 0;
      -ms-interpolation-mode: bicubic;
      vertical-align: middle;
    }
  
    figure {
      display: block;
      text-align: center;
      margin: 1em 0;
    }
  
    figure img {
      border: none;
      margin: 0 auto;
    }
  
    figcaption {
      font-size: 0.8em;
      font-style: italic;
      margin: 0 0 .8em;
    }
  
    table {
      margin-bottom: 2em;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      border-spacing: 0;
      border-collapse: collapse;
    }
  
    table th {
      padding: .2em 1em;
      background-color: #eee;
      border-top: 1px solid #ddd;
      border-left: 1px solid #ddd;
    }
  
    table td {
      padding: .2em 1em;
      border-top: 1px solid #ddd;
      border-left: 1px solid #ddd;
      vertical-align: top;
    }
  
    .author {
      font-size: 1.2em;
      text-align: center;
    }
  
    @media only screen and (min-width: 480px) {
      body {
        font-size: 14px;
      }
    }
    @media only screen and (min-width: 768px) {
      body {
        font-size: 16px;
      }
    }
    @media print {
      * {
        background: transparent !important;
        color: black !important;
        filter: none !important;
        -ms-filter: none !important;
      }
  
      body {
        font-size: 12pt;
        max-width: 100%;
      }
  
      a, a:visited {
        text-decoration: underline;
      }
  
      hr {
        height: 1px;
        border: 0;
        border-bottom: 1px solid black;
      }
  
      a[href]:after {
        content: " (" attr(href) ")";
      }
  
      abbr[title]:after {
        content: " (" attr(title) ")";
      }
  
      .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after {
        content: "";
      }
  
      pre, blockquote {
        border: 1px solid #999;
        padding-right: 1em;
        page-break-inside: avoid;
      }
  
      tr, img {
        page-break-inside: avoid;
      }
  
      img {
        max-width: 100% !important;
      }
  
      @page :left {
        margin: 15mm 20mm 15mm 10mm;
    }
  
      @page :right {
        margin: 15mm 10mm 15mm 20mm;
    }
  
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
  
      h2, h3 {
        page-break-after: avoid;
      }
    }
  </style>
</head>
<body>
<header>
<h1 class="title">Mycodo Manual</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#about-mycodo">About Mycodo</a></li>
<li><a href="#brief-overview">Brief Overview</a></li>
<li><a href="#frequently-asked-questions">Frequently Asked Questions</a></li>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#backup-restore">Backup-Restore</a></li>
<li><a href="#web-interface">Web Interface</a></li>
<li><a href="#rest-api">REST API</a></li>
<li><a href="#data-viewing">Data Viewing</a><ul>
<li><a href="#live-measurements">Live Measurements</a></li>
<li><a href="#asynchronous-graphs">Asynchronous Graphs</a></li>
<li><a href="#dashboard">Dashboard</a><ul>
<li><a href="#graph-widget">Graph Widget</a></li>
<li><a href="#gauge-widget">Gauge Widget</a></li>
<li><a href="#camera-widget">Camera Widget</a></li>
<li><a href="#indicator-widget">Indicator Widget</a></li>
<li><a href="#measurement-widget">Measurement Widget</a></li>
<li><a href="#output-widget">Output Widget</a></li>
<li><a href="#pid-control-widget">PID Control Widget</a></li>
</ul></li>
</ul></li>
<li><a href="#data-acquisition">Data Acquisition</a><ul>
<li><a href="#input">Input</a><ul>
<li><a href="#input-actions">Input Actions</a></li>
<li><a href="#input-options">Input Options</a></li>
<li><a href="#custom-inputs">Custom Inputs</a></li>
<li><a href="#the-things-network">The Things Network</a></li>
</ul></li>
<li><a href="#math">Math</a><ul>
<li><a href="#math-options">Math Options</a></li>
</ul></li>
</ul></li>
<li><a href="#output">Output</a><ul>
<li><a href="#output-options">Output Options</a></li>
<li><a href="#custom-outputs">Custom Outputs</a></li>
<li><a href="#onoff-gpio">On/Off (GPIO)</a></li>
<li><a href="#pwm-gpio">PWM (GPIO)</a></li>
<li><a href="#pwm-gpio-options">PWM (GPIO) Options</a><ul>
<li><a href="#non-hardware-pwm-pins">Non-hardware PWM Pins</a></li>
<li><a href="#hardware-pwm-pins">Hardware PWM Pins</a></li>
<li><a href="#schematics-for-dc-fan-control">Schematics for DC Fan Control</a></li>
<li><a href="#schematics-for-ac-modulation">Schematics for AC Modulation</a></li>
</ul></li>
<li><a href="#atlas-ezo-pmp-pump">Atlas EZO-PMP Pump</a><ul>
<li><a href="#atlas-ezo-pmp-pump-options">Atlas EZO-PMP Pump Options</a></li>
</ul></li>
<li><a href="#wireless-315433-mhz">Wireless 315/433 MHz</a></li>
<li><a href="#linux-command">Linux Command</a></li>
<li><a href="#python-command">Python Command</a></li>
<li><a href="#output-notes">Output Notes</a></li>
</ul></li>
<li><a href="#functions">Functions</a><ul>
<li><a href="#custom-controllers">Custom Controllers</a></li>
<li><a href="#pid-controller">PID Controller</a><ul>
<li><a href="#pid-controller-options">PID Controller Options</a></li>
<li><a href="#pid-output-calculation">PID Output Calculation</a></li>
<li><a href="#pid-tuning">PID Tuning</a></li>
<li><a href="#pid-autotune">PID Autotune</a></li>
</ul></li>
<li><a href="#conditional">Conditional</a><ul>
<li><a href="#conditional-options">Conditional Options</a></li>
<li><a href="#conditional-setup-guide">Conditional Setup Guide</a></li>
</ul></li>
<li><a href="#trigger">Trigger</a><ul>
<li><a href="#output-onoff-options">Output (On/Off) Options</a></li>
<li><a href="#output-pwm-options">Output (PWM) Options</a></li>
<li><a href="#edge-options">Edge Options</a></li>
<li><a href="#run-pwm-method-options">Run PWM Method Options</a></li>
<li><a href="#infrared-remote-input-options">Infrared Remote Input Options</a></li>
<li><a href="#sunrisesunset-options">Sunrise/Sunset Options</a></li>
<li><a href="#timer-duration-options">Timer (Duration) Options</a></li>
<li><a href="#timer-daily-time-point-options">Timer (Daily Time Point) Options</a></li>
<li><a href="#timer-daily-time-span-options">Timer (Daily Time Span) Options</a></li>
</ul></li>
<li><a href="#function-actions">Function Actions</a></li>
</ul></li>
<li><a href="#methods">Methods</a><ul>
<li><a href="#method-options">Method Options</a></li>
<li><a href="#timedate-method">Time/Date Method</a></li>
<li><a href="#duration-method">Duration Method</a></li>
<li><a href="#daily-time-based-method">Daily (Time-Based) Method</a></li>
<li><a href="#daily-sine-wave-method">Daily (Sine Wave) Method</a></li>
<li><a href="#daily-bezier-curve-method">Daily (Bezier Curve) Method</a></li>
</ul></li>
<li><a href="#lcds">LCDs</a></li>
<li><a href="#alerts">Alerts</a></li>
<li><a href="#notes">Notes</a><ul>
<li><a href="#tag-options">Tag Options</a></li>
<li><a href="#note-options">Note Options</a></li>
</ul></li>
<li><a href="#export-import">Export-Import</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#camera">Camera</a></li>
<li><a href="#energy-usage">Energy Usage</a></li>
<li><a href="#system-information">System Information</a></li>
<li><a href="#mycodo-client">Mycodo Client</a></li>
<li><a href="#infrared-remote">Infrared Remote</a></li>
<li><a href="#translations">Translations</a></li>
<li><a href="#configuration-settings">Configuration Settings</a><ul>
<li><a href="#general-settings">General Settings</a></li>
<li><a href="#energy-usage-settings">Energy Usage Settings</a></li>
<li><a href="#input-settings">Input Settings</a></li>
<li><a href="#output-settings">Output Settings</a></li>
<li><a href="#measurement-settings">Measurement Settings</a></li>
<li><a href="#users">Users</a></li>
<li><a href="#user-roles">User Roles</a></li>
<li><a href="#pi-settings">Pi Settings</a></li>
<li><a href="#alert-settings">Alert Settings</a></li>
<li><a href="#camera-settings">Camera Settings</a></li>
<li><a href="#diagnostic-settings">Diagnostic Settings</a></li>
</ul></li>
<li><a href="#troubleshooting">Troubleshooting</a><ul>
<li><a href="#daemon-not-running">Daemon Not Running</a></li>
<li><a href="#incorrect-database-version">Incorrect Database Version</a></li>
<li><a href="#more">More</a></li>
</ul></li>
<li><a href="#devices">Devices</a><ul>
<li><a href="#input-devices">Input Devices</a><ul>
<li><a href="#built-in-inputs-system-specific">Built-In Inputs (System-Specific)</a></li>
<li><a href="#built-in-inputs-sensors">Built-In Inputs (Sensors)</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="about-mycodo">About Mycodo</h1>
<p>Mycodo is an automated monitoring and regulation system that was built to run on the <a href="https://en.wikipedia.org/wiki/Raspberry_Pi">Raspberry Pi</a>.</p>
<p>Originally developed for cultivating edible mushrooms, Mycodo has grown to do much more. The system comprises a backend (daemon) and a frontend (web server). The backend acquires measurements from sensors and devices, and coordinates a diverse set of responses to those measurements, including the ability to modulate outputs (relays, PWM, pumps, wireless outlets, etc.), regulate environmental conditions with electrical devices under PID control (steady regulation or changing over time), schedule timers, capture photos and stream video, trigger actions when measurements meet certain conditions (modulate relays, execute commands, notify by email, etc.), and more. The frontend is a web interface that enables easy navigation and configuration from any browser-enabled device.</p>
<h1 id="brief-overview">Brief Overview</h1>
<p>There are a number of different uses for Mycodo. Some users simply store sensor measurements to monitor conditions remotely, others regulate the environmental conditions of a physical space, while others capture motion-activated or timelapse photography, among other uses.</p>
<p>Input controllers acquire measurements and store them in the InfluxDB <a href="https://en.wikipedia.org/wiki/Time_series_database">time series database</a>. Measurements typically come from sensors, but may also be configured to use the return value of linux or Python commands, or math equations, making a very powerful system for acquiring and generating data.</p>
<p>Output controllers produce changes to the general input/output (GPIO) pins or may be configured to execute linux or Python commands, enabling a large number of potential uses. There are a few different types of outputs: simple switching of GPIO pins (HIGH/LOW), generating pulse-width modulated (PWM) signals, switching 315/433 MHz wireless outlets, controlling Atlas Scientific peristaltic pumps, as well as executing linux and Python commands. The most common output is using a relay to switch electrical devices on and off.</p>
<p>When Inputs and Outputs are combined, PID controllers may be used to create a feedback loop that uses the Output device to modulate an environmental condition the Input measures. Certain Inputs may be coupled with certain Outputs to create a variety of different control and regulation applications. Beyond simple regulation, Methods may be used to create a changing setpoint over time, enabling such things as thermal cyclers, reflow ovens, environmental simulation for terrariums, food and beverage fermentation or curing, and cooking food (<a href="https://en.wikipedia.org/wiki/Sous-vide">sous-vide</a>), to name a few.</p>
<p>Triggers can be set to activate events based on specific dates and times, according to durations of time, or the sunrise/sunset at a specific latitude and longitude. Conditionals are used to activates certain events based on the truth of custom user conditional statements (e.g. &quot;Sensor1 &gt; 23 and 10 &lt; Sensor2 &lt; 30&quot;).</p>
<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<p>Here are a few frequently asked questions about Mycodo. There is also an <a href="https://kylegabriel.com/forum/questions-answers-mycodo">Question &amp; Answer Forum</a> that you can pose a question. However, do ensure it's relevant to the topic by reading the <a href="https://kylegabriel.com/forum/questions-answers-mycodo/when-should-you-post-in-this-forum">stickied Q&amp;A Post</a> to determine if it may be better suited for the <a href="https://kylegabriel.com/forum/general-discussion">General Discussion Forum</a>.</p>
<hr />
<p><em>What should I do if I have an issue?</em></p>
<p>First, read though this manual to make sure you understand how the system works and you're using the system properly. Also check out the <a href="https://github.com/kizniche/Mycodo/wiki">Mycodo Wiki</a>. You may even want to look through recent <a href="https://github.com/kizniche/Mycodo/issues">GitHub Issues</a>. If you haven't resolved your issue by this point, make a <a href="https://github.com/kizniche/Mycodo/issues/new">New GitHub Issue</a> describing the issue and attaching a sufficient amount of evidence (screenshots, log files, etc.) to aid in diagnosing the issue.</p>
<hr />
<p><em>How do I add an Input (like a sensor) to the system if it's not currently supported?</em></p>
<p>Yes, Mycodo supports adding custom Inputs. See the <a href="#custom-inputs">Custom Inputs</a> section for more information.</p>
<p>The second way to add an Input is to create a script that obtains and returns a numerical value when executed in the linux system of the Raspberry Pi. This script may be configured to be executed by a &quot;Linux Command&quot; Input type. This will periodically execute the command and store the returned value to the database for use with the rest of the Mycodo system.</p>
<hr />
<p><em>Can I create a new controller like the PID, Trigger, and LCD functions?</em></p>
<p>Yes, Mycodo supports adding custom Controllers. See the <a href="#custom-controllers">Custom Controllers</a> section for more information.</p>
<hr />
<p><em>How do I set up simple regulation?</em></p>
<p>Here is how I generally set up Mycodo to monitor and regulate:</p>
<ol type="1">
<li>Determine what environmental condition you want to measure or regulate. Consider the devices that must be coupled to achieve this. For instance, temperature regulation require a temperature sensor as the input and an electric heater (or cooler) as the output.</li>
<li>Determine what relays you will need to power your electric devices. The Raspberry Pi is capable of directly switching relays (using a 3.3-volt signal). Remember to select a relay that can handle the load and doesn't exceed the maximum current draw from the Raspberry Pi GPIO pins.</li>
<li>See the <a href="#device-specific-information">Device Specific Information</a> for information about what sensors are supported. Acquire sensor(s) and relay(s) and connect them to the Raspberry Pi according to the manufacturer’s instructions.</li>
<li>On the <code>Setup -&gt; Data</code> page, create a new input using the drop-down to select the correct sensor or input device. Configure the input with the correct communication pins and other options. Activate the input to begin recording measurements to the database.</li>
<li>Go to the <code>Data -&gt; Live</code> page to ensure there is recent data being acquired from the input.</li>
<li>On the <code>Setup -&gt; Output</code> page, add a relay and configure the GPIO pin that switches it, whether the relay switches On when the signal is HIGH or LOW, and what state (On or Off) to set the relay when Mycodo starts. A pulse-width modulated (PWM) output may also be used, among others.</li>
<li>Test the relay by switching it On and Off or generating a PWM signal from the <code>Setup -&gt; Output</code> page and make sure the device connected to the relay turns On when you select &quot;On&quot;, and Off when you select &quot;Off&quot;.</li>
<li>On the <code>Setup -&gt; Function</code> page, create a PID controller with the appropriate input, output, and other parameters. Activate the PID controller.</li>
<li>On the <code>Data -&gt; Dashboard</code> page, create a graph that includes the input measurement, the output that is being used by the PID, and the PID output and setpoint. This provides a good visualization for tuning the PID. See <a href="#quick-setup-examples">Quick Setup Examples</a> for a greater detail of this process and tuning tips.</li>
</ol>
<hr />
<p><em>Can I communicate with Mycodo from the command line?</em></p>
<p>Yes, ~/Mycodo/mycodo/mycodo_client.py has this functionality, but there's a lot to be desired. See <a href="#mycodo-client">Mycodo Client</a>, but note it may not be the most current list of commands, so it's recommended to execute <code>mycodo-client --help</code> to see a full list of current options.</p>
<hr />
<p><em>Can I variably-control the speed of motors or other devices with the PWM output signal from the PID?</em></p>
<p>Yes, as long as you have the proper hardware to do that. The PWM signal being produced by the PID should be handled appropriately, whether by a fast-switching solid state relay, an <a href="#schematics-for-ac-modulation">AC modulation circuit</a>, <a href="#schematics-for-dc-fan-control">DC modulation circuit</a>, or something else.</p>
<hr />
<p><em>I have a PID controller that uses one temperature sensor. If this sensor stops working, my entire PID controller stops working. Is there a way to prevent this by setting up a second sensor to be used in case the first one fails?</em></p>
<p>Yes, you can use as many sensors as you would like to create a redundant system so your PID doesn't stop working if one or more sensors fail. To do this, follow the below instructions:</p>
<ol type="1">
<li>Add and activate all your sensors. For this example, we will use three temperature sensors, Sensor1, Sensor2, and Sensor3, that return measurements in degrees Celsius.</li>
<li>Go to the <code>Setup -&gt; Data</code> page and add the Math controller &quot;Redundancy&quot;.</li>
<li>In the options of the Redundancy controller, set the Period, Start Offset, and Max Age.</li>
<li>In the options of the Redundancy controller, select Sensor1, Sensor2, and Sensor3 for the Input option and click Save.</li>
<li>In the options of the Redundancy controller, change the order you wish to use the sensors under Order of Use. For this example, we will use the default order (Sensor1, Sensor2, Sensor3).</li>
<li>In the options of the Redundancy controller, under Measurement Settings, select Celsius for the Measurement Unit and click Save under Measurement Settings.</li>
<li>Activate the Redundancy Math controller.</li>
<li>Go to the <code>Data -&gt; Live</code> page and verify the Redundancy Math controller is working correctly by returning a value from one of the three selected Inputs. If the first sensor is working correctly, it should return this value. You can deactivate the first sensor (mimicking the first sensor stopped working) and see if the second sensor's value is then returned.</li>
<li>Go to the <code>Setup -&gt; Function</code> page and select the new Redundancy Math controller for the PID Measurement option.</li>
</ol>
<p>The PID controller will now use the measurement returned from the Redundancy Math controller, which in turn will acquire its measurement in the following way:</p>
<p>If a measurement can be found within the Max Age for Sensor1, the measurement for Sensor1 will be returned. If a measurement from Sensor1 could not be acquired, and if a measurement can be found within the Max Age for Sensor2, the measurement for Sensor2 will be returned. If a measurement from Sensor2 could not be acquired, and if a measurement can be found within the Max Age for Sensor3, the measurement for Sensor3 will be returned. If a measurement from Sensor3 could not be acquired, then the Redundancy Math controller will not return a measurement at all (indicating all three sensors are not working). It is advised to set up a Conditional to send a notification email to yourself if one or more measurements are unable to be acquired.</p>
<hr />
<h1 id="upgrading">Upgrading</h1>
<p><code>[Gear Icon] -&gt; Upgrade</code></p>
<p>If you already have Mycodo installed, you can perform an upgrade to the latest <a href="https://github.com/kizniche/Mycodo/releases">Mycodo Release</a> by either using the Upgrade option in the web interface (recommended) or by issuing the following command in a terminal. A log of the upgrade process is created at <code>/var/log/mycodo/mycodoupgrade.log</code></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> /bin/bash ~/Mycodo/mycodo/scripts/upgrade_commands.sh upgrade</code></pre></div>
<h1 id="backup-restore">Backup-Restore</h1>
<p><code>[Gear Icon] -&gt; Backup Restore</code></p>
<p>A backup is made to /var/Mycodo-backups when the system is upgraded or through the web interface on the <code>[Gear Icon] -&gt; Backup Restore</code> page.</p>
<p>If you need to restore a backup, this can be done on the <code>[Gear Icon] -&gt; Backup  Restore</code> page. Find the backup you would like restored and press the Restore button beside it. A restore can also be initialized through the command line. Use the following commands to initialize a restore, changing the appropriate directory names, 'user' to your user name, and TIME and COMMIT to the appropriate text found as the directory names in /var/Mycodo-backups/</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> mv /home/user/Mycodo /home/user/Mycodo_old
<span class="fu">sudo</span> cp -a /var/Mycodo-backups/Mycodo-TIME-COMMIT /home/user/Mycodo
<span class="fu">sudo</span> /bin/bash ~/Mycodo/mycodo/scripts/upgrade_post.sh</code></pre></div>
<h1 id="web-interface">Web Interface</h1>
<p>The main frontend of Mycodo is a web interface that allows any device with a web browser to view collected data and configure the backend, or the daemon, of the system. The web interface supports an authentication system with user/password credentials, user roles that grant/deny access to parts of the system, and SSL for encrypted browsing.</p>
<p>An SSL certificate will be generated (expires in 10 years) and stored at <code>~/Mycodo/mycodo/mycodo_flask/ssl_certs/</code> during the install process to allow SSL to be used to securely connect to the web interface. If you want to use your own SSL certificates, replace them with your own.</p>
<p>If using the auto-generated certificate from the install, be aware that it will not be verified when visiting the web interface using the <code>https://</code> address prefix. You may continually receive a warning message about the security of your site, unless you add the certificate to your browser's trusted list.</p>
<h1 id="rest-api">REST API</h1>
<p>As of version 8, Mycodo has a REST API. Documentation is available here: <a href="https://github.com/kizniche/Mycodo/blob/master/mycodo-api.rst">API Information</a> and <a href="https://kizniche.github.io/Mycodo/mycodo-api.html">API Endpoint Documentation</a>.</p>
<h1 id="data-viewing">Data Viewing</h1>
<p>There are several ways to visualize collected data. Additionally, the dashboard can be used for both viewing data and manipulating the system, thanks to the numerous dashboard widgets available.</p>
<h2 id="live-measurements">Live Measurements</h2>
<p><code>Data -&gt; Live</code></p>
<p>The <code>Live</code> page is the first page a user sees after logging in to Mycodo. It will display the current measurements being acquired from Input and Math controllers. If there is nothing displayed on the <code>Live</code> page, ensure an Input or Math controller is both configured correctly and activated. Data will be automatically updated on the page from the measurement database.</p>
<h2 id="asynchronous-graphs">Asynchronous Graphs</h2>
<p><code>Data -&gt; Asynchronous Graphs</code></p>
<p>A graphical data display that is useful for viewing data sets spanning relatively long periods of time (weeks/months/years), which could be very data- and processor-intensive to view as a Live Graph. Select a time frame and data will be loaded from that time span, if it exists. The first view will be of the entire selected data set. For every view/zoom, 700 data points will be loaded. If there are more than 700 data points recorded for the time span selected, 700 points will be created from an averaging of the points in that time span. This enables much less data to be used to navigate a large data set. For instance, 4 months of data may be 10 megabytes if all of it were downloaded. However, when viewing a 4 month span, it's not possible to see every data point of that 10 megabytes, and aggregating of points is inevitable. With asynchronous loading of data, you only download what you see. So, instead of downloading 10 megabytes every graph load, only ~50kb will be downloaded until a new zoom level is selected, at which time only another ~50kb is downloaded.</p>
<p>Note: Live Graphs require measurements to be acquired, therefore at least one sensor needs to be added and activated in order to display live data.</p>
<h2 id="dashboard">Dashboard</h2>
<p><code>Data -&gt; Dashboard</code></p>
<p>Dashboards are where you can add widgets to display data and interact with the system. Multiple dashboards can be created. Widgets can be moved and arranged on the dashboards by dragging the top header and can be resized by dragging the bottom-left or bottom-right side of the widget. Specific options for widgets are below.</p>
<h3 id="graph-widget">Graph Widget</h3>
<p>A graphical data display that is useful for viewing data sets spanning relatively short periods of time (hours/days/weeks). Select a time frame to view data and continually updating data from new sensor measurements. Multiple graphs can be created on one page that enables a dashboard to be created of graphed sensor data. Each graph may have one or more data from inputs, outputs, or PIDs rendered onto it. To edit graph options, select the plus sign on the top-right of a graph.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>x-Axis (minutes)</td>
<td>The duration to display on the x-axis of the graph.</td>
</tr>
<tr class="even">
<td>Enable Auto Refresh</td>
<td>Automatically refresh the data on the graph Refresh Period.</td>
</tr>
<tr class="odd">
<td>Refresh (seconds)</td>
<td>The duration between acquisitions of new data to display on the graph.</td>
</tr>
<tr class="even">
<td>Inputs/Outputs/PIDs</td>
<td>The Inputs, Outputs, and PIDs to display on the graph.</td>
</tr>
<tr class="odd">
<td>Enable X-Axis Reset</td>
<td>Reset the x-axis min/max every time new data comes in during the auto refresh.</td>
</tr>
<tr class="even">
<td>Enable Title</td>
<td>Show a title of the graph name.</td>
</tr>
<tr class="odd">
<td>Enable Navbar</td>
<td>Show a slidable navigation bar at the bottom of the graph.</td>
</tr>
<tr class="even">
<td>Enable Export</td>
<td>Enable a button on the top right of the graph to allow exporting of the currently-displayed data as PNG, JPEG, PDF, SVG, CSV, XLS.</td>
</tr>
<tr class="odd">
<td>Enable Range Selector</td>
<td>Show a set of navigation buttons at the top of the graph to quickly change the display duration.</td>
</tr>
<tr class="even">
<td>Enable Graph Shift</td>
<td>If enabled, old data points are removed when new data is added to the graph. Only recommended to enable if Enable Navbar is enabled.</td>
</tr>
<tr class="odd">
<td>Enable Custom Colors</td>
<td>Use custom colors for Input, Output, and PID lines. Select the colors with the buttons that appear below this checkbox.</td>
</tr>
<tr class="even">
<td>Enable Manual Y-Axis Min/Max</td>
<td>Set the minimum and maximum y-axes of a particular graph. Set both the minimum and maximum to 0 to disable for a particular y-axis.</td>
</tr>
<tr class="odd">
<td>Enable Y-Axis Align Ticks</td>
<td>Align the ticks of several y-axes of the same graph.</td>
</tr>
<tr class="even">
<td>Enable Y-Axis Start On Tick</td>
<td>Start all y-axes of a graph on the same tick.</td>
</tr>
<tr class="odd">
<td>Enable Y-Axis End On Tick</td>
<td>End all y-axes of a graph on the same tick.</td>
</tr>
</tbody>
</table>
<h3 id="gauge-widget">Gauge Widget</h3>
<p>Gauges are visual objects that allow one to quickly see what the latest measurement is of an input. An example that you may be familiar with is a speedometer in a car.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refresh (seconds)</td>
<td>The duration between acquisitions of new data to display on the graph.</td>
</tr>
<tr class="even">
<td>Max Age (seconds)</td>
<td>The maximum allowable age of the measurement. If the age is greater than this, the gauge will turn off, indicating there is an issue.</td>
</tr>
<tr class="odd">
<td>Gauge Min</td>
<td>The lowest value of the gauge.</td>
</tr>
<tr class="even">
<td>Gauge Max</td>
<td>The highest value of the gauge.</td>
</tr>
<tr class="odd">
<td>Stops</td>
<td>The number of color ranges on the gauge.</td>
</tr>
<tr class="even">
<td>Show Timestamp</td>
<td>Show the timestamp of the current gauge measurement.</td>
</tr>
</tbody>
</table>
<h3 id="camera-widget">Camera Widget</h3>
<p>Cameras may be added to keep a continuous view on areas.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refresh (seconds)</td>
<td>The duration between acquisitions of new data to display on the graph.</td>
</tr>
<tr class="even">
<td>Max Age (seconds)</td>
<td>The maximum allowed age of the image timestamp before a &quot;No Recent Image&quot; message is returned.</td>
</tr>
<tr class="odd">
<td>Acquire Image (and save new file)</td>
<td>Acquire a new images and save the previous image.</td>
</tr>
<tr class="even">
<td>Acquire Image (and erase last file)</td>
<td>Acquire a new image but erase the previous image.</td>
</tr>
<tr class="odd">
<td>Display Live Video Stream</td>
<td>Automatically start a video stream and display it.</td>
</tr>
<tr class="even">
<td>Display Latest Timelapse Image</td>
<td>Display the latest timelapse image that exists.</td>
</tr>
<tr class="odd">
<td>Add Timestamp</td>
<td>Append a timestamp to the image.</td>
</tr>
</tbody>
</table>
<h3 id="indicator-widget">Indicator Widget</h3>
<p>Shows a green or red button depending if the measurement value is 0 or not 0.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refresh (seconds)</td>
<td>The duration between acquisitions of new data to display on the graph.</td>
</tr>
<tr class="even">
<td>Max Age (seconds)</td>
<td>The maximum allowable age of the measurement. If the age is greater than this, the gauge will turn off, indicating there is an issue.</td>
</tr>
<tr class="odd">
<td>Timestamp Font Size (em)</td>
<td>The font size of the timestamp value in em.</td>
</tr>
<tr class="even">
<td>Invert</td>
<td>Invert/reverse the colors.</td>
</tr>
<tr class="odd">
<td>Measurement</td>
<td>The device to display information about.</td>
</tr>
</tbody>
</table>
<h3 id="measurement-widget">Measurement Widget</h3>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refresh (seconds)</td>
<td>The duration between acquisitions of new data to display on the graph.</td>
</tr>
<tr class="even">
<td>Max Age (seconds)</td>
<td>The maximum allowable age of the measurement. If the age is greater than this, the gauge will turn off, indicating there is an issue.</td>
</tr>
<tr class="odd">
<td>Value Font Size (em)</td>
<td>The font size of the measurement value in em.</td>
</tr>
<tr class="even">
<td>Timestamp Font Size (em)</td>
<td>The font size of the timestamp value in em.</td>
</tr>
<tr class="odd">
<td>Decimal Places</td>
<td>The number of digits to display to the right of the decimal.</td>
</tr>
<tr class="even">
<td>Measurement</td>
<td>The device to display information about.</td>
</tr>
</tbody>
</table>
<h3 id="output-widget">Output Widget</h3>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refresh (seconds)</td>
<td>The duration between acquisitions of new data to display on the graph.</td>
</tr>
<tr class="even">
<td>Max Age (seconds)</td>
<td>The maximum allowable age of the measurement. If the age is greater than this, the gauge will turn off, indicating there is an issue.</td>
</tr>
<tr class="odd">
<td>Value Font Size (em)</td>
<td>The font size of the output value in em.</td>
</tr>
<tr class="even">
<td>Timestamp Font Size (em)</td>
<td>The font size of the timestamp value in em.</td>
</tr>
<tr class="odd">
<td>Decimal Places</td>
<td>The number of digits to display to the right of the decimal.</td>
</tr>
<tr class="even">
<td>Feature Output Controls</td>
<td>Display buttons to turn On and Off the relay from the dashboard element.</td>
</tr>
<tr class="odd">
<td>Output</td>
<td>The output to display information about.</td>
</tr>
</tbody>
</table>
<h3 id="pid-control-widget">PID Control Widget</h3>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refresh (seconds)</td>
<td>The duration between acquisitions of new data to display on the graph.</td>
</tr>
<tr class="even">
<td>Max Age (seconds)</td>
<td>The maximum allowable age of the measurement. If the age is greater than this, the gauge will turn off, indicating there is an issue.</td>
</tr>
<tr class="odd">
<td>Value Font Size (em)</td>
<td>The font size of the measurement value in em.</td>
</tr>
<tr class="even">
<td>Timestamp Font Size (em)</td>
<td>The font size of the timestamp value in em.</td>
</tr>
<tr class="odd">
<td>Decimal Places</td>
<td>The number of digits to display to the right of the decimal.</td>
</tr>
<tr class="even">
<td>Show PID Information</td>
<td>Show extra PID information on the dashboard element.</td>
</tr>
<tr class="odd">
<td>Show Set Setpoint</td>
<td>Allow setting the PID setpoint on the dashboard element.</td>
</tr>
<tr class="even">
<td>PID</td>
<td>The PID to display information about.</td>
</tr>
</tbody>
</table>
<h1 id="data-acquisition">Data Acquisition</h1>
<h2 id="input">Input</h2>
<p>Inputs, such as sensors, ADC signals, or even a response from a command, enable measuring conditions in the environment or elsewhere, which will be stored in a time-series database (InfluxDB). This database will provide measurements for <a href="#graphs">Graphs</a>, <a href="#lcds">LCDs</a>, <a href="#pid-controllers">PID Controllers</a>, <a href="#conditional-statements">Conditional Statements</a>, and other parts of Mycodo to operate from. Add, configure, and activate inputs to begin recording measurements to the database and allow them to be used throughout Mycodo.</p>
<h3 id="input-actions">Input Actions</h3>
<p>Input Actions are functions within the Input module that can be executed from the Web UI. This is useful for things such as calibration or other functionality specific to the input. By default there is at least one action, Acquire Measurements Now, which will cause the input to acquire measurements rather than waiting until the next Period has elapsed. Note, actions can only be executed while the Input is active.</p>
<h3 id="input-options">Input Options</h3>
<p>In addition to several supported sensors and devices, a Linux command may be specified that will be executed and the return value stored in the measurement database to be used throughout the Mycodo system.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Activate</td>
<td>After the sensor has been properly configured, activation begins acquiring measurements from the sensor. Any activated conditional statements will now being operating.</td>
</tr>
<tr class="even">
<td>Deactivate</td>
<td>Deactivation stops measurements from being acquired from the sensor. All associated conditional statements will cease to operate.</td>
</tr>
<tr class="odd">
<td>Save</td>
<td>Save the current configuration entered into the input boxes for a particular sensor.</td>
</tr>
<tr class="even">
<td>Delete</td>
<td>Delete a particular sensor.</td>
</tr>
<tr class="odd">
<td>Acquire Measurements Now</td>
<td>Force the input to conduct measurements and them in the database.</td>
</tr>
<tr class="even">
<td>Up/Down</td>
<td>Move a particular sensor up or down in the order displayed.</td>
</tr>
<tr class="odd">
<td>Power Output</td>
<td>Select a output that powers the sensor. This enables powering cycling (turn off then on) when the sensor returns 3 consecutive errors to attempt to fix the issue. Transistors may also be used instead of a relay (note: NPN transistors are preferred over PNP for powering sensors).</td>
</tr>
<tr class="even">
<td>Location</td>
<td>Depending on what sensor is being used, you will need to either select a serial number (DS18B20 temperature sensor), a GPIO pin (in the case of sensors read by a GPIO), or an I2C address. or other.</td>
</tr>
<tr class="odd">
<td>I2C Bus</td>
<td>The bus to be used to communicate with the I2C address.</td>
</tr>
<tr class="even">
<td>Period (seconds)</td>
<td>After the sensor is successfully read and a database entry is made, this is the duration of time waited until the sensor is measured again.</td>
</tr>
<tr class="odd">
<td>Measurement Unit</td>
<td>Select the unit to save the measurement as (only available for select measurements).</td>
</tr>
<tr class="even">
<td>Pre Output</td>
<td>If you require a output to be activated before a measurement is made (for instance, if you have a pump that extracts air to a chamber where the sensor resides), this is the output number that will be activated. The output will be activated for a duration defined by the Pre Duration, then once the output turns off, a measurement by the sensor is made.</td>
</tr>
<tr class="odd">
<td>Pre Output Duration (seconds)</td>
<td>This is the duration of time that the Pre Output runs for before the sensor measurement is obtained.</td>
</tr>
<tr class="even">
<td>Pre Output During Measurement</td>
<td>If enabled, the Pre Output stays on during the acquisition of a measurement. If disabled, the Pre Output is turned off directly before acquiring a measurement.</td>
</tr>
<tr class="odd">
<td>Command</td>
<td>A linux command (executed as the user 'root') that the return value becomes the measurement</td>
</tr>
<tr class="even">
<td>Command Measurement</td>
<td>The measured condition (e.g. temperature, humidity, etc.) from the linux command</td>
</tr>
<tr class="odd">
<td>Command Units</td>
<td>The units of the measurement condition from the linux command</td>
</tr>
<tr class="even">
<td>Edge</td>
<td>Edge sensors only: Select whether the Rising or Falling (or both) edges of a changing voltage are detected. A number of devices to do this when in-line with a circuit supplying a 3.3-volt input signal to a GPIO, such as simple mechanical switch, a button, a magnet (reed/hall) sensor, a PIR motion detector, and more.</td>
</tr>
<tr class="odd">
<td>Bounce Time (ms)</td>
<td>Edge sensors only: This is the number of milliseconds to bounce the input signal. This is commonly called debouncing a signal [1] and may be necessary if using a mechanical circuit.</td>
</tr>
<tr class="even">
<td>Reset Period (seconds)</td>
<td>Edge sensors only: This is the period of time after an edge detection that another edge will not be recorded. This enables devices such as PIR motion sensors that may stay activated for longer periods of time.</td>
</tr>
<tr class="odd">
<td>Measurement</td>
<td>Analog-to-digital converter only: The type of measurement being acquired by the ADC. For instance, if the resistance of a photocell is being measured through a voltage divider, this measurement would be &quot;light&quot;.</td>
</tr>
<tr class="even">
<td>Units</td>
<td>Analog-to-digital converter only: This is the unit of the measurement. With the above example of &quot;light&quot; as the measurement, the unit may be &quot;lux&quot; or &quot;intensity&quot;.</td>
</tr>
<tr class="odd">
<td>BT Adapter</td>
<td>The Bluetooth adapter to communicate with the input.</td>
</tr>
<tr class="even">
<td>Clock Pin</td>
<td>The GPIO (using BCM numbering) connected to the Clock pin of the ADC</td>
</tr>
<tr class="odd">
<td>CS Pin</td>
<td>The GPIO (using BCM numbering) connected to the CS pin of the ADC</td>
</tr>
<tr class="even">
<td>MISO Pin</td>
<td>The GPIO (using BCM numbering) connected to the MISO pin of the ADC</td>
</tr>
<tr class="odd">
<td>MOSI Pin</td>
<td>The GPIO (using BCM numbering) connected to the MOSI pin of the ADC</td>
</tr>
<tr class="even">
<td>RTD Probe Type</td>
<td>Select to measure from a PT100 or PT1000 probe.</td>
</tr>
<tr class="odd">
<td>Resistor Reference (Ohm)</td>
<td>If your reference resistor is not the default (400 Ohm for PT100, 4000 Ohm for PT1000), you can manually set this value. Several manufacturers now use 430 Ohm resistors on their circuit boards, therefore it's recommended to verify the accuracy of your measurements and adjust this value if necessary.</td>
</tr>
<tr class="even">
<td>Channel</td>
<td>Analog-to-digital converter only: This is the channel to obtain the voltage measurement from the ADC.</td>
</tr>
<tr class="odd">
<td>Gain</td>
<td>Analog-to-digital converter only: set the gain when acquiring the measurement.</td>
</tr>
<tr class="even">
<td>Sample Speed</td>
<td>Analog-to-digital converter only: set the sample speed (typically samples per second).</td>
</tr>
<tr class="odd">
<td>Volts Min</td>
<td>Analog-to-digital converter only: What is the minimum voltage to use when scaling to produce the unit value for the database. For instance, if your ADC is not expected to measure below 0.2 volts for your particular circuit, set this to &quot;0.2&quot;.</td>
</tr>
<tr class="even">
<td>Volts Max</td>
<td>Analog-to-digital converter only: This is similar to the Min option above, however it is setting the ceiling to the voltage range. Units Min Analog-to-digital converter only: This value will be the lower value of a range that will use the Min and Max Voltages, above, to produce a unit output. For instance, if your voltage range is 0.0 -1.0 volts, and the unit range is 1 -60, and a voltage of 0.5 is measured, in addition to 0.5 being stored in the database, 30 will be stored as well. This enables creating calibrated scales to use with your particular circuit.</td>
</tr>
<tr class="odd">
<td>Units Max</td>
<td>Analog-to-digital converter only: This is similar to the Min option above, however it is setting the ceiling to the unit range.</td>
</tr>
<tr class="even">
<td>Weighting</td>
<td>The This is a number between 0 and 1 and indicates how much the old reading affects the new reading. It defaults to 0 which means the old reading has no effect. This may be used to smooth the data.</td>
</tr>
<tr class="odd">
<td>Pulses Per Rev</td>
<td>The number of pulses for a complete revolution.</td>
</tr>
<tr class="even">
<td>Port</td>
<td>The server port to be queried (Server Port Open input).</td>
</tr>
<tr class="odd">
<td>Times to Check</td>
<td>The number of times to attempt to ping a server (Server Ping input).</td>
</tr>
<tr class="even">
<td>Deadline (seconds)</td>
<td>The maximum amount of time to wait for each ping attempt, after which 0 (offline) will be returned (Server Ping input).</td>
</tr>
<tr class="odd">
<td>Number of Measurement</td>
<td>The number of unique measurements to store data for this input.</td>
</tr>
<tr class="even">
<td>Application ID</td>
<td>The Application ID on The Things Network.</td>
</tr>
<tr class="odd">
<td>App API Key</td>
<td>The Application API Key on The Things Network.</td>
</tr>
<tr class="even">
<td>Device ID</td>
<td>The Device ID of the Application on The Things Network.</td>
</tr>
</tbody>
</table>
<ol type="1">
<li><a href="https://kylegabriel.com/projects/2016/02/morse-code-translator.html#debouncing">Debouncing a signal</a></li>
</ol>
<h3 id="custom-inputs">Custom Inputs</h3>
<p>There is a Custom Input import system in Mycodo that allows user-created Inputs to be created an used in the Mycodo system. Custom Inputs can be uploaded and imported from the <code>Configure -&gt; Inputs</code> page. After import, they will be available to use on the <code>Setup -&gt; Data</code> page.</p>
<p>If you have a sensor that is not currently supported by Mycodo, you can build your own input module and import it into Mycodo. All information about an input is contained within the input module, set in the dictionaries 'INPUT_INFORMATION' and 'measurements_dict'. Each module will requires at a minimum for these variables to be set in INPUT_INFORMATION: 'input_name_unique', 'input_manufacturer', 'input_name', 'measurements_name', and 'measurements_dict'. The measurements_dict dictionary contains the measurements that are acquired and stored, and require both the units and measurements to exist in the measurement/unit database (Add missing measurements/units on the <code>Configure -&gt; Measurements</code> page).</p>
<p>Open any of the built-in modules located in the inputs directory (<a href="https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/" class="uri">https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/</a>) for examples of the proper formatting.</p>
<p>There's also minimal input module template that generates random data as an example:</p>
<p><a href="https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/examples/minimal_humidity_temperature.py" class="uri">https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/examples/minimal_humidity_temperature.py</a></p>
<p>There's also an input module that includes all available INPUT_INFORMATION options along with descriptions:</p>
<p><a href="https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/examples/example_all_options_temperature.py" class="uri">https://github.com/kizniche/Mycodo/tree/master/mycodo/inputs/examples/example_all_options_temperature.py</a></p>
<p>Additionally, I have another github repository devoted to Custom Inputs and Controllers that are not included in the built-in set, at <a href="https://github.com/kizniche/Mycodo-custom">kizniche/Mycodo-custom</a>.</p>
<h3 id="the-things-network">The Things Network</h3>
<p><a href="https://www.thethingsnetwork.org/">The Things Network</a> (TTN) Input module enables downloading of data from TTN if the Data Storage Integration is enabled in your TTN Application. The Data Storage Integration will store data for up to 7 days. Mycodo will download this data periodically and store the measurements locally.</p>
<p>The payload on TTN must be properly decoded to variables that correspond to the &quot;Name&quot; option under &quot;Select Measurements&quot;, in the lower section of the Input options. For instance, in your TTN Application, if a custom Payload Format is selected, the decoder code may look like this:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">Decoder</span>(bytes<span class="op">,</span> port) <span class="op">{</span>
    <span class="kw">var</span> decoded <span class="op">=</span> <span class="op">{};</span>
    <span class="kw">var</span> rawTemp <span class="op">=</span> bytes[<span class="dv">0</span>] <span class="op">+</span> bytes[<span class="dv">1</span>] <span class="op">*</span> <span class="dv">256</span><span class="op">;</span>
    <span class="va">decoded</span>.<span class="at">temperature</span> <span class="op">=</span> <span class="at">sflt162f</span>(rawTemp) <span class="op">*</span> <span class="dv">100</span><span class="op">;</span>
    <span class="cf">return</span> decoded<span class="op">;</span>
<span class="op">}</span>

<span class="kw">function</span> <span class="at">sflt162f</span>(rawSflt16) <span class="op">{</span>
    rawSflt16 <span class="op">&amp;=</span> <span class="bn">0xFFFF</span><span class="op">;</span>
    <span class="cf">if</span> (rawSflt16 <span class="op">===</span> <span class="bn">0x8000</span>)
        <span class="cf">return</span> <span class="fl">-0.0</span><span class="op">;</span>
    <span class="kw">var</span> sSign <span class="op">=</span> ((rawSflt16 <span class="op">&amp;</span> <span class="bn">0x8000</span>) <span class="op">!==</span> <span class="dv">0</span>) <span class="op">?</span> <span class="dv">-1</span> : <span class="dv">1</span><span class="op">;</span>
    <span class="kw">var</span> exp1 <span class="op">=</span> (rawSflt16 <span class="op">&gt;&gt;</span> <span class="dv">11</span>) <span class="op">&amp;</span> <span class="bn">0xF</span><span class="op">;</span>
    <span class="kw">var</span> mant1 <span class="op">=</span> (rawSflt16 <span class="op">&amp;</span> <span class="bn">0x7FF</span>) / <span class="fl">2048.0</span><span class="op">;</span>
    <span class="cf">return</span> sSign <span class="op">*</span> mant1 <span class="op">*</span> <span class="va">Math</span>.<span class="at">pow</span>(<span class="dv">2</span><span class="op">,</span> exp1 <span class="op">-</span> <span class="dv">15</span>)<span class="op">;</span>
<span class="op">}</span></code></pre></div>
<p>This will decode the 2-byte payload into a temperature float value with the name &quot;temperature&quot;. Set &quot;Number of Measurements&quot; to &quot;1&quot;, then set the &quot;Name&quot; for the first channel (CH0) to &quot;temperature&quot; and the &quot;Measurement Unit&quot; to &quot;Temperature: Celsius (°C)&quot;.</p>
<p>Upon activation of the Input, data will be downloaded for the past 7 days. The latest data timestamp will be stored so any subsequent activation of the Input will only download new data (since the last known timestamp).</p>
<p>There are several example Input modules that, in addition to storing the measurements of a sensor in the influx database, will write the measurements to a serial device. This is useful of you have a LoRaWAN transmitter connected via serial to receive measurement information from Mycodo and transmit it to a LoRaWAN gateway (and subsequently to The Things Network). The data on TTN can then be downloaded elsewhere with the TTN Input. These example Input modules are located in the following locations:</p>
<p><code>~/Mycodo/mycodo/inputs/examples/bme280_ttn.py</code></p>
<p><code>~/Mycodo/mycodo/inputs/examples/k30_ttn.py</code></p>
<p>For example, the following excerpt from <code>bme_280.py</code> will write a set of comma-separated strings to the user-specified serial device with the first string (the letter &quot;B&quot;) used to denote the sensor/measurements, followed by the actual measurements (humidity, pressure, and temperature, in this case).</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">string_send <span class="op">=</span> <span class="st">'B,</span><span class="sc">{}</span><span class="st">,</span><span class="sc">{}</span><span class="st">,</span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(
    return_dict[<span class="dv">1</span>][<span class="st">'value'</span>],
    return_dict[<span class="dv">2</span>][<span class="st">'value'</span>],
    return_dict[<span class="dv">0</span>][<span class="st">'value'</span>])
<span class="va">self</span>.serial_send <span class="op">=</span> <span class="va">self</span>.serial.Serial(<span class="va">self</span>.serial_device, <span class="dv">9600</span>)
<span class="va">self</span>.serial_send.write(string_send.encode())</code></pre></div>
<p>This is useful if multiple data strings are to be sent to the same serial device (e.g. if both <code>bme280_ttn.py</code> and <code>k30_ttn.py</code> are being used at the same time), allowing the serial device to distinguish what data is being received.</p>
<p>The full code used to decode both <code>bme280_ttn.py</code> and <code>k30_ttn.py</code>, with informative comments, is located at <code>~/Mycodo/mycodo/inputs/examples/ttn_data_storage_decoder_example.js</code>.</p>
<p>These example Input modules may be modified to suit your needs and imported into Mycodo through the <code>Configure -&gt; Inputs</code> page. After import, they will be available to use on the <code>Setup -&gt; Data</code> page.</p>
<h2 id="math">Math</h2>
<p>Math controllers allow one or more Inputs to have math applied to produce a new value that may be used within Mycodo.</p>
<p>Note: &quot;Last&quot; means the controller will only acquire the last (latest) measurement in the database for performing math with. &quot;Past&quot; means the controller will acquire all measurements from the present until the &quot;Max Age (seconds)&quot; set by the user (e.g. if measurements are acquired every 10 seconds, and a Max Age is set to 60 seconds, there will on average be 6 measurements returned to have math performed).</p>
<h3 id="math-options">Math Options</h3>
<p>Types of math controllers.</p>
<table>
<colgroup>
<col style="width: 41%"></col>
<col style="width: 58%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Average (Last, Multiple Channels)</td>
<td>Stores the statistical mean of the last measurement of multiple selected measurement channels.</td>
</tr>
<tr class="even">
<td>Average (Past, Single Channel)</td>
<td>Stores the statistical mean of one selected measurement channel over a duration of time determined by the Max Age (seconds) option.</td>
</tr>
<tr class="odd">
<td>Sum (Last, Multiple Channels)</td>
<td>Stores the sum of multiple selected measurement channels.</td>
</tr>
<tr class="even">
<td>Sum (Past, Single Channel)</td>
<td>Stores the sum of one selected measurement channel over a duration of time determined by the Max Age(seconds) option.</td>
</tr>
<tr class="odd">
<td>Difference</td>
<td>Stores the mathematical difference (value_1 - value_2).</td>
</tr>
<tr class="even">
<td>Equation</td>
<td>Stores the calculated value of an equation.</td>
</tr>
<tr class="odd">
<td>Redundancy</td>
<td>Select multiple Inputs and if one input isn't available, the next measurement will be used. For example, this is useful if an Input stops but you don't want a PID controller to stop working if there is another measurement that can be used. More than one Input can be and the preferred Order of Use can be defined.</td>
</tr>
<tr class="even">
<td>Verification</td>
<td>Ensures the greatest difference between any selected Inputs is less than Max Difference, and if so, stores the average of the selected measurements.</td>
</tr>
<tr class="odd">
<td>Statistics</td>
<td>Calculates mean, median, minimum, maximum, standard deviation (SD), SD upper, and SD lower for a set of measurements.</td>
</tr>
<tr class="even">
<td>Humidity (Wet/Dry-Bulb)</td>
<td>Calculates and stores the percent relative humidity from the dry-bulb and wet-bulb temperatures, and optional pressure.</td>
</tr>
</tbody>
</table>
<p>Math controller options.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input</td>
<td>Select the Inputs to use with the particular Math controller</td>
</tr>
<tr class="even">
<td>Period (seconds)</td>
<td>The duration of time between calculating and storing a new value</td>
</tr>
<tr class="odd">
<td>Max Age (seconds)</td>
<td>The maximum allowed age of the Input measurements. If an Input measurement is older than this period, the calculation is cancelled and the new value is not stored in the database. Consequently, if another controller has a Max Age set and cannot retrieve a current Math value, it will cease functioning. A PID controller, for instance, may stop regulating if there is no new Math value created, preventing the PID controller from continuing to run when it should not.</td>
</tr>
<tr class="even">
<td>Start Offset (seconds)</td>
<td>Wait this duration before attempting the first calculation/measurement.</td>
</tr>
<tr class="odd">
<td>Measurement</td>
<td>This is the condition being measured. For instance, if all of the selected measurements are temperature, this should also be temperature. A list of the pre-defined measurements that may be used is below.</td>
</tr>
<tr class="even">
<td>Units</td>
<td>This is the units to display along with the measurement, on Graphs. If a pre-defined measurement is used, this field will default to the units associated with that measurement.</td>
</tr>
<tr class="odd">
<td>Reverse Equation</td>
<td>For Difference calculations, this will reverse the equation order, from <code>value_1 - value_2</code> to <code>value_2 - value_1</code>.</td>
</tr>
<tr class="even">
<td>Absolute Value</td>
<td>For Difference calculations, this will yield an absolute value (positive number).</td>
</tr>
<tr class="odd">
<td>Max Difference</td>
<td>If the difference between any selected Input is greater than this value, no new value will be stored in the database.</td>
</tr>
<tr class="even">
<td>Dry-Bulb Temperature</td>
<td>The measurement that will serve as the dry-bulb temperature (this is the warmer of the two temperature measurements)</td>
</tr>
<tr class="odd">
<td>Wet-Bulb Temperature</td>
<td>The measurement that will serve as the wet-bulb temperature (this is the colder of the two temperature measurements)</td>
</tr>
<tr class="even">
<td>Pressure</td>
<td>This is an optional pressure measurement that can be used to calculate the percent relative humidity. If disabled, a default 101325 Pa will be used in the calculation.</td>
</tr>
<tr class="odd">
<td>Equation</td>
<td>An equation that will be solved with Python's eval() function. Let &quot;x&quot; represent the input value. Valid equation symbols include: + - * / ^</td>
</tr>
<tr class="even">
<td>Order of Use</td>
<td>This is the order in which the selected Inputs will be used. This must be a comma separated list of Input IDs (integers, not UUIDs).</td>
</tr>
</tbody>
</table>
<h1 id="output">Output</h1>
<p><code>Setup -&gt; Output</code></p>
<p>Outputs are various signals that can be generated that operate devices. An output can be a PWM signal, a simple HIGH/LOW signal to operate a relay, a 315/433 MHz signal to switch a radio frequency-operated relay, driving of pumps and motors, or an execution of a linux or Python command, to name a few.</p>
<h2 id="output-options">Output Options</h2>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Pin (GPIO)</td>
<td>This is the GPIO that will be the signal to the output, using BCM numbering.</td>
</tr>
<tr class="even">
<td>WiringPi Pin</td>
<td>This is the GPIO that will be the signal to the output, using WiringPi numbering.</td>
</tr>
<tr class="odd">
<td>On State</td>
<td>This is the state of the GPIO to signal the output to turn the device on. HIGH will send a 3.3-volt signal and LOW will send a 0-volt signal. If you output completes the circuit (and the device powers on) when a 3.3-volt signal is sent, then set this to HIGH. If the device powers when a 0-volt signal is sent, set this to LOW.</td>
</tr>
<tr class="even">
<td>Protocol</td>
<td>This is the protocol to use to transmit via 315/433 MHz. Default is 1, but if this doesn't work, increment the number.</td>
</tr>
<tr class="odd">
<td>UART Device</td>
<td>The UART device connected to the device.</td>
</tr>
<tr class="even">
<td>Baud Rate</td>
<td>The baud rate of the UART device.</td>
</tr>
<tr class="odd">
<td>I2C Address</td>
<td>The I2C address of the device.</td>
</tr>
<tr class="even">
<td>I2C Bus</td>
<td>The I2C bus the device is connected to.</td>
</tr>
<tr class="odd">
<td>Output Mode</td>
<td>The Output mode, if supported.</td>
</tr>
<tr class="even">
<td>Flow Rate</td>
<td>The flow rate to dispense the volume (ml/min).</td>
</tr>
<tr class="odd">
<td>Pulse Length</td>
<td>This is the pulse length to transmit via 315/433 MHz. Default is 189 ms.</td>
</tr>
<tr class="even">
<td>Bit Length</td>
<td>This is the bit length to transmit via 315/433 MHz. Default is 24-bit.</td>
</tr>
<tr class="odd">
<td>Execute as User</td>
<td>Select which user executes Linux Commands.</td>
</tr>
<tr class="even">
<td>On Command</td>
<td>This is the command used to turn the output on. For wireless relays, this is the numerical command to be transmitted, and for command outputs this is the command to be executed. Commands may be for the linux terminal or Python 3 (depending on which output type selected).</td>
</tr>
<tr class="odd">
<td>Off Command</td>
<td>This is the command used to turn the output off. For wireless relays, this is the numerical command to be transmitted, and for command outputs this is the command to be executed. Commands may be for the linux terminal or Python 3 (depending on which output type selected).</td>
</tr>
<tr class="even">
<td>Force Command</td>
<td>If an Output is already on, enabling this option will allow the On command to be executed rather than returning &quot;Output is already On&quot;.</td>
</tr>
<tr class="odd">
<td>PWM Command</td>
<td>This is the command used to set the duty cycle. The string &quot;((duty_cycle))&quot; in the command will be replaced with the actual duty cycle before the command is executed. Ensure &quot;((duty_cycle))&quot; is included in your command for this feature to work correctly. Commands may be for the linux terminal or Python 3 (depending on which output type selected).</td>
</tr>
<tr class="even">
<td>Current Draw (amps)</td>
<td>The is the amount of current the device powered by the output draws. Note: this value should be calculated based on the voltage set in the <a href="#energy-usage-settings">Energy Usage Settings</a>.</td>
</tr>
<tr class="odd">
<td>Startup State</td>
<td>This specifies whether the output should be ON or OFF when mycodo initially starts. Some outputs have an additional options.</td>
</tr>
<tr class="even">
<td>Startup Value</td>
<td>If the Startup State is set to User Set Value (such as for PWM Outputs), then this value will be set when Mycodo starts up.</td>
</tr>
<tr class="odd">
<td>Shutdown State</td>
<td>This specifies whether the output should be ON or OFF when mycodo initially shuts down. Some outputs have an additional options.</td>
</tr>
<tr class="even">
<td>Shutdown Value</td>
<td>If the Shutdown State is set to User Set Value (such as for PWM Outputs), then this value will be set when Mycodo shuts down.</td>
</tr>
<tr class="odd">
<td>Trigger at Startup</td>
<td>Select to enable triggering Functions (such as Output Triggers) when Mycodo starts and if Start State is set to ON.</td>
</tr>
<tr class="even">
<td>Seconds to turn On</td>
<td>This is a way to turn a output on for a specific duration of time. This can be useful for testing the outputs and powered devices or the measured effects a device may have on an environmental condition.</td>
</tr>
</tbody>
</table>
<h2 id="custom-outputs">Custom Outputs</h2>
<p>Note: This is a work in progress!</p>
<p>There is a Custom Output import system in Mycodo that allows user-created Outputs to be created an used in the Mycodo system. Custom Outputs can be uploaded and imported from the <code>Configure -&gt; Outputs</code> page. After import, they will be available to use on the <code>Setup -&gt; Output</code> page.</p>
<p>If you desire an output that is not currently supported by Mycodo, you can build your own output module and import it into Mycodo. All information about an output is contained within the output module, set in the dictionaries 'OUTPUT_INFORMATION' and 'measurements_dict'. Each module will requires at a minimum for these variables to be set in OUTPUT_INFORMATION: 'output_name_unique', 'output_name', and 'measurements_dict'. The measurements_dict dictionary contains the measurements that are acquired and stored, and require both the units and measurements to exist in the measurement/unit database (Add missing measurements/units on the <code>Configure -&gt; Measurements</code> page).</p>
<p>Open any of the built-in modules located in the outputs directory (<a href="https://github.com/kizniche/Mycodo/tree/master/mycodo/outputs/" class="uri">https://github.com/kizniche/Mycodo/tree/master/mycodo/outputs/</a>) for examples of the proper formatting.</p>
<p>There's also a minimal output module template as an example:</p>
<p><a href="https://github.com/kizniche/Mycodo/tree/master/mycodo/outputs/examples/example_dummy_output.py" class="uri">https://github.com/kizniche/Mycodo/tree/master/mycodo/outputs/examples/example_dummy_output.py</a></p>
<h2 id="onoff-gpio">On/Off (GPIO)</h2>
<p>The On/Off (GPIO) output merely turns a GPIO pin High (3.3 volts) or Low (0 volts). This is useful for controlling things like electromechanical switches, such as relays, to turn electrical devices on and off.</p>
<p>Relays are electromechanical or solid-state devices that enable a small voltage signal (such as from a microprocessor) to activate a much larger voltage, without exposing the low-voltage system to the dangers of the higher voltage.</p>
<p>Add and configure outputs in the Output tab. Outputs must be properly set up before PID regulation can be achieved.</p>
<p>To set up a wired relay, set the &quot;GPIO Pin&quot; to the BCM GPIO number of each pin that activates each relay. <em>On Trigger</em> should be set to the signal that activates the relay (the device attached to the relay turns on). If your relay activates when the potential across the coil is 0-volts, set <em>On Trigger</em> to &quot;Low&quot;, otherwise if your relay activates when the potential across the coil is 3.3-volts (or whatever switching voltage you are using, if not being driven by the GPIO pin), set it to &quot;High&quot;.</p>
<h2 id="pwm-gpio">PWM (GPIO)</h2>
<p>Pulse-width modulation (PWM) is a modulation technique used to encode a message into a pulsing signal, at a specific frequency in Hertz (Hz). The average value of voltage (and current) fed to the load is controlled by turning the switch between supply and load on and off at a fast rate. The longer the switch is on compared to the off periods, the higher the total power supplied to the load.</p>
<p>The PWM switching frequency has to be much higher than what would affect the load (the device that uses the power), which is to say that the resultant waveform perceived by the load must be as smooth as possible. The rate (or frequency) at which the power supply must switch can vary greatly depending on load and application, for example</p>
<blockquote>
<p>Switching has to be done several times a minute in an electric stove; 120 Hz in a lamp dimmer; between a few kilohertz (kHz) to tens of kHz for a motor drive; and well into the tens or hundreds of kHz in audio amplifiers and computer power supplies.</p>
</blockquote>
<p>The term duty cycle describes the proportion of 'on' time to the regular interval or 'period' of time; a low duty cycle corresponds to low power, because the power is off for most of the time. Duty cycle is expressed in percent, with 0% being always off, 50% being off for half of the time and on for half of the time, and 100% being always on.</p>
<h2 id="pwm-gpio-options">PWM (GPIO) Options</h2>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Library</td>
<td>Select the method for producing the PWM signal. Hardware pins can produce up to a 30 MHz PWM signal, while any other (non-hardware PWM) pin can produce up to a 40 kHz PWM signal. See the table, below, for the hardware pins on various Pi boards.</td>
</tr>
<tr class="even">
<td>Pin (GPIO)</td>
<td>This is the GPIO pin that will output the PWM signal, using BCM numbering.</td>
</tr>
<tr class="odd">
<td>Frequency (Hertz)</td>
<td>This is frequency of the PWM signal.</td>
</tr>
<tr class="even">
<td>Invert Signal</td>
<td>Send an inverted duty cycle to the output controller.</td>
</tr>
<tr class="odd">
<td>Duty Cycle</td>
<td>This is the proportion of the time on to the time off, expressed in percent (0 -100).</td>
</tr>
</tbody>
</table>
<h3 id="non-hardware-pwm-pins">Non-hardware PWM Pins</h3>
<p>When using non-hardware PWM pins, there are only certain frequencies that can be used. These frequencies in Hertz are 40000, 20000, 10000, 8000, 5000, 4000, 2500, 2000, 1600, 1250, 1000, 800, 500, 400, 250, 200, 100, and 50 Hz. If you attempt to set a frequency that is not listed here, the nearest frequency from this list will be used.</p>
<h3 id="hardware-pwm-pins">Hardware PWM Pins</h3>
<p>The exact frequency may be set when using hardware PWM pins. The same PWM channel is available on multiple GPIO. The latest frequency and duty cycle setting will be used by all GPIO pins which share a PWM channel.</p>
<table>
<colgroup>
<col style="width: 29%"></col>
<col style="width: 29%"></col>
<col style="width: 41%"></col>
</colgroup>
<thead>
<tr class="header">
<th>BCM Pin</th>
<th>PWM Channel</th>
<th>Raspberry Pi Version</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>12</td>
<td>0</td>
<td>All models except A and B</td>
</tr>
<tr class="even">
<td>13</td>
<td>1</td>
<td>All models except A and B</td>
</tr>
<tr class="odd">
<td>18</td>
<td>0</td>
<td>All models</td>
</tr>
<tr class="even">
<td>19</td>
<td>1</td>
<td>All models except A and B</td>
</tr>
<tr class="odd">
<td>40</td>
<td>0</td>
<td>Compute module only</td>
</tr>
<tr class="even">
<td>41</td>
<td>1</td>
<td>Compute module only</td>
</tr>
<tr class="odd">
<td>45</td>
<td>1</td>
<td>Compute module only</td>
</tr>
<tr class="even">
<td>52</td>
<td>0</td>
<td>Compute module only</td>
</tr>
<tr class="odd">
<td>53</td>
<td>1</td>
<td>Compute module only</td>
</tr>
</tbody>
</table>
<h3 id="schematics-for-dc-fan-control">Schematics for DC Fan Control</h3>
<p>Below are hardware schematics that enable controlling direct current (DC) fans from the PWM output from Mycodo.</p>
<p>PWM output controlling a 12-volt DC fan (such as a PC fan)</p>
<p> </p>
<h3 id="schematics-for-ac-modulation">Schematics for AC Modulation</h3>
<p>Below are hardware schematics that enable the modulation of alternating current (AC) from the PWM output from Mycodo.</p>
<p>PWM output modulating alternating current (AC) at 1% duty cycle</p>
<p> </p>
<p>PWM output modulating alternating current (AC) at 50% duty cycle</p>
<p> </p>
<p>PWM output modulating alternating current (AC) at 99% duty cycle</p>
<h2 id="atlas-ezo-pmp-pump">Atlas EZO-PMP Pump</h2>
<p>Currently, only one pump is supported, the Atlas Scientific EZO-PMP peristaltic pump.</p>
<h3 id="atlas-ezo-pmp-pump-options">Atlas EZO-PMP Pump Options</h3>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Output Mode</td>
<td>&quot;Fastest low Rate&quot; will pump liquid at the fastest rate the pump can perform. &quot;Specify Flow Rate&quot; will pump liquid at the rate with the &quot;Flow Rate (ml/min)&quot; option.</td>
</tr>
<tr class="even">
<td>Flow Rate (ml/min)</td>
<td>This is how fast liquid will be pumped if the &quot;Specify Flow Rate&quot; option is selected for the Output Mode option.</td>
</tr>
</tbody>
</table>
<h2 id="wireless-315433-mhz">Wireless 315/433 MHz</h2>
<p>Certain 315/433 MHz wireless relays may be used, however you will need to set the pin of the transmitter (using BCM numbering), pulse length, bit length, protocol, on command, and off command. To determine your On and Off commands, connect a 315/433 MHz receiver to your Pi, then run the receiver script, below, replacing 17 with the pin your receiver is connected to (using BCM numbering), and press one of the buttons on your remote (either on or off) to detect the numeric code associated with that button.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">sudo <span class="op">~/</span>Mycodo<span class="op">/</span>env<span class="op">/</span><span class="bu">bin</span><span class="op">/</span>python <span class="op">~/</span>Mycodo<span class="op">/</span>mycodo<span class="op">/</span>devices<span class="op">/</span>wireless_rpi_rf.py <span class="op">-</span>d <span class="dv">2</span> <span class="op">-</span>g <span class="dv">17</span></code></pre></div>
<p>433 MHz wireless relays have been successfully tested with SMAKN 433MHz RF Transmitters/Receivers and Etekcity Wireless Remote Control Electrical Outlets (see <a href="https://github.com/kizniche/Mycodo/issues/88">Issue 88</a> for more information). If you have a 315/433 MHz transmitter/receiver and a wireless relay that does not work with the current code, submit a <a href="https://github.com/kizniche/Mycodo/issues/new">new issue</a> with details of your hardware.</p>
<h2 id="linux-command">Linux Command</h2>
<p>Another option for output control is to execute a terminal command when the output is turned on, off, or a duty cycle is set. Commands will be executed as the user 'root'. When a Linux Command output is created, example code is provided to demonstrate how to use the output.</p>
<h2 id="python-command">Python Command</h2>
<p>The Python Command output operates similarly to the Linux Command output, however Python 3 code is being executed. When a Python Command output is created, example code is provided to demonstrate how to use the output.</p>
<h2 id="output-notes">Output Notes</h2>
<p>Wireless and Command (Linux/Python) Outputs: Since the wireless protocol only allows 1-way communication to 315/433 MHz devices, wireless relays are assumed to be off until they are turned on, and therefore will appear red (off) when added. If a wireless relay is turned off or on outside Mycodo (by a remote, for instance), Mycodo will <strong>*not</strong>* be able to determine the state of the relay and will indicate whichever state the relay was last. This is, if Mycodo turns the wireless relay on, and a remote is used to turn the relay off, Mycodo will still assume the relay is on.</p>
<h1 id="functions">Functions</h1>
<h2 id="custom-controllers">Custom Controllers</h2>
<p>There is a Custom Controller import system in Mycodo that allows user-created Controllers to be used in the Mycodo system. Custom Controllers can be uploaded on the <code>Configure -&gt; Controllers</code> page. After import, they will be available to use on the <code>Setup -&gt; Function</code> page.</p>
<p>There are also example Custom Controller files in <code>Mycodo/mycodo/controllers/custom_controllers/examples</code></p>
<p>Additionally, I have another github repository devoted to Custom Inputs and Controllers that are not included in the built-in set. These can be found at <a href="https://github.com/kizniche/Mycodo-custom">kizniche/Mycodo-custom</a>.</p>
<h2 id="pid-controller">PID Controller</h2>
<p>A <a href="https://en.wikipedia.org/wiki/PID_controller">proportional-derivative-integral (PID) controller</a> is a control loop feedback mechanism used throughout industry for controlling systems. It efficiently brings a measurable condition, such as the temperature, to a desired state and maintains it there with little overshoot and oscillation. A well-tuned PID controller will raise to the setpoint quickly, have minimal overshoot, and maintain the setpoint with little oscillation.</p>
<p>PID settings may be changed while the PID is activated and the new settings will take effect immediately. If settings are changed while the controller is paused, the values will be used once the controller resumes operation.</p>
<h3 id="pid-controller-options">PID Controller Options</h3>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Activate/Deactivate</td>
<td>Turn a particular PID controller on or off.</td>
</tr>
<tr class="even">
<td>Pause</td>
<td>When paused, the control variable will not be updated and the PID will not turn on the associated outputs. Settings can be changed without losing current PID output values.</td>
</tr>
<tr class="odd">
<td>Hold</td>
<td>When held, the control variable will not be updated but the PID will turn on the associated outputs, Settings can be changed without losing current PID output values.</td>
</tr>
<tr class="even">
<td>Resume</td>
<td>Resume a PID controller from being held or paused.</td>
</tr>
<tr class="odd">
<td>Direction</td>
<td>This is the direction that you wish to regulate. For example, if you only require the temperature to be raised, set this to &quot;Up,&quot; but if you require regulation up and down, set this to &quot;Both.&quot;</td>
</tr>
<tr class="even">
<td>Period</td>
<td>This is the duration between when the PID acquires a measurement, the PID is updated, and the output is modulated.</td>
</tr>
<tr class="odd">
<td>Start Offset (seconds)</td>
<td>Wait this duration before attempting the first calculation/measurement.</td>
</tr>
<tr class="even">
<td>Max Age</td>
<td>The time (in seconds) that the sensor measurement age is required to be less than. If the measurement is not younger than this age, the measurement is thrown out and the PID will not actuate the output. This is a safety measure to ensure the PID is only using recent measurements.</td>
</tr>
<tr class="odd">
<td>Setpoint</td>
<td>This is the specific point you would like the environment to be regulated at. For example, if you would like the humidity regulated to 60%, enter 60.</td>
</tr>
<tr class="even">
<td>Band (+/- Setpoint)</td>
<td>Hysteresis option. If set to a non-0 value, the setpoint will become a band, which will be between the band_max=setpoint+band and band_min=setpoint-band. If Raising, the PID will raise above band_max, then wait until the condition falls below band_min to resume regulation. If Lowering, the PID will lower below band_min, then wait until the condition rises above band_max to resume regulating. If set to Both, regulation will only occur to the outside min and max of the band, and cease when within the band. Set to 0 to disable Hysteresis.</td>
</tr>
<tr class="odd">
<td>Store Lower as Negative</td>
<td>Checking this will store all output variables (PID and output duration/duty cycle) as a negative values in the measurement database. This is useful for displaying graphs that indicate whether the PID is currently lowering or raising. Disable this if you desire all positive values to be stored in the measurement database.</td>
</tr>
<tr class="even">
<td>K<sub>P</sub> Gain</td>
<td>Proportional coefficient (non-negative). Accounts for present values of the error. For example, if the error is large and positive, the control output will also be large and positive.</td>
</tr>
<tr class="odd">
<td>K<sub>I</sub> Gain</td>
<td>Integral coefficient (non-negative). Accounts for past values of the error. For example, if the current output is not sufficiently strong, the integral of the error will accumulate over time, and the controller will respond by applying a stronger action.</td>
</tr>
<tr class="even">
<td>K<sub>D</sub> Gain</td>
<td>Derivative coefficient (non-negative). Accounts for predicted future values of the error, based on its current rate of change.</td>
</tr>
<tr class="odd">
<td>Integrator Min</td>
<td>The minimum allowed integrator value, for calculating Ki_total: (Ki_total = Ki * integrator; and PID output = Kp_total + Ki_total + Kd_total)</td>
</tr>
<tr class="even">
<td>Integrator Max</td>
<td>The maximum allowed integrator value, for calculating Ki_total: (Ki_total = Ki * integrator; and PID output = Kp_total + Ki_total + Kd_total)</td>
</tr>
<tr class="odd">
<td>Output (Raise)</td>
<td>This is the output that will cause the particular environmental condition to rise. In the case of raising the temperature, this may be a heating pad or coil.</td>
</tr>
<tr class="even">
<td>Min Duration (Raise) Min Duty Cycle (Raise)</td>
<td>This is the minimum value that the PID output must be before Output (Lower) turns on. If the PID output is below this value, Duration Outputs will not turn on, and PWM Outputs will be turned off unless Always Min is enabled.</td>
</tr>
<tr class="odd">
<td>Max Duration (Raise) Max Duty Cycle (Raise)</td>
<td>This is the maximum duration or duty cycle the Output (Raise) can be set to. If the PID output exceeds this number, the Max value set here will be used.</td>
</tr>
<tr class="even">
<td>Always Min (Raise)</td>
<td>For PWM Outputs only. If enabled, the duty cycle will never be set below the Min value.</td>
</tr>
<tr class="odd">
<td>Output (Lower)</td>
<td>This is the output that will cause the particular environmental condition to lower. In the case of lowering the CO2, this may be an exhaust fan.</td>
</tr>
<tr class="even">
<td>Min Duration (Lower) Min Duty Cycle (Lower)</td>
<td>This is the minimum value that the PID output must be before Output (Lower) turns on. If the PID output is below this value, Duration Outputs will not turn on, and PWM Outputs will be turned off unless Always Min is enabled.</td>
</tr>
<tr class="odd">
<td>Max Duration (Lower) Max Duty Cycle (Lower)</td>
<td>This is the maximum duration or duty cycle the Output (Raise) can be set to. If the PID output exceeds this number, the Max value set here will be used.</td>
</tr>
<tr class="even">
<td>Always Min (Lower)</td>
<td>For PWM Outputs only. If enabled, the duty cycle will never be set below the Min value.</td>
</tr>
<tr class="odd">
<td>Setpoint Tracking Method</td>
<td>Set a method to change the setpoint over time.</td>
</tr>
</tbody>
</table>
<h3 id="pid-output-calculation">PID Output Calculation</h3>
<p>PID Controllers can output as a duration or a duty cycle.</p>
<p>When outputting a duration, Duration = Control_Variable</p>
<p>When outputting a duty cycle, Duty Cycle = (Control_Variable / Period) * 100</p>
<p>Note: Control_Variable = P_Output + I_Output + D_Output. Duty cycle is limited within the 0 - 100 % range and the set Min Duty Cycle and Max Duty Cycle. Duration is limited by the set Min On Duration and Max On Duration.</p>
<h3 id="pid-tuning">PID Tuning</h3>
<p>PID tuning is a complex process, but not unattainable if enough time and effort is invested to learn how a PID operates. Below is a primer for understanding how a PID controller operates and a few examples of how to tune a PID controller. For further discussion, join the <a href="https://kylegabriel.com/forum/pid-tuning/">Mycodo PID Tuning</a> forum.</p>
<h4 id="pid-control-theory">PID Control Theory</h4>
<p>The PID controller is the most common regulatory controller found in industrial settings, for it&quot;s ability to handle both simple and complex regulation. The PID controller has three paths, the proportional, integral, and derivative.</p>
<p>The <strong>P</strong>roportional takes the error and multiplies it by the constant K<sub>P</sub>, to yield an output value. When the error is large, there will be a large proportional output.</p>
<p>The <strong>I</strong>ntegral takes the error and multiplies it by K<sub>I</sub>, then integrates it (K<sub>I</sub> · 1/s). As the error changes over time, the integral will continually sum it and multiply it by the constant K<sub>I</sub>. The integral is used to remove perpetual error in the control system. If using K<sub>P</sub> alone produces an output that produces a perpetual error (i.e. if the sensor measurement never reaches the Set Point), the integral will increase the output until the error decreases and the Set Point is reached.</p>
<p>The <strong>D</strong>erivative multiplies the error by K<sub>D</sub>, then differentiates it (K<sub>D</sub> · s). When the error rate changes over time, the output signal will change. The faster the change in error, the larger the derivative path becomes, decreasing the output rate of change. This has the effect of dampening overshoot and undershoot (oscillation) of the Set Point.</p>
<p>The K<sub>P</sub>, K<sub>I</sub>, and K<sub>D</sub> gains determine how much each of the P, I, and D variables influence the final PID output value. For instance, the greater the value of the gain, the more influence that variable has on the output.</p>
<p>The output from the PID controller can be used in a number of ways. A simple use is to use this value as the number of seconds an output is turned on during a periodic interval (Period). For instance, if the Period is set to 30 seconds, the PID equation has the desired measurement and the actual measurement used to calculate the PID output every 30 seconds. The more the output is on during this period, the more it will affect the system. For example, an output on for 15 seconds every 30 seconds is at a 50 % duty cycle, and would affect the system roughly half as much as when the output is on for 30 seconds every 30 seconds, or at at 100 % duty cycle. The PID controller will calculate the output based on the amount of error (how far the actual measurement is from the desired measurement). If the error increases or persists, the output increases, causing the output to turn on for a longer duration within the Period, which usually in term causes the measured condition to change and the error to reduce. When the error reduces, the control variable decreases, meaning the output is turned on for a shorter duration of time. The ultimate goal of a well-tuned PID controller is to bring the actual measurement to the desired measurement quickly, with little overshoot, and maintain the setpoint with minimal oscillation.</p>
<hr />
<p>Using temperature as an example, the Process Variable (PV) is the measured temperature, the Setpoint (SP) is the desired temperature, and the Error (e) is the distance between the measured temperature and the desired temperature (indicating if the actual temperature is too hot or too cold and to what degree). The error is manipulated by each of the three PID components, producing an output, called the Manipulated Variable (MV) or Control Variable (CV). To allow control of how much each path contributes to the output value, each path is multiplied by a gain (represented by K<sub>P</sub>, K<sub>I</sub>, and K<sub>D</sub>). By adjusting the gains, the sensitivity of the system to each path is affected. When all three paths are summed, the PID output is produced. If a gain is set to 0, that path does not contribute to the output and that path is essentially turned off.</p>
<p>The output can be used a number of ways, however this controller was designed to use the output to affect the measured value (PV). This feedback loop, with a <em>properly tuned</em> PID controller, can achieve a set point in a short period of time, maintain regulation with little oscillation, and respond quickly to disturbance.</p>
<p>Therefor, if one would be regulating temperature, the sensor would be a temperature sensor and the feedback device(s) would be able to heat and cool. If the temperature is lower than the Set Point, the output value would be positive and a heater would activate. The temperature would rise toward the desired temperature, causing the error to decrease and a lower output to be produced. This feedback loop would continue until the error reaches 0 (at which point the output would be 0). If the temperature continues to rise past the Set Point (this is may be acceptable, depending on the degree), the PID would produce a negative output, which could be used by the cooling device to bring the temperature back down, to reduce the error. If the temperature would normally lower without the aid of a cooling device, then the system can be simplified by omitting a cooler and allowing it to lower on its own.</p>
<p>Implementing a controller that effectively utilizes K<sub>P</sub>, K<sub>I</sub>, and K<sub>D</sub> can be challenging. Furthermore, it is often unnecessary. For instance, the K<sub>I</sub> and K<sub>D</sub> can be set to 0, effectively turning them off and producing the very popular and simple P controller. Also popular is the PI controller. It is recommended to start with only K<sub>P</sub> activated, then experiment with K<sub>P</sub> and K<sub>I</sub>, before finally using all three. Because systems will vary (e.g. airspace volume, degree of insulation, and the degree of impact from the connected device, etc.), each path will need to be adjusted through experimentation to produce an effective output.</p>
<h4 id="quick-setup-examples">Quick Setup Examples</h4>
<p>These example setups are meant to illustrate how to configure regulation in particular directions, and not to achieve ideal values to configure your K<sub>P</sub>, K<sub>I</sub>, and K<sub>D</sub> gains. There are a number of online resources that discuss techniques and methods that have been developed to determine ideal PID values (such as <a href="http://robotics.stackexchange.com/questions/167/what-are-good-strategies-for-tuning-pid-loops">here</a>, <a href="http://innovativecontrols.com/blog/basics-tuning-pid-loops">here</a>, <a href="https://hennulat.wordpress.com/2011/01/12/pid-loop-tuning-101/">here</a>, <a href="http://eas.uccs.edu/wang/ECE4330F12/PID-without-a-PhD.pdf">here</a>, and <a href="http://www.atmel.com/Images/doc2558.pdf">here</a>) and since there are no universal values that will work for every system, it is recommended to conduct your own research to understand the variables and essential to conduct your own experiments to effectively implement them.</p>
<p>Provided merely as an example of the variance of PID values, one of my setups had temperature PID values (up regulation) of K<sub>P</sub> = 30, K<sub>I</sub> = 1.0, and K<sub>D</sub> = 0.5, and humidity PID values (up regulation) of K<sub>P</sub> = 1.0, K<sub>I</sub> = 0.2, and K<sub>D</sub> = 0.5. Furthermore, these values may not have been optimal but they worked well for the conditions of my environmental chamber.</p>
<h4 id="exact-temperature-regulation">Exact Temperature Regulation</h4>
<p>This will set up the system to raise and lower the temperature to a certain level with two regulatory devices (one that heats and one that cools).</p>
<p>Add a sensor, then save the proper device and pin/address for each sensor and activate the sensor.</p>
<p>Add two outputs, then save each GPIO and On Trigger state.</p>
<p>Add a PID, then select the newly-created sensor. Change <em>Setpoint</em> to the desired temperature, <em>Regulate Direction</em> to &quot;Both&quot;. Set <em>Raise Output</em> to the relay attached to the heating device and the <em>Lower Relay</em> to the relay attached to the cooling device.</p>
<p>Set K<sub>P</sub> = 1, K<sub>I</sub> = 0, and K<sub>D</sub> = 0, then activate the PID.</p>
<p>If the temperature is lower than the Set Point, the heater should activate at some interval determined by the PID controller until the temperature rises to the set point. If the temperature goes higher than the Set Point (or Set Point + Buffer), the cooling device will activate until the temperature returns to the set point. If the temperature is not reaching the Set Point after a reasonable amount of time, increase the K<sub>P</sub> value and see how that affects the system. Experiment with different configurations involving only <em>Read Interval</em> and K<sub>P</sub> to achieve a good regulation. Avoid changing the K<sub>I</sub> and K<sub>D</sub> from 0 until a working regulation is achieved with K<sub>P</sub> alone.</p>
<p>View graphs in the 6 to 12 hour time span to identify how well the temperature is regulated to the Setpoint. What is meant by well-regulated will vary, depending on your specific application and tolerances. Most applications of a PID controller would like to see the proper temperature attained within a reasonable amount of time and with little oscillation around the Setpoint.</p>
<p>Once regulation is achieved, experiment by reducing K<sub>P</sub> slightly (~25%) and increasing K<sub>I</sub> by a low amount to start, such as 0.1 (or lower, 0.01), then start the PID and observe how well the controller regulates. Slowly increase K<sub>I</sub> until regulation becomes both quick and with little oscillation. At this point, you should be fairly familiar with experimenting with the system and the K<sub>D</sub> value can be experimented with once both K<sub>P</sub> and K<sub>I</sub> have been tuned.</p>
<h4 id="high-temperature-regulation">High Temperature Regulation</h4>
<p>Often the system can be simplified if two-way regulation is not needed. For instance, if cooling is unnecessary, this can be removed from the system and only up-regulation can be used.</p>
<p>Use the same configuration as the <a href="#exact-temperature-regulation">Exact Temperature Regulation</a> example, except change <em>Regulate Direction</em> to &quot;Raise&quot; and do not touch the &quot;Down Relay&quot; section.</p>
<h3 id="pid-autotune">PID Autotune</h3>
<p>Note: This is an experimental feature. It is best nto used until you are familiar with the operation and tuning of a PID.</p>
<p>The Autotune feature is useful for determining appropriate Kp, Ki, and Kd gains of a PID controller. The autotuner will manipulate an output and measure the response in the environment being measured by a sensor. It will take several cycles to determine the gains according to several rules. In order to use this feature, the PID controller must be properly configured, and a Noise Band and Outstep selected, then select &quot;Start Autotune&quot;. The output of the autotuner will appear in the daemon log (<code>Config -&gt; Mycodo Logs -&gt; Daemon</code>). While the autotune is being performed, it is recommended to create a graph that includes the Input, Output, and PID Setpoint/Output in order to see what the PID Autotuner is doing and to notice any issues. If your autotune is taking a long time to complete, there may not be enough stability in the system being manipulated to calculate a reliable set of PID gains. This may be because there are too many disturbances to the system, or conditions are changing too rapidly to acquire consistent measurement oscillations. If this is the case, try modifying your system to reduce disturbances. Once the autotune successfully completes, disturbances may be reintroduced in order to further tune the PID controller to handle them.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Noise Band</td>
<td>This is the amount above the setpoint the measured condition must reach before the output turns off. This is also how much below the setpoint the measured condition must fall before the output turns back on.</td>
</tr>
<tr class="even">
<td>Outstep</td>
<td>This is how many seconds the output will turn on every PID Period. For instance, to autotune with 50% power, ensure the Outstep is half the value of the PID Period.</td>
</tr>
</tbody>
</table>
<p>Typical graph output will look like this:</p>
<p>And typical Daemon Log output will look like this:</p>
<pre><code>2018-08-04 23:32:20,876 - mycodo.pid_3b533dff - INFO - Activated in 187.2 ms
2018-08-04 23:32:20,877 - mycodo.pid_autotune - INFO - PID Autotune started
2018-08-04 23:33:50,823 - mycodo.pid_autotune - INFO -
2018-08-04 23:33:50,830 - mycodo.pid_autotune - INFO - Cycle: 19
2018-08-04 23:33:50,831 - mycodo.pid_autotune - INFO - switched state: relay step down
2018-08-04 23:33:50,832 - mycodo.pid_autotune - INFO - input: 32.52
2018-08-04 23:36:00,854 - mycodo.pid_autotune - INFO -
2018-08-04 23:36:00,860 - mycodo.pid_autotune - INFO - Cycle: 45
2018-08-04 23:36:00,862 - mycodo.pid_autotune - INFO - found peak: 34.03
2018-08-04 23:36:00,863 - mycodo.pid_autotune - INFO - peak count: 1
2018-08-04 23:37:20,802 - mycodo.pid_autotune - INFO -
2018-08-04 23:37:20,809 - mycodo.pid_autotune - INFO - Cycle: 61
2018-08-04 23:37:20,810 - mycodo.pid_autotune - INFO - switched state: relay step up
2018-08-04 23:37:20,811 - mycodo.pid_autotune - INFO - input: 31.28
2018-08-04 23:38:30,867 - mycodo.pid_autotune - INFO -
2018-08-04 23:38:30,874 - mycodo.pid_autotune - INFO - Cycle: 75
2018-08-04 23:38:30,876 - mycodo.pid_autotune - INFO - found peak: 32.17
2018-08-04 23:38:30,878 - mycodo.pid_autotune - INFO - peak count: 2
2018-08-04 23:38:40,852 - mycodo.pid_autotune - INFO -
2018-08-04 23:38:40,858 - mycodo.pid_autotune - INFO - Cycle: 77
2018-08-04 23:38:40,860 - mycodo.pid_autotune - INFO - switched state: relay step down
2018-08-04 23:38:40,861 - mycodo.pid_autotune - INFO - input: 32.85
2018-08-04 23:40:50,834 - mycodo.pid_autotune - INFO -
2018-08-04 23:40:50,835 - mycodo.pid_autotune - INFO - Cycle: 103
2018-08-04 23:40:50,836 - mycodo.pid_autotune - INFO - found peak: 33.93
2018-08-04 23:40:50,836 - mycodo.pid_autotune - INFO - peak count: 3
2018-08-04 23:42:05,799 - mycodo.pid_autotune - INFO -
2018-08-04 23:42:05,805 - mycodo.pid_autotune - INFO - Cycle: 118
2018-08-04 23:42:05,806 - mycodo.pid_autotune - INFO - switched state: relay step up
2018-08-04 23:42:05,807 - mycodo.pid_autotune - INFO - input: 31.27
2018-08-04 23:43:15,816 - mycodo.pid_autotune - INFO -
2018-08-04 23:43:15,822 - mycodo.pid_autotune - INFO - Cycle: 132
2018-08-04 23:43:15,824 - mycodo.pid_autotune - INFO - found peak: 32.09
2018-08-04 23:43:15,825 - mycodo.pid_autotune - INFO - peak count: 4
2018-08-04 23:43:25,790 - mycodo.pid_autotune - INFO -
2018-08-04 23:43:25,796 - mycodo.pid_autotune - INFO - Cycle: 134
2018-08-04 23:43:25,797 - mycodo.pid_autotune - INFO - switched state: relay step down
2018-08-04 23:43:25,798 - mycodo.pid_autotune - INFO - input: 32.76
2018-08-04 23:45:30,802 - mycodo.pid_autotune - INFO -
2018-08-04 23:45:30,808 - mycodo.pid_autotune - INFO - Cycle: 159
2018-08-04 23:45:30,810 - mycodo.pid_autotune - INFO - found peak: 33.98
2018-08-04 23:45:30,811 - mycodo.pid_autotune - INFO - peak count: 5
2018-08-04 23:45:30,812 - mycodo.pid_autotune - INFO -
2018-08-04 23:45:30,814 - mycodo.pid_autotune - INFO - amplitude: 0.9099999999999989
2018-08-04 23:45:30,815 - mycodo.pid_autotune - INFO - amplitude deviation: 0.06593406593406595
2018-08-04 23:46:40,851 - mycodo.pid_autotune - INFO -
2018-08-04 23:46:40,857 - mycodo.pid_autotune - INFO - Cycle: 173
2018-08-04 23:46:40,858 - mycodo.pid_autotune - INFO - switched state: relay step up
2018-08-04 23:46:40,859 - mycodo.pid_autotune - INFO - input: 31.37
2018-08-04 23:47:55,860 - mycodo.pid_autotune - INFO -
2018-08-04 23:47:55,866 - mycodo.pid_autotune - INFO - Cycle: 188
2018-08-04 23:47:55,868 - mycodo.pid_autotune - INFO - found peak: 32.36
2018-08-04 23:47:55,869 - mycodo.pid_autotune - INFO - peak count: 6
2018-08-04 23:47:55,870 - mycodo.pid_autotune - INFO -
2018-08-04 23:47:55,871 - mycodo.pid_autotune - INFO - amplitude: 0.9149999999999979
2018-08-04 23:47:55,872 - mycodo.pid_autotune - INFO - amplitude deviation: 0.032786885245900406
2018-08-04 23:47:55,873 - mycodo.pid_3b533dff - INFO - time:  16 min
2018-08-04 23:47:55,874 - mycodo.pid_3b533dff - INFO - state: succeeded
2018-08-04 23:47:55,874 - mycodo.pid_3b533dff - INFO -
2018-08-04 23:47:55,875 - mycodo.pid_3b533dff - INFO - rule: ziegler-nichols
2018-08-04 23:47:55,876 - mycodo.pid_3b533dff - INFO - Kp: 0.40927018474290117
2018-08-04 23:47:55,877 - mycodo.pid_3b533dff - INFO - Ki: 0.05846588600007114
2018-08-04 23:47:55,879 - mycodo.pid_3b533dff - INFO - Kd: 0.7162385434443115
2018-08-04 23:47:55,880 - mycodo.pid_3b533dff - INFO -
2018-08-04 23:47:55,881 - mycodo.pid_3b533dff - INFO - rule: tyreus-luyben
2018-08-04 23:47:55,887 - mycodo.pid_3b533dff - INFO - Kp: 0.3162542336649691
2018-08-04 23:47:55,889 - mycodo.pid_3b533dff - INFO - Ki: 0.010165091543194185
2018-08-04 23:47:55,890 - mycodo.pid_3b533dff - INFO - Kd: 0.7028026111719073
2018-08-04 23:47:55,891 - mycodo.pid_3b533dff - INFO -
2018-08-04 23:47:55,892 - mycodo.pid_3b533dff - INFO - rule: ciancone-marlin
2018-08-04 23:47:55,892 - mycodo.pid_3b533dff - INFO - Kp: 0.21083615577664605
2018-08-04 23:47:55,893 - mycodo.pid_3b533dff - INFO - Ki: 0.06626133746674728
2018-08-04 23:47:55,893 - mycodo.pid_3b533dff - INFO - Kd: 0.3644161687558038
2018-08-04 23:47:55,894 - mycodo.pid_3b533dff - INFO -
2018-08-04 23:47:55,894 - mycodo.pid_3b533dff - INFO - rule: pessen-integral
2018-08-04 23:47:55,895 - mycodo.pid_3b533dff - INFO - Kp: 0.49697093861638
2018-08-04 23:47:55,895 - mycodo.pid_3b533dff - INFO - Ki: 0.0887428626786794
2018-08-04 23:47:55,896 - mycodo.pid_3b533dff - INFO - Kd: 1.04627757151908
2018-08-04 23:47:55,896 - mycodo.pid_3b533dff - INFO -
2018-08-04 23:47:55,897 - mycodo.pid_3b533dff - INFO - rule: some-overshoot
2018-08-04 23:47:55,898 - mycodo.pid_3b533dff - INFO - Kp: 0.23191977135431066
2018-08-04 23:47:55,898 - mycodo.pid_3b533dff - INFO - Ki: 0.03313066873337365
2018-08-04 23:47:55,899 - mycodo.pid_3b533dff - INFO - Kd: 1.0823160212047374
2018-08-04 23:47:55,899 - mycodo.pid_3b533dff - INFO -
2018-08-04 23:47:55,900 - mycodo.pid_3b533dff - INFO - rule: no-overshoot
2018-08-04 23:47:55,900 - mycodo.pid_3b533dff - INFO - Kp: 0.1391518628125864
2018-08-04 23:47:55,901 - mycodo.pid_3b533dff - INFO - Ki: 0.01987840124002419
2018-08-04 23:47:55,901 - mycodo.pid_3b533dff - INFO - Kd: 0.6493896127228425
2018-08-04 23:47:55,902 - mycodo.pid_3b533dff - INFO -
2018-08-04 23:47:55,902 - mycodo.pid_3b533dff - INFO - rule: brewing
2018-08-04 23:47:55,903 - mycodo.pid_3b533dff - INFO - Kp: 5.566074512503456
2018-08-04 23:47:55,904 - mycodo.pid_3b533dff - INFO - Ki: 0.11927040744014512
2018-08-04 23:47:55,904 - mycodo.pid_3b533dff - INFO - Kd: 4.101408080354794</code></pre>
<h2 id="conditional">Conditional</h2>
<p>Conditional controllers are used to perform certain actions based on whether a conditional statement is true, which is typically based on a measurement or GPIO state.</p>
<h3 id="conditional-options">Conditional Options</h3>
<p>Check if the latest measurement is above or below the set value.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Conditional Statement</td>
<td>The text string that includes device IDs enclosed in curly brackets ({}) that will be converted to the actual measurement before being evaluated by python to determine if it is True or False. If True, the associated actions will be executed.</td>
</tr>
<tr class="even">
<td>Period (seconds)</td>
<td>The period (seconds) between conditional checks.</td>
</tr>
<tr class="odd">
<td>Start Offset (seconds)</td>
<td>The duration (seconds) to wait before executing the Conditional for the first after it is activated.</td>
</tr>
<tr class="even">
<td>Log Level: Debug</td>
<td>Show debug lines in the daemon log.</td>
</tr>
<tr class="odd">
<td>Message Includes Code</td>
<td>Include Conditional Statement code in the message that is passed to actions.</td>
</tr>
</tbody>
</table>
<p>Conditions are variables that can be used within the Conditional Statement.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Condition</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Measurement (Single, Last)</td>
<td>Acquires the latest measurement from an Input or device. Set Max Age (seconds) to restrict how long to accept values. If the latest value is older than this duration, &quot;None&quot; is returned.</td>
</tr>
<tr class="even">
<td>Measurement (Single, Past, Average)</td>
<td>Acquires the past measurements from an Input or device, then averages them. Set Max Age (seconds) to restrict how long to accept values. If all values are older than this duration, &quot;None&quot; is returned.</td>
</tr>
<tr class="odd">
<td>Measurement (Single, Past, Sum)</td>
<td>Acquires the past measurements from an Input or device, then sums them. Set Max Age (seconds) to restrict how long to accept values. If all values are older than this duration, &quot;None&quot; is returned.</td>
</tr>
<tr class="even">
<td>Measurement (Multiple, Past)</td>
<td>Acquires the past measurements from an Input or device. Set Max Age (seconds) to restrict how long to accept values. If no values are found in this duration, &quot;None&quot; is returned. This differs from the &quot;Measurement (Single)&quot; Condition because it returns a list of dictionaries with 'time' and 'value' key pairs.</td>
</tr>
<tr class="odd">
<td>GPIO State</td>
<td>Acquires the current GPIO state and returns 1 if HIGH or 0 if LOW. If the latest value is older than this duration, &quot;None&quot; is returned.</td>
</tr>
<tr class="even">
<td>Output State</td>
<td>Returns 'on' if the output is currently on, and 'off' if it's currently off.</td>
</tr>
<tr class="odd">
<td>Output Duration On</td>
<td>Returns how long the output has currently been on, in seconds. Returns 0 if off.</td>
</tr>
<tr class="even">
<td>Controller Running</td>
<td>Returns True if the controller is active, False if inactive.</td>
</tr>
<tr class="odd">
<td>Max Age (seconds)</td>
<td>The minimum age (seconds) the measurement can be. If the last measurement is older than this, &quot;None&quot; will be returned instead of a measurement.</td>
</tr>
</tbody>
</table>
<h3 id="conditional-setup-guide">Conditional Setup Guide</h3>
<p>Python 3 is the environment that these conditionals will be executed. The following functions can be used within your code.</p>
<p>Note: Indentation must use 4 spaces (not 2 spaces, tabs, or other).</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>self.condition(&quot;{ID}&quot;)</td>
<td>Returns a measurement for the Condition with ID.</td>
</tr>
<tr class="even">
<td>self.condition_dict(&quot;{ID }&quot;)</td>
<td>Returns a dictionary of measurement for the Condition with ID.</td>
</tr>
<tr class="odd">
<td>self.run_action(&quot;{ID}&quot;)</td>
<td>Executes the Action with ID.</td>
</tr>
<tr class="even">
<td>self.run_all_actions()</td>
<td>Executes all actions.</td>
</tr>
<tr class="odd">
<td>self.logger.info()</td>
<td>Writes a log line to the daemon log. 'info' may also be changed to 'error' or 'debug'.</td>
</tr>
</tbody>
</table>
<p>There are additional functions that can be used, but these must use the full UUID (not an abridged version as the functions above). See /home/pi/Mycodo/mycodo/mycodo_client.py for the functions available for use. These may be accessed via the 'control' object. An example, below, will return how long the output has been on (or 0 if it's currently off):</p>
<p><code>output_on_seconds = control.output_sec_currently_on('1b6ada50-1e69-403a-9fa6-ec748b16dc23')</code></p>
<p>Since the Python code contained in the Conditional Statement must be formatted properly, it's best to familiarize yourself with the <a href="https://realpython.com/python-conditional-statements/">basics of Python</a>.</p>
<p>Note that there are two different IDs in use here, one set of IDs are for the measurements, under the <code>Conditions</code> section of the Conditional, and one set of IDs are for the Actions, under the <code>Actions</code> section of the Conditional. Read all of this section, including the examples, below, to fully understand how to configure a conditional properly.</p>
<p>IMPORTANT: If a measurement hasn't been acquired within the Max Age that is set, &quot;None&quot; will be returned when self.condition(&quot;{ID}&quot;) is called in the code. It is very important that you account for this. All examples below incorporate a test for the measurement being None, and this should not be removed. If an error occurs (such as if the statement resolves to comparing None to a numerical value, such as &quot;if None &lt; 23&quot;), then the code will stop there and an error will be logged in the daemon log. Accounting for None is useful for determining if an Input is no longer acquiring measurements (e.g. dead sensor, malfunction, etc.).</p>
<p>To create a basic conditional, follow these steps, using the numbers in the screenshots, below, that correspond to the numbers in parentheses:</p>
<ul>
<li>Navigate to the <code>Setup -&gt; Function</code> page.</li>
<li>Select &quot;Controller: Conditional&quot;, then click <code>Add</code>.</li>
<li>Under Conditions (1), select a condition option, then click <code>Add Condition</code>.</li>
<li>Configure the newly-added Condition then click <code>Save</code>.</li>
<li>Under Actions (2), select an action option, then click <code>Add Action</code>.</li>
<li>Configure the newly-added Action then click <code>Save</code>.</li>
<li>Notice that each Condition and each Action has its own ID (underlined).</li>
<li>The default Conditional Statement (3) contains placeholder IDs that need to be changed to your Condition and Action IDs. Change the ID in self.condition(&quot;{asdf1234}&quot;) to your Condition ID. Change the ID in self.run_action(&quot;{qwer5678}&quot;, message=message) to your Action ID. Click <code>Save</code> at the top of the Conditional.</li>
<li>The logic used in the Conditional Statement will need to be adjusted to suit your particular needs. Additionally, you may add more Conditions or Actions. See the <code>Advanced Conditional Statement examples</code>, below, for usage examples.</li>
</ul>
<p>If your <code>Conditional Statement</code> has been formatted correctly, your Conditional will save and it will be ready to activate. If an error is returned, your options will not have been saved. Inspect the error for which line is causing the issue and read the error message itself to try to understand what the problem is and how to fix it. There are an unfathomable number of ways to configure a Conditional, but this should hopefully get you started to developing one that suits your needs.</p>
<p>Note: Mycodo is constantly changing, so the screenshots below may not match what you see exactly. Be sure to read this entire section of the manual to understand how to use Conditionals.</p>
<p>Simple <code>Conditional Statement</code> examples:</p>
<p>Each self.condition(&quot;{ID}&quot;) will return the most recent measurement obtained from that particular measurement under the <code>Conditions</code> section of the Conditional, as long as it's within the set Max Age.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Example 1, no measurement, useful to notify by email when an Input stops working</span>
<span class="cf">if</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>) <span class="kw">is</span> <span class="va">None</span>:
    <span class="va">self</span>.run_all_actions()

<span class="co"># Example 2, test two measurements</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="cf">if</span> measure_1 <span class="op">&lt;</span> <span class="dv">20</span> <span class="kw">and</span> measure_2 <span class="op">&gt;</span> <span class="dv">10</span>:
        <span class="va">self</span>.run_all_actions()

<span class="co"># Example 3, test two measurements and sum of measurements</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="bu">sum</span> <span class="op">=</span> measure_1 <span class="op">+</span> measure_2
    <span class="cf">if</span> measure_1 <span class="op">&gt;</span> <span class="dv">2</span> <span class="kw">and</span> <span class="dv">10</span> <span class="op">&lt;</span> measure_2 <span class="op">&lt;</span> <span class="dv">23</span> <span class="kw">and</span> <span class="bu">sum</span> <span class="op">&lt;</span> <span class="fl">30.5</span>:
        <span class="va">self</span>.run_all_actions()

<span class="co"># Example 4, combine into one conditional</span>
measurement <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
<span class="cf">if</span> measurement <span class="op">!=</span> <span class="va">None</span> <span class="kw">and</span> <span class="dv">20</span> <span class="op">&lt;</span> measurement <span class="op">&lt;</span> <span class="dv">30</span>:
    <span class="va">self</span>.run_all_actions()

<span class="co"># Example 5, test two measurements and convert Edge Input from 0 or 1 to True or False</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="cf">if</span> <span class="bu">bool</span>(measure_1) <span class="kw">and</span> measure_2 <span class="op">&gt;</span> <span class="dv">10</span>:
        <span class="va">self</span>.run_all_actions()

<span class="co"># Example 6, test measurement with &quot;or&quot; and a rounded measurement</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="cf">if</span> measure_1 <span class="op">&gt;</span> <span class="dv">20</span> <span class="kw">or</span> <span class="bu">int</span>(<span class="bu">round</span>(measure_2)) <span class="kw">in</span> [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>]:
        <span class="va">self</span>.run_all_actions()

<span class="co"># Example 7, use self to store variables</span>
measurement <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="kw">not</span> <span class="bu">hasattr</span>(<span class="va">self</span>, <span class="st">&quot;stored_measurement&quot;</span>):  <span class="co"># Initialize variable</span>
    <span class="va">self</span>.stored_measurement <span class="op">=</span> measurement
<span class="cf">if</span> measurement <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:
    <span class="cf">if</span> <span class="bu">abs</span>(measurement <span class="op">-</span> <span class="va">self</span>.stored_measurement) <span class="op">&gt;</span> <span class="dv">10</span>:
        <span class="va">self</span>.run_all_actions()  <span class="co"># if difference is greater than 10</span>
    <span class="va">self</span>.stored_measurement <span class="op">=</span> measurement  <span class="co"># Store measurement</span></code></pre></div>
<p>&quot;Measurement (Multiple)&quot; is useful if you need to check if a particular value has been stored in any of the past measurements (within the set Max Age), not just the last measurement. This is useful if you have an alert system that each numerical value represents a different alert that you need to check each past value if it occurred. Here is an example that retrieves all measurements from the past 30 minutes and checks if each measurement value is equal to &quot;119&quot;. If &quot;119&quot; exists, the Actions are executed and <code>break</code> is used to exit the <code>for</code> loop. each_measure['time'] may also be used to retrieve the timestamp for the particular measurement.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Example 1, find a particular measurement in the past 30 minutes (set Max Age to 1800 seconds)</span>
measurements <span class="op">=</span> <span class="va">self</span>.condition_dict(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
<span class="cf">if</span> measurements:
    <span class="cf">for</span> each_measure <span class="kw">in</span> measurements:
        <span class="cf">if</span> each_measure[<span class="st">'value'</span>] <span class="op">==</span> <span class="dv">119</span>:
            <span class="va">self</span>.run_all_actions()
            <span class="cf">break</span></code></pre></div>
<p>Advanced <code>Conditional Statement</code> examples:</p>
<p>These examples expand on the simple examples, above, by activating specific actions. The following examples will reference actions with IDs that can be found under the <code>Actions</code> section of the Conditional. Two example action ID will be used: &quot;qwer1234&quot; and &quot;uiop5678&quot;. Additionally, self.run_all_actions() is used here, which will run all actions in the order in which they appear in the Actions section of the Conditional.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Example 1</span>
measurement <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
<span class="cf">if</span> measurement <span class="kw">is</span> <span class="va">None</span>:
    <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{qwer1234}</span><span class="st">&quot;</span>)
<span class="cf">elif</span> measurement <span class="op">&gt;</span> <span class="dv">23</span>:
    <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{uiop5678}</span><span class="st">&quot;</span>)
<span class="cf">else</span>:
    <span class="va">self</span>.run_all_actions()

<span class="co"># Example 2, test two measurements</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="cf">if</span> measure_1 <span class="op">&lt;</span> <span class="dv">20</span> <span class="kw">and</span> measure_2 <span class="op">&gt;</span> <span class="dv">10</span>:
        <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{qwer1234}</span><span class="st">&quot;</span>)
        <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{uiop5678}</span><span class="st">&quot;</span>)

<span class="co"># Example 3, test two measurements and sum of measurements</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="bu">sum</span> <span class="op">=</span> measure_1 <span class="op">+</span> measure_2
    <span class="cf">if</span> measure_1 <span class="op">&gt;</span> <span class="dv">2</span> <span class="kw">and</span> <span class="dv">10</span> <span class="op">&lt;</span> measure_2 <span class="op">&lt;</span> <span class="dv">23</span> <span class="kw">and</span> <span class="bu">sum</span> <span class="op">&lt;</span> <span class="fl">30.5</span>:
        <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{qwer1234}</span><span class="st">&quot;</span>)
    <span class="cf">else</span>:
        <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{uiop5678}</span><span class="st">&quot;</span>)

<span class="co"># Example 4, combine into one conditional</span>
measurement <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
<span class="cf">if</span> measurement <span class="op">!=</span> <span class="va">None</span> <span class="kw">and</span> <span class="dv">20</span> <span class="op">&lt;</span> measurement <span class="op">&lt;</span> <span class="dv">30</span>:
    <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{uiop5678}</span><span class="st">&quot;</span>)

<span class="co"># Example 5, test two measurements and convert Edge Input from 0 or 1 to True or False</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.condition(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="cf">if</span> <span class="bu">bool</span>(measure_1) <span class="kw">and</span> measure_2 <span class="op">&gt;</span> <span class="dv">10</span>:
        <span class="va">self</span>.run_all_actions()

<span class="co"># Example 6, test measurement with &quot;or&quot; and a rounded measurement</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.measure(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.measure(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="cf">if</span> measure_1 <span class="op">&gt;</span> <span class="dv">20</span> <span class="kw">or</span> <span class="bu">int</span>(<span class="bu">round</span>(measure_2)) <span class="kw">in</span> [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>]:
        <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{qwer1234}</span><span class="st">&quot;</span>)
        <span class="cf">if</span> measure_1 <span class="op">&gt;</span> <span class="dv">30</span>:
            <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{uiop5678}</span><span class="st">&quot;</span>)</code></pre></div>
<p>If your action is a type that receives a message (E-Mail or Note), you can modify this message to include extra information before it is added to the Note or E-Mail. To do this, append a string to the variable <code>self.message</code> and add this to the <code>message</code> parameter of self.run_action() or self.run_all_actions(). Below are some examples. Note the use of &quot;+=&quot; instead of &quot;=&quot;, which appends the string to the variable <code>self.message</code>.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Example 1</span>
measurement <span class="op">=</span> <span class="va">self</span>.measure(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
<span class="cf">if</span> measurement <span class="kw">is</span> <span class="va">None</span> <span class="kw">and</span> measurement <span class="op">&gt;</span> <span class="dv">23</span>:
    <span class="va">self</span>.message <span class="op">+=</span> <span class="st">&quot;Measurement was </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(measurement)
    <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{uiop5678}</span><span class="st">&quot;</span>, message<span class="op">=</span><span class="va">self</span>.message)

<span class="co"># Example 2</span>
measure_1 <span class="op">=</span> <span class="va">self</span>.measure(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
measure_2 <span class="op">=</span> <span class="va">self</span>.measure(<span class="st">&quot;</span><span class="sc">{hjkl5678}</span><span class="st">&quot;</span>)
<span class="cf">if</span> <span class="va">None</span> <span class="kw">not</span> <span class="kw">in</span> [measure_1, measure_2]:
    <span class="cf">if</span> measure_1 <span class="op">&lt;</span> <span class="dv">20</span> <span class="kw">and</span> measure_2 <span class="op">&gt;</span> <span class="dv">10</span>:
        <span class="va">self</span>.message <span class="op">+=</span> <span class="st">&quot;Measurement 1: </span><span class="sc">{m1}</span><span class="st">, Measurement 2: </span><span class="sc">{m2}</span><span class="st">&quot;</span>.<span class="bu">format</span>(m1<span class="op">=</span>measure_1, m2<span class="op">=</span>measure_2)
        <span class="va">self</span>.run_all_actions(message<span class="op">=</span><span class="va">self</span>.message)</code></pre></div>
<p>Logging can also be used to log messages to the daemon log using <code>self.logger</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Example 1</span>
measurement <span class="op">=</span> <span class="va">self</span>.measure(<span class="st">&quot;</span><span class="sc">{asdf1234}</span><span class="st">&quot;</span>)
<span class="cf">if</span> measurement <span class="kw">is</span> <span class="va">None</span> <span class="kw">and</span> measurement <span class="op">&gt;</span> <span class="dv">23</span>:
    <span class="va">self</span>.logging.error(<span class="st">&quot;Warning, measurement was </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(measurement))
    <span class="va">self</span>.message <span class="op">+=</span> <span class="st">&quot;Measurement was </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(measurement)
    <span class="va">self</span>.run_action(<span class="st">&quot;</span><span class="sc">{uiop5678}</span><span class="st">&quot;</span>, message<span class="op">=</span><span class="va">self</span>.message)</code></pre></div>
<p>Before activating any conditionals, it's advised to thoroughly explore all possible scenarios and plan a configuration that eliminates conflicts. Some devices or outputs may respond atypically or fail when switched on and off in rapid succession. Therefore, trial run your configuration before connecting devices to any outputs.</p>
<h2 id="trigger">Trigger</h2>
<p>A Trigger Controller will execute actions when events are triggered, such as an output turning on or off, a GPIO pin changing it's voltage state, or timed events, including various timers (duration, time period, time point, etc), or the sunrise or sunset time at a specific latitude and longitude. One the trigger is defined, add any number of <a href="#function-actions">Actions</a> to be executed when that event is triggered.</p>
<h3 id="output-onoff-options">Output (On/Off) Options</h3>
<p>Monitor the state of an output.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>If Output</td>
<td>The Output to monitor for a change of state.</td>
</tr>
<tr class="even">
<td>If State</td>
<td>If the state of the output changes to On or Off the conditional will trigger. If &quot;On (any duration) is selected, th trigger will occur no matter how long the output turns on for, whereas if only &quot;On&quot; is selected, the conditional will trigger only when the output turns on for a duration of time equal to the set &quot;Duration (seconds)&quot;.</td>
</tr>
<tr class="odd">
<td>If Duration (seconds)</td>
<td>If &quot;On&quot; is selected, an optional duration (seconds) may be set that will trigger the conditional only if the Output is turned on for this specific duration.</td>
</tr>
</tbody>
</table>
<h3 id="output-pwm-options">Output (PWM) Options</h3>
<p>Monitor the state of a PWM output.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>If Output</td>
<td>The Output to monitor for a change of state.</td>
</tr>
<tr class="even">
<td>If State</td>
<td>If the duty cycle of the output is greater than,less than, or equal to the set value, trigger the Conditional Actions.</td>
</tr>
<tr class="odd">
<td>If Duty Cycle (%)</td>
<td>The duty cycle for the Output to be checked against.</td>
</tr>
</tbody>
</table>
<h3 id="edge-options">Edge Options</h3>
<p>Monitor the state of a pin for a rising and/or falling edge.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>If Edge Detected</td>
<td>The conditional will be triggered if a change in state is detected, either Rising when the state changes from LOW (0 volts) to HIGH (3.5 volts) or Falling when the state changes from HIGH (3.3 volts) to LOW (0 volts), or Both (Rising and Falling).</td>
</tr>
</tbody>
</table>
<h3 id="run-pwm-method-options">Run PWM Method Options</h3>
<p>Select a Duration Method and this will set the selected PWM Output to the duty cycle specified by the method.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Duration Method</td>
<td>Select which Method to use.</td>
</tr>
<tr class="even">
<td>PWM Output</td>
<td>Select which PWM Output to use.</td>
</tr>
<tr class="odd">
<td>Period (seconds)</td>
<td>Select the interval of time to calculate the duty cycle, then apply to the PWM Output.</td>
</tr>
<tr class="even">
<td>Trigger Every Period</td>
<td>Trigger Conditional Actions every period.</td>
</tr>
<tr class="odd">
<td>Trigger when Activated</td>
<td>Trigger Conditional Actions when the Conditional is activated.</td>
</tr>
</tbody>
</table>
<h3 id="infrared-remote-input-options">Infrared Remote Input Options</h3>
<p>Mycodo uses lirc to detect Infrared signals. Follow the <a href="#infrared-remote">lirc setup guide</a> before using this feature.</p>
<p>Note: Raspbian Buster broke this feature. Work is in progress to restore functionality.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Program</td>
<td>This is the variable 'program' in ~/.lircrc</td>
</tr>
<tr class="even">
<td>Word</td>
<td>This is the variable 'config' in ~/.lircrc</td>
</tr>
</tbody>
</table>
<h3 id="sunrisesunset-options">Sunrise/Sunset Options</h3>
<p>Trigger events at sunrise or sunset (or a time offset of those), based on latitude and longitude.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Rise or Set</td>
<td>Select which to trigger the conditional, at sunrise or sunset.</td>
</tr>
<tr class="even">
<td>Latitude (decimal)</td>
<td>Latitude of the sunrise/sunset, using decimal format.</td>
</tr>
<tr class="odd">
<td>Longitude (decimal)</td>
<td>Longitude of the sunrise/sunset, using decimal format.</td>
</tr>
<tr class="even">
<td>Zenith</td>
<td>The Zenith angle of the sun.</td>
</tr>
<tr class="odd">
<td>Date Offset (days)</td>
<td>Set a sunrise/sunset offset in days (positive or negative).</td>
</tr>
<tr class="even">
<td>Time Offset (minutes)</td>
<td>Set a sunrise/sunset offset in minutes (positive or negative).</td>
</tr>
</tbody>
</table>
<h3 id="timer-duration-options">Timer (Duration) Options</h3>
<p>Run a timer that triggers Conditional Actions every period.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Period (seconds)</td>
<td>The period of time between triggering Conditional Actions.</td>
</tr>
<tr class="even">
<td>Start Offset (seconds)</td>
<td>Set this to start the first trigger a number of seconds after the Conditional is activated.</td>
</tr>
</tbody>
</table>
<h3 id="timer-daily-time-point-options">Timer (Daily Time Point) Options</h3>
<p>Run a timer that triggers Conditional Actions at a specific time every day.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Start Time (HH:MM)</td>
<td>Set the time to trigger Conditional Actions, in the format &quot;HH:MM&quot;, with HH denoting hours, and MM denoting minutes. Time is in 24-hour format.</td>
</tr>
</tbody>
</table>
<h3 id="timer-daily-time-span-options">Timer (Daily Time Span) Options</h3>
<p>Run a timer that triggers Conditional Actions at a specific period if it's between the set start and end times. For example, if the Start Time is set to 10:00 and End Time set to 11:00 and Period set to 120 seconds, the Conditional Actions will trigger every 120 seconds when the time is between 10 AM and 11 AM.</p>
<p>This may be useful, for instance, if you desire an Output to remain on during a particular time period and you want to prevent power outages from interrupting the cycle (which a simple Time Point Timer could not prevent against because it only triggers once at the Start Time). By setting an Output to turn the lights on every few minutes during the Start -&gt; End period, it ensured the Output remains on during this period.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Start Time (HH:MM)</td>
<td>Set the start time to trigger Conditional Actions, in the format &quot;HH:MM&quot;, with HH denoting hours, and MM denoting minutes. Time is in 24-hour format.</td>
</tr>
<tr class="even">
<td>End Time (HH:MM)</td>
<td>Set the end time to trigger Conditional Actions, in the format &quot;HH:MM&quot;, with HH denoting hours, and MM denoting minutes. Time is in 24-hour format.</td>
</tr>
<tr class="odd">
<td>Period (seconds)</td>
<td>The period of time between triggering Conditional Actions.</td>
</tr>
</tbody>
</table>
<h2 id="function-actions">Function Actions</h2>
<p>These are the actions that can be added to Function controllers (i.e. Conditional, Trigger).</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Actions: Pause</td>
<td>Pause executing actions for a duration of time (seconds).</td>
</tr>
<tr class="even">
<td>Camera: Capture Photo</td>
<td>Capture a photo with the selected camera.</td>
</tr>
<tr class="odd">
<td>Create Note</td>
<td>Create a note containing the conditional statement and actions, using a particular tag.</td>
</tr>
<tr class="even">
<td>Controller: Activate</td>
<td>Activate a particular controller.</td>
</tr>
<tr class="odd">
<td>Controller: Deactivate</td>
<td>Deactivate a particular controller.</td>
</tr>
<tr class="even">
<td>E-Mail</td>
<td>Send an email containing the conditional statement and actions.</td>
</tr>
<tr class="odd">
<td>E-Mail with Photo Attachment</td>
<td>Send an email containing the conditional statement, actions, and captured photo.</td>
</tr>
<tr class="even">
<td>E-Mail with Video Attachment</td>
<td>Send an email containing the conditional statement, actions, and captured video.</td>
</tr>
<tr class="odd">
<td>Execute Command</td>
<td>Execute a command in the linux shell (as user 'root').</td>
</tr>
<tr class="even">
<td>Infrared Remote Send</td>
<td>Send an infrared signal. See <a href="#infrared-remote">Infrared Remote</a> for details.</td>
</tr>
<tr class="odd">
<td>LCD: Backlight</td>
<td>Turn the LCD backlight on or off. Note: Only some LCDs are supported.</td>
</tr>
<tr class="even">
<td>LCD: Flash</td>
<td>Start of stop the LCD flashing to indicate an alert. Note: Only some LCDs are supported.</td>
</tr>
<tr class="odd">
<td>Output: Duration</td>
<td>Turn a output on, off, or on for a duration of time.</td>
</tr>
<tr class="even">
<td>Output: Duty Cycle</td>
<td>Turn a PWM output off or on for a duty cycle.</td>
</tr>
<tr class="odd">
<td>PID: Pause</td>
<td>Pause a particular PID controller.</td>
</tr>
<tr class="even">
<td>PID: Hold</td>
<td>Hold a particular PID controller.</td>
</tr>
<tr class="odd">
<td>PID: Resume</td>
<td>Resume a particular PID controller.</td>
</tr>
<tr class="even">
<td>PID: Set Method</td>
<td>Set the Method of a particular PID controller.</td>
</tr>
<tr class="odd">
<td>PID: Set Setpoint</td>
<td>Set the Setpoint of a particular PID controller.</td>
</tr>
<tr class="even">
<td>System: Restart</td>
<td>Restart the System.</td>
</tr>
<tr class="odd">
<td>System: Shutdown</td>
<td>Shutdown the System.</td>
</tr>
</tbody>
</table>
<h1 id="methods">Methods</h1>
<p><code>Setup -&gt; Method</code></p>
<p>Methods enable Setpoint Tracking in PIDs and time-based duty cycle changes in timers. Normally, a PID controller will regulate an environmental condition to a specific setpoint. If you would like the setpoint to change over time, this is called setpoint tracking. Setpoint Tracking is useful for applications such as reflow ovens, thermal cyclers (DNA replication), mimicking natural daily cycles, and more. Methods may also be used to change a duty cycle over time when used with a Run PWM Method Conditional.</p>
<h2 id="method-options">Method Options</h2>
<p>These options are shared with several method types.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Start Time/Date</td>
<td>This is the start time of a range of time.</td>
</tr>
<tr class="even">
<td>End Time/Date</td>
<td>This is the end time of a range of time.</td>
</tr>
<tr class="odd">
<td>Start Setpoint</td>
<td>This is the start setpoint of a range of setpoints.</td>
</tr>
<tr class="even">
<td>End Setpoint</td>
<td>This is the end setpoint of a range of setpoints.</td>
</tr>
</tbody>
</table>
<h2 id="timedate-method">Time/Date Method</h2>
<p>A time/date method allows a specific time/date span to dictate the setpoint. This is useful for long-running methods, that may take place over the period of days, weeks, or months.</p>
<h2 id="duration-method">Duration Method</h2>
<p>A Duration Method allows a <strong>*Setpoint</strong>* (for PIDs) or <strong>*Duty Cycle</strong>* (for Conditional) to be set after specific durations of time. Each new duration added will stack, meaning it will come after the previous duration, meaning a newly-added <strong>*Start Setpoint</strong>* will begin after the previous entry's <strong>*End Setpoint</strong>*.</p>
<p>If the &quot;Repeat Method&quot; option is used, this will cause the method to repeat once it has reached the end. If this option is used, no more durations may be added to the method. If the repeat option is deleted then more durations may be added. For instance, if your method is 200 seconds total, if the Repeat Duration is set to 600 seconds, the method will repeat 3 times and then automatically turn off the PID or Conditional.</p>
<h2 id="daily-time-based-method">Daily (Time-Based) Method</h2>
<p>The daily time-based method is similar to the time/date method, however it will repeat every day. Therefore, it is essential that only the span of one day be set in this method. Begin with the start time at 00:00:00 and end at 23:59:59 (or 00:00:00, which would be 24 hours from the start). The start time must be equal or greater than the previous end time.</p>
<h2 id="daily-sine-wave-method">Daily (Sine Wave) Method</h2>
<p>The daily sine wave method defines the setpoint over the day based on a sinusoidal wave. The sine wave is defined by y = [A * sin(B * x + C)] + D, where A is amplitude, B is frequency, C is the angle shift, and D is the y-axis shift. This method will repeat daily.</p>
<h2 id="daily-bezier-curve-method">Daily (Bezier Curve) Method</h2>
<p>A daily Bezier curve method define the setpoint over the day based on a cubic Bezier curve. If unfamiliar with a Bezier curve, it is recommended you use the <a href="https://www.desmos.com/calculator/cahqdxeshd">graphical Bezier curve generator</a> and use the 8 variables it creates for 4 points (each a set of x and y). The x-axis start (x3) and end (x0) will be automatically stretched or skewed to fit within a 24-hour period and this method will repeat daily.</p>
<h1 id="lcds">LCDs</h1>
<p><code>Setup -&gt; LCD</code></p>
<p>Data may be output to a liquid crystal display (LCD) for easy viewing. Please see <a href="#lcd-displays">LCD Displays</a> for specific information regarding compatibility.</p>
<p>There may be multiple displays created for each LCD. If there is only one display created for the LCD, it will refresh at the set period. If there is more than one display, it will cycle from one display to the next every set period.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Reset Flashing</td>
<td>If the LCD is flashing to alert you because it was instructed to do so by a triggered Conditional Statement, use this button to stop the flashing.</td>
</tr>
<tr class="even">
<td>Type</td>
<td>Select either a 16x2 or 20x4 character LCD display.</td>
</tr>
<tr class="odd">
<td>I2C Address</td>
<td>Select the I2C to communicate with the LCD.</td>
</tr>
<tr class="even">
<td>Period</td>
<td>This is the period of time (in seconds) between redrawing the LCD with new data or switching to the next set of displays (if multiple displays are used).</td>
</tr>
<tr class="odd">
<td>Add Display Set</td>
<td>Add a set of display lines to the LCD.</td>
</tr>
<tr class="even">
<td>Display Line #</td>
<td>Select which measurement to display on each line of the LCD.</td>
</tr>
<tr class="odd">
<td>Max Age (seconds)</td>
<td>The maximum age the measurement is allowed to be. If no measurement was acquired in this time frame, the display will indicate &quot;NO DATA&quot;.</td>
</tr>
</tbody>
</table>
<h1 id="alerts">Alerts</h1>
<p>Alerts can be used to notify users about the state of the system. For things like sensor monitoring, this could be a threshold that indicates something needs attention. E-Mail notifications are built-in to Mycodo in a number of places, however there are several places (Inputs, Outputs, Controllers) that allow custom Python code to be used, enabling many other notification options to be built.</p>
<p>See <a href="#alert-settings">Alert Settings</a> for more information about setting up Alerts.</p>
<h1 id="notes">Notes</h1>
<p><code>More -&gt; Notes</code></p>
<p>Notes may be created that can then be displayed on graphs or referenced at a later time. All notes are timestamped with the date/time of creation or may be created with a custom date/time. Each note must have at least one tag selected. Tags are what are selected to be displayed on a graph and all notes with that tag will appear in the time frame selected on the graph.</p>
<h2 id="tag-options">Tag Options</h2>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name</td>
<td>A name for the tag. Must not contain spaces.</td>
</tr>
<tr class="even">
<td>Rename</td>
<td>Rename the tag.</td>
</tr>
</tbody>
</table>
<h2 id="note-options">Note Options</h2>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name</td>
<td>A name for the note.</td>
</tr>
<tr class="even">
<td>Use Custom Date/Time</td>
<td>Check to enter a custom date/time for the note.</td>
</tr>
<tr class="odd">
<td>Custom Date/Time</td>
<td>Store the note with this custom date/time.</td>
</tr>
<tr class="even">
<td>Attached Files</td>
<td>Attach one or more files to the note.</td>
</tr>
<tr class="odd">
<td>Tags</td>
<td>Associate the note with at least one tag.</td>
</tr>
<tr class="even">
<td>Note</td>
<td>The text body of the note. The text will appear monospaced, so code will format properly.</td>
</tr>
</tbody>
</table>
<h1 id="export-import">Export-Import</h1>
<p><code>More -&gt; Export Import</code></p>
<p>Measurements that fall within the selected date/time frame may be exported as CSV with their corresponding timestamps.</p>
<p>Additionally, the entire measurement database (influxdb) may be exported as a ZIP archive backup. This ZIP may be imported back in any Mycodo system to restore these measurements. Note that an import will override the current data (i.e. destroying it).</p>
<p>Mycodo settings may be exported as a ZIP file containing the Mycodo settings database (sqlite). This ZIP file may be used to restore the settings database to another Mycodo install, as long as the Mycodo version and database versions are the same. Future support for installing older (or newer) databases and performing an automatic upgrade/downgrade is in the works.</p>
<h1 id="dependencies">Dependencies</h1>
<p><code>[Gear Icon] -&gt; Dependencies</code></p>
<p>The dependency page allows viewing of dependency information and the ability to initiate their installation.</p>
<p>During the installation of Mycodo, there is an option to select which dependencies to install. If &quot;Minimal Install&quot; or &quot;Custom Install&quot; was selected (rather than &quot;Full Install&quot;), there may be unmet dependencies on your system. Don't worry, this isn't necessarily a problem. These optional dependencies only need to be installed when there's a particular feature you want to use. When a user attempts to use a feature that has an unmet dependency, the user will be forwarded to the Dependency page in order to install it.</p>
<h1 id="camera">Camera</h1>
<p><code>More -&gt; Camera</code></p>
<p>Cameras can be used to capture still images, create time-lapses, and stream video. Cameras may also be used by Functions to trigger a camera image or video capture (as well as the ability to email the image/video with a notification).</p>
<p>Cameras can be accessed by the following libraries: picamera (Raspberry Pi Camera), fswebcam, opencv, urllib, and requests.</p>
<p>This enables images to be acquired from the Raspberry Pi camera, USB cameras and webcams, and IP cameras that are accessible by a URL. Furthermore, using the urllib and request libraries, any image URL can be used to acquire images.</p>
<h1 id="energy-usage">Energy Usage</h1>
<p><code>More -&gt; Energy Usage</code></p>
<p>There are two methods for calculating energy usage. The first relies on determining how long Outputs have been on. Based on this, if the number of Amps the output draws has been set in the output Settings, then the kWh and cost can be calculated. Discovering the number of amps the device draws can be accomplished by calculating this from the output typically given as watts on the device label, or with the use of a current clamp while the device is operating. The limitation of this method is PWM Outputs are not currently used to calculate these figures due to the difficulty determining the current consumption of devices driven by PWM signals.</p>
<p>The second method for calculating energy consumption is more accurate and is the recommended method if you desire the most accurate estimation of energy consumption and cost. This method relies on an Input or Math measuring Amps. One way to do this is with the used of an analog-to-digital converter (ADC) that converts the voltage output from a transformer into current (Amps). One wire from the AC line that powers your device(s) passes thorough the transformer and the device converts the current that passes through that wire into a voltage that corresponds to the amperage. For instance, the below sensor converts 0 -50 amps input to 0 - 5 volts output. An ADC receives this output as its input. One would set this conversion range in Mycodo and the calculated amperage will be stored. On the Energy Usage page, add this ADC Input measurement and a report summary will be generated. Keep in mind that for a particular period (for example, the past week) to be accurate, there needs to be a constant measurement of amps at a periodic rate. The faster the rate the more accurate the calculation will be. This is due to the amperage measurements being averaged for this period prior to calculating kWh and cost. If there is any time turing this period where amp measurements aren't being acquired when in fact there are devices consuming current, the calculation is likely to not be accurate.</p>
<p><a href="https://shop.greystoneenergy.com/shop/cs-sensor-series-ac-solid-core-current-sensor">Greystone CS-650-50 AC Solid Core Current Sensor (Transformer)</a></p>
<p>The following settings are for calculating energy usage from an amp measurement. For calculating based on Output duration, see <a href="#energy-usage-settings">Energy Usage Settings</a>.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Select Amp Measurement</td>
<td>This is a measurement with the amp (A) units that will be used to calculate energy usage.</td>
</tr>
</tbody>
</table>
<h1 id="system-information">System Information</h1>
<p><code>[Gear Icon] -&gt; System Information</code></p>
<p>This page serves to provide information about the Mycodo frontend and backend as well as the linux system it's running on. Several commands and their output are listed to give the user information about how their system is running.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mycodo Version</td>
<td>The current version of Mycodo, reported by the configuration file.</td>
</tr>
<tr class="even">
<td>Python Version</td>
<td>The version of python currently running the web user interface.</td>
</tr>
<tr class="odd">
<td>Database Version</td>
<td>The current version of the settings database. If the current version is different from what it should be, an error will appear indicating the issue and a link to find out more information about the issue.</td>
</tr>
<tr class="even">
<td>Daemon Status</td>
<td>This will be a green &quot;Running&quot; or a red &quot;Stopped&quot;. Additionally, the Mycodo version and hostname text at the top-left of the screen May be Green, Yellow, or Red to indicate the status. Green = daemon running, yellow = unable to connect, and red = daemon not running.</td>
</tr>
<tr class="odd">
<td>...</td>
<td>Several other status indicators and commands are listed to provide information about the health of the system. Use these in addition to others to investigate software or hardware issues.</td>
</tr>
</tbody>
</table>
<h1 id="mycodo-client">Mycodo Client</h1>
<pre><code>pi@raspberry:~ $ mycodo-client --help
usage: mycodo-client [-h] [--activatecontroller CONTROLLER ID]
                     [--deactivatecontroller CONTROLLER ID] [--pid_pause ID]
                     [--pid_hold ID] [--pid_resume ID] [--pid_get_setpoint ID]
                     [--pid_get_error ID] [--pid_get_integrator ID]
                     [--pid_get_derivator ID] [--pid_get_kp ID]
                     [--pid_get_ki ID] [--pid_get_kd ID]
                     [--pid_set_setpoint ID SETPOINT]
                     [--pid_set_integrator ID INTEGRATOR]
                     [--pid_set_derivator ID DERIVATOR] [--pid_set_kp ID KP]
                     [--pid_set_ki ID KI] [--pid_set_kd ID KD] [-c] [--ramuse]
                     [--input_force_measurements INPUTID]
                     [--lcd_backlight_on LCDID] [--lcd_backlight_off LCDID]
                     [--lcd_reset LCDID] [--output_state OUTPUTID]
                     [--output_currently_on OUTPUTID] [--outputoff OUTPUTID]
                     [--outputon OUTPUTID] [--duration SECONDS]
                     [--dutycycle DUTYCYCLE] [--trigger_action ACTIONID]
                     [--trigger_all_actions FUNCTIONID] [-t]

Client for Mycodo daemon.

optional arguments:
  -h, --help            show this help message and exit
  --activatecontroller CONTROLLER ID
                        Activate controller. Options: Conditional, LCD, Math,
                        PID, Input
  --deactivatecontroller CONTROLLER ID
                        Deactivate controller. Options: Conditional, LCD,
                        Math, PID, Input
  --pid_pause ID        Pause PID controller.
  --pid_hold ID         Hold PID controller.
  --pid_resume ID       Resume PID controller.
  --pid_get_setpoint ID
                        Get the setpoint value of the PID controller.
  --pid_get_error ID    Get the error value of the PID controller.
  --pid_get_integrator ID
                        Get the integrator value of the PID controller.
  --pid_get_derivator ID
                        Get the derivator value of the PID controller.
  --pid_get_kp ID       Get the Kp gain of the PID controller.
  --pid_get_ki ID       Get the Ki gain of the PID controller.
  --pid_get_kd ID       Get the Kd gain of the PID controller.
  --pid_set_setpoint ID SETPOINT
                        Set the setpoint value of the PID controller.
  --pid_set_integrator ID INTEGRATOR
                        Set the integrator value of the PID controller.
  --pid_set_derivator ID DERIVATOR
                        Set the derivator value of the PID controller.
  --pid_set_kp ID KP    Set the Kp gain of the PID controller.
  --pid_set_ki ID KI    Set the Ki gain of the PID controller.
  --pid_set_kd ID KD    Set the Kd gain of the PID controller.
  -c, --checkdaemon     Check if all active daemon controllers are running
  --ramuse              Return the amount of ram used by the Mycodo daemon
  --input_force_measurements INPUTID
                        Force acquiring measurements for Input ID
  --lcd_backlight_on LCDID
                        Turn on LCD backlight with LCD ID
  --lcd_backlight_off LCDID
                        Turn off LCD backlight with LCD ID
  --lcd_reset LCDID     Reset LCD with LCD ID
  --output_state OUTPUTID
                        State of output with output ID
  --output_currently_on OUTPUTID
                        How many seconds an output has currently been active
                        for
  --outputoff OUTPUTID  Turn off output with output ID
  --outputon OUTPUTID   Turn on output with output ID
  --duration SECONDS    Turn on output for a duration of time (seconds)
  --dutycycle DUTYCYCLE
                        Turn on PWM output for a duty cycle (%)
  --trigger_action ACTIONID
                        Trigger action with Action ID
  --trigger_all_actions FUNCTIONID
                        Trigger all actions belonging to Function with ID
  -t, --terminate       Terminate the daemon</code></pre>
<h1 id="infrared-remote">Infrared Remote</h1>
<p>NOTE: This functionality may or may not work. Since Raspbian upgraded to Buster, I have not been able to get it to work. I will try to restore functionality.</p>
<p>Note 1: As of 4/8/2019, the Raspberry Pi kernel no longer supports <code>lirc-rpi</code> as an overlay in <code>/boot/config.txt</code> (use <code>gpio-ir</code>, details below). To ensure the below instructions work, make sure you are using the latest kernel by running <code>sudo rpi-update</code></p>
<p>Note 2: Currently only receiving IR commands is working. IR sending is not working. When I get time to test and develop an implementation of this feature that both sends and receives IR signals, I will remove this note.</p>
<p>Infrared (IR) light is a common way to send and receive signals across distances. This is typically done with IR remotes with several buttons configured to send different signals. These signals can be detected by the Raspberry Pi with the use of an <a href="https://www.sparkfun.com/products/10266">IR receiver diode</a> and used to perform actions within the linux environment and Mycodo. This is done with <a href="http://lirc.org/">lirc</a>, and needs to be properly configured before IR signals can be detected and interpreted.</p>
<p>The IR receiver typically has three connections, power (3.3 volts), ground, and data (GPIO pin), and should be connected to the appropriate pins of your Raspberry Pi. Make sure your IR receiver can operate at 3.3 volts, which is the appropriate voltage GPIOs operate at. For testing, I used the <a href="https://www.sparkfun.com/products/14677">Sparkfun Infrared Control Kit</a>, which has an <a href="https://learn.sparkfun.com/tutorials/ir-control-kit-hookup-guide">Information Guide</a>, however there are cheaper alternatives.</p>
<p>Adding an Infrared Output device or an Infrared Send function action will automatically install the dependencies, otherwise it can be done manually:</p>
<p><code>sudo apt install liblircclient-dev lirc</code></p>
<p><code>~/Mycodo/env/bin/pip install python-lirc py-irsend</code></p>
<p>Edit <code>/boot/config.txt</code> and add to the end of the file, replacing &quot;17&quot; with the GPIO (BCM numbering) connected to your IR LED and &quot;18&quot; with the GPIO connected to the IR receiver. You can omit either of these options if you aren't using either the IR receiver or transmitting LED:</p>
<p><code>dtoverlay=gpio-ir,gpio_pin=18 dtoverlay=gpio-ir-tx,gpio_pin=17</code></p>
<p>Edit <code>/etc/lirc/lirc_options.conf</code> and ensure the following settings are set:</p>
<pre><code>driver = default
device = /dev/lirc1</code></pre>
<p>Restart your system:</p>
<p><code>sudo shutdown now -r</code></p>
<p>Check <a href="http://lirc-remotes.sourceforge.net/remotes-table.html">this remote database</a> for your remote, and if it's found, place it in <code>/etc/lirc/lircd.conf.d/</code>, otherwise you will need to generate a config file for your remote.</p>
<p>To generate a config file for your remote, lirc must first be stopped:</p>
<p><code>sudo service lircd stop</code></p>
<p>Then, issue the following command:</p>
<p><code>sudo irrecord -n -d /dev/lirc1</code></p>
<p>You will be prompted with a very specific set of instructions in order to map your remote. If you successfully finish the config generation, you will have a *.lirc.conf file that you should place in <code>/etc/lirc/lircd.conf.d/</code></p>
<p>If <code>irrecord</code> is unable to parse the remote code (due to complexity or other issue), you can still use the raw data to create a config file. To obtain the raw code data, run the following command, and press a button on the remote once.</p>
<p><code>mode2 -m</code></p>
<p>You should see output similar to the following, with data represented in 6 columns.</p>
<pre><code>pi@rapsberry:~ $ mode2 -m
Using driver default on device /dev/lirc0
Trying device: /dev/lirc0
Using device: /dev/lirc0
 16777215

     3431     1747      444     1313      441     1312
      444      471      441      474      440      474
      440     1315      439      476      438      480
      444     1312      442     1313      441      475
      438     1317      439      476      437      477</code></pre>
<p>Use the 6-column data to generate your config file, with the following as an example <code>example_remote.lircd.conf</code>, that should be placed in <code>/etc/lirc/lircd.conf.d/</code>.</p>
<pre><code>begin remote
  name  example_remote
  flags RAW_CODES
  eps           30
  aeps          100

  ptrail       0
  repeat       0  0
  gap          107902

      begin raw_codes
          name KEY_POWER
             3431     1747      444     1313      441     1312
              444      471      441      474      440      474
              440     1315      439      476      438      480
              444     1312      442     1313      441      475
              438     1317      439      476      437      477
      end raw_codes
end remote</code></pre>
<p>Start lirc back up to load all the remote config files:</p>
<p><code>sudo service lirc start</code></p>
<p>Now, start <code>irw</code> and press a button on your remote. If everything works, you should see information appear when you press each button, such as below:</p>
<pre><code>pi@raspberry:~ $ irw
0000000000ff629d 00 KEY_POWER simple_remote
0000000000ff22dd 01 KEY_A simple_remote
0000000000ff02fd 01 KEY_B simple_remote
0000000000ffc23d 00 KEY_C simple_remote
0000000000ff9867 00 KEY_UP simple_remote
0000000000ff38c7 00 KEY_DOWN simple_remote
0000000000ff30cf 01 KEY_LEFT simple_remote
0000000000ff7a85 00 KEY_RIGHT simple_remote
0000000000ff18e7 01 KEY_SELECT simple_remote</code></pre>
<p>Now that we have the remote detected and mapped, we can set commands to be executed or what word is returned to Mycodo. Create a file <code>~/.lirc</code>:</p>
<p><code>nano ~/.lircrc</code></p>
<p>and configure the responses to button presses</p>
<pre><code>begin
  button = KEY_POWER
  prog = mycodo
  config = power
  repeat = 0
end
begin
  button = KEY_A
  prog = mycodo
  config = a
  repeat = 0
end</code></pre>
<p>To test this with Python, create the test program <code>infrared_receive.py</code>:</p>
<pre><code>import lirc
import time

sockid = lirc.init(&quot;mycodo&quot;, blocking=False)
while True:
    code = lirc.nextcode()
    if code:
        print(code[0])
    time.sleep(0.05)</code></pre>
<p>Execute this using the Mycodo virtualenv:</p>
<p><code>~/Mycodo/env/bin/python infrared_receive.py</code></p>
<p>And press the buttons defined in <code>~/.lirc</code> and see if the output appears on the console:</p>
<pre><code>pi@raspberry:~ $ ~/Mycodo/env/bin/python ./test_IR.py
power
a</code></pre>
<p>From here, you can create any Python code to react to button presses on your remote. You can also set up the Mycodo Function Trigger: Infrared Remote Input and trigger events in response to Mycodo detecting specific button presses. See <a href="#infrared-remote-input-options">Infrared Remote Input Options</a> for configuring this trigger.</p>
<p>In order to send an IR signal to your IR LED, connect your LED to the GPIO defined with <code>gpio_out_pin=17</code> in <code>/boot/config.txt</code>. You can test if your LED is working by creating a file, <code>LED_blink.py</code>, replacing <code>17</code> with the pin connected to your LED:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> RPi.GPIO <span class="im">as</span> GPIO
<span class="im">import</span> time

pin <span class="op">=</span> <span class="dv">17</span>
GPIO.setwarnings(<span class="va">False</span>)
GPIO.setmode(GPIO.BCM)
GPIO.setup(pin, GPIO.OUT, initial<span class="op">=</span>GPIO.LOW)

<span class="cf">while</span> <span class="va">True</span>:
    GPIO.output(pin, GPIO.HIGH)
    time.sleep(<span class="dv">1</span>)
    GPIO.output(pin, GPIO.LOW)
    time.sleep(<span class="dv">1</span>)</code></pre></div>
<p>Since IR LEDs produce a wavelength of light that humans can't see, you'll need to aim a video camera that lacks an infrared filter and see if the LED is blinking.</p>
<p>If your LED is working, then issue the following command, replacing <code>simple_remote</code> with the name of your remote defined in your config file:</p>
<p><code>irsend SEND_ONCE simple_remote KEY_POWER</code></p>
<p>You can verify this is working by running <code>infrared_receive.py</code>, then executing the <code>irsend</code> command while it's still running, and you should see it print the button command that was sent.</p>
<p>IR codes can be sent from Mycodo using the Infrared Remote Send Function Action. The <code>Remote</code> option should to match the remote name in the config file in <code>/etc/lirc/lircd.conf.d/</code> and the <code>Code</code> option should match a code that's in <code>/home/pi/.lircrc</code>. If <code>Times to Send</code> is set larger than 1, the code will be sent multiple times at intervals of 0.5 seconds.</p>
<h1 id="translations">Translations</h1>
<p>Mycodo has been translated to several languages. By default, the language of the browser will determine which language is used, but may be overridden in the General Settings, at <code>[Gear Icon] -&gt; Configure -&gt; General</code>. If you find an issue with a translation or would like to add another language, see the <a href="https://github.com/kizniche/Mycodo/wiki/Translations">Translations</a> section of the Wiki and consider making a Pull Request or <a href="https://github.com/kizniche/Mycodo/issues/new">Creating an Issue</a>.</p>
<h1 id="configuration-settings">Configuration Settings</h1>
<p><code>[Gear Icon] -&gt; Configure</code></p>
<p>The settings menu, accessed by selecting the gear icon in the top-right, then the Configure link, is a general area for various system-wide configuration options.</p>
<h2 id="general-settings">General Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; General</code></p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Language</td>
<td>Set the language that will be displayed in the web user interface.</td>
</tr>
<tr class="even">
<td>Force HTTPS</td>
<td>Require web browsers to use SSL/HTTPS. Any request to <a href="http://" class="uri">http://</a> will be redirected to <a href="https://" class="uri">https://</a>.</td>
</tr>
<tr class="odd">
<td>Hide success alerts</td>
<td>Hide all success alert boxes that appear at the top of the page.</td>
</tr>
<tr class="even">
<td>Hide info alerts</td>
<td>Hide all info alert boxes that appear at the top of the page.</td>
</tr>
<tr class="odd">
<td>Hide warning alerts</td>
<td>Hide all warning alert boxes that appear at the top of the page.</td>
</tr>
<tr class="even">
<td>Opt-out of statistics</td>
<td>Turn off sending anonymous usage statistics. Please consider that this helps the development to leave on.</td>
</tr>
<tr class="odd">
<td>Check for Updates</td>
<td>Automatically check for updates every 2 days and notify through the web interface. If there is a new update, the Configure (Gear Icon) as well as the Upgrade menu will turn the color red.</td>
</tr>
</tbody>
</table>
<h2 id="energy-usage-settings">Energy Usage Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; General</code></p>
<p>In order to calculate accurate energy usage statistics, a few characteristics of your electrical system needs to be know. These variables should describe the characteristics of the electrical system being used by the relays to operate electrical devices. Note: Proper energy usage calculations also rely on the correct current draw to be set for each output (see <a href="#output">Output Settings</a>).</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Max Amps</td>
<td>Set the maximum allowed amperage to be switched on at any given time. If a output that's instructed to turn on will cause the sum of active devices to exceed this amount, the output will not be allowed to turn on, to prevent any damage that may result from exceeding current limits.</td>
</tr>
<tr class="even">
<td>Voltage</td>
<td>Alternating current (AC) voltage that is switched by the outputs. This is usually 120 or 240.</td>
</tr>
<tr class="odd">
<td>Cost per kWh</td>
<td>This is how much you pay per kWh.</td>
</tr>
<tr class="even">
<td>Currency Unit</td>
<td>This is the unit used for the currency that pays for electricity.</td>
</tr>
<tr class="odd">
<td>Day of Month</td>
<td>This is the day of the month (1-30) that the electricity meter is read (which will correspond to the electrical bill).</td>
</tr>
<tr class="even">
<td>Generate Usage/Cost Report</td>
<td>These options define when an Energy Usage Report will be generated. Currently these Only support the Output Duration calculation method. For more information about the methods, see <a href="#energy-usage">Energy Usage</a>.</td>
</tr>
</tbody>
</table>
<h2 id="input-settings">Input Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; Inputs</code></p>
<p>Input modules may be imported and used within Mycodo. These modules must follow a specific format. See <a href="#custom-inputs">Custom Inputs</a> for more details.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Import Input Module</td>
<td>Select your input module file, then click this button to begin the import.</td>
</tr>
</tbody>
</table>
<h2 id="output-settings">Output Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; Outputs</code></p>
<p>Output modules may be imported and used within Mycodo. These modules must follow a specific format. See <a href="#custom-outputs">Custom Outputs</a> for more details.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Import Output Module</td>
<td>Select your output module file, then click this button to begin the import.</td>
</tr>
</tbody>
</table>
<h2 id="measurement-settings">Measurement Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; Measurements</code></p>
<p>New measurements, units, and conversions can be created that can extend functionality of Mycodo beyond the built-in types and equations. Be sure to create units before measurements, as units need to be selected when creating a measurement. A measurement can be created that already exists, allowing additional units to be added to a pre-existing measurement. For example, the measurement 'altitude' already exists, however if you wanted to add the unit 'fathom', first create the unit 'fathom', then create the measurement 'altitude' with the 'fathom' unit selected. It is okay to create a custom measurement for a measurement that already exist (this is how new units for a currently-installed measurement is added).</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Measurement ID</td>
<td>ID for the measurement to use in the measurements_dict of input modules (e.g. &quot;length&quot;, &quot;width&quot;, &quot;speed&quot;).</td>
</tr>
<tr class="even">
<td>Measurement Name</td>
<td>Common name for the measurement (e.g. &quot;Length&quot;, &quot;Weight&quot;, &quot;Speed&quot;).</td>
</tr>
<tr class="odd">
<td>Measurement Units</td>
<td>Select all the units that are associated with the measurement.</td>
</tr>
<tr class="even">
<td>Unit ID</td>
<td>ID for the unit to use in the measurements_dict of input modules (e.g. &quot;K&quot;, &quot;g&quot;, &quot;m&quot;).</td>
</tr>
<tr class="odd">
<td>Unit Name</td>
<td>Common name for the unit (e.g. &quot;Kilogram&quot;, &quot;Meter&quot;).</td>
</tr>
<tr class="even">
<td>Unit Abbreviation</td>
<td>Abbreviation for the unit (e.g. &quot;kg&quot;, &quot;m&quot;).</td>
</tr>
<tr class="odd">
<td>Convert From Unit</td>
<td>The unit that will be converted from.</td>
</tr>
<tr class="even">
<td>Convert To Unit</td>
<td>The unit that will be converted to.</td>
</tr>
<tr class="odd">
<td>Equation</td>
<td>The equation used to convert one unit to another. The lowercase letter &quot;x&quot; must be included in the equation (e.g. &quot;x/1000+20&quot;, &quot;250*(x/3)&quot;). This &quot;x&quot; will be replaced with the actual measurement being converted.</td>
</tr>
</tbody>
</table>
<h2 id="users">Users</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; Users</code></p>
<p>Mycodo requires at least one Admin user for the login system to be enabled. If there isn't an Admin user, the web server will redirect to an Admin Creation Form. This is the first page you see when starting Mycodo for the first time. After an Admin user has been created, additional users may be created from the User Settings page.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Username</td>
<td>Choose a user name that is between 2 and 64 characters. The user name is case insensitive (all user names are converted to lower-case).</td>
</tr>
<tr class="even">
<td>Email</td>
<td>The email associated with the new account.</td>
</tr>
<tr class="odd">
<td>Password/Repeat</td>
<td>Choose a password that is between 6 and 64 characters and only contains letters, numbers, and symbols.</td>
</tr>
<tr class="even">
<td>Role</td>
<td>Roles are a way of imposing access restrictions on users, to either allow or deny actions. See the table below for explanations of the four default Roles.</td>
</tr>
<tr class="odd">
<td>Theme</td>
<td>The web user interface theme to apply, including colors, themes, and other design elements.</td>
</tr>
</tbody>
</table>
<h2 id="user-roles">User Roles</h2>
<p>Roles define the permissions of each user. There are 4 default roles that determine if a user can view or edit particular areas of Mycodo. Four roles are provided by default, but custom roles may be created.</p>
<table>
<colgroup>
<col style="width: 23%"></col>
<col style="width: 19%"></col>
<col style="width: 19%"></col>
<col style="width: 19%"></col>
<col style="width: 19%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Role</th>
<th>Admin</th>
<th>Editor</th>
<th>Monitor</th>
<th>Guest</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Edit Users</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Edit Controllers</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Edit Settings</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>View Settings</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr class="odd">
<td>View Camera</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr class="even">
<td>View Stats</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr class="odd">
<td>View Logs</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
</tbody>
</table>
<p>The <code>Edit Controllers</code> permission protects the editing of Conditionals, Graphs, LCDs, Methods, PIDs, Outputs, and Inputs.</p>
<p>The <code>View Stats</code> permission protects the viewing of usage statistics and the System Information and Energy Usage pages.</p>
<h2 id="pi-settings">Pi Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; Raspberry Pi</code></p>
<p>Pi settings configure parts of the linux system that Mycodo runs on.</p>
<p>pigpiod is required if you wish to use PWM Outputs, as well as PWM, RPM, DHT22, DHT11, HTU21D Inputs.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Enable/Disable Feature</td>
<td>These are system interfaces that can be enabled and disabled from the web UI via the <code>raspi-config</code> command.</td>
</tr>
<tr class="even">
<td>pigpiod Sample Rate</td>
<td>This is the sample rate the pigpiod service will operate at. The lower number enables faster PWM frequencies, but may significantly increase processor load on the Pi Zeros. pigpiod may als be disabled completely if it's not required (see note, above).</td>
</tr>
</tbody>
</table>
<h2 id="alert-settings">Alert Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; Alerts</code></p>
<p>Alert settings set up the credentials for sending email notifications.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SMTP Host</td>
<td>The SMTP server to use to send emails from.</td>
</tr>
<tr class="even">
<td>SMTP Port</td>
<td>Port to communicate with the SMTP server (465 for SSL, 587 for TSL).</td>
</tr>
<tr class="odd">
<td>Enable SSL</td>
<td>Check to enable SSL, uncheck to enable TSL.</td>
</tr>
<tr class="even">
<td>SMTP User</td>
<td>The user name to send the email from. This can be just a name or the entire email address.</td>
</tr>
<tr class="odd">
<td>SMTP Password</td>
<td>The password for the user.</td>
</tr>
<tr class="even">
<td>From Email</td>
<td>What the from email address be set as. This should be the actual email address for this user.</td>
</tr>
<tr class="odd">
<td>Max emails (per hour)</td>
<td>Set the maximum number of emails that can be sent per hour. If more notifications are triggered within the hour and this number has been reached, the notifications will be discarded.</td>
</tr>
<tr class="even">
<td>Send Test Email</td>
<td>Test the email configuration by sending a test email.</td>
</tr>
</tbody>
</table>
<h2 id="camera-settings">Camera Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; Camera</code></p>
<p>Many cameras can be used simultaneously with Mycodo. Each camera needs to be set up in the camera settings, then may be used throughout the software. Note that not every option (such as Hue or White Balance) may be able to be used with your particular camera, due to manufacturer differences in hardware and software.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Type</td>
<td>Select whether the camera is a Raspberry Pi Camera or a USB camera.</td>
</tr>
<tr class="even">
<td>Library</td>
<td>Select which library to use to communicate with the camera. The Raspberry Pi Camera uses picamera, and USB cameras should be set to fswebcam.</td>
</tr>
<tr class="odd">
<td>Device</td>
<td>The device to use to connect to the camera. fswebcam is the only library that uses this option.</td>
</tr>
<tr class="even">
<td>Output</td>
<td>This output will turn on during the capture of any still image (which includes timelapses).</td>
</tr>
<tr class="odd">
<td>Output Duration</td>
<td>Turn output on for this duration of time before the image is captured.</td>
</tr>
<tr class="even">
<td>Rotate Image</td>
<td>The number of degrees to rotate the image.</td>
</tr>
<tr class="odd">
<td>...</td>
<td>Image Width, Image Height, Brightness, Contrast, Exposure, Gain, Hue, Saturation, White Balance. These options are self-explanatory. Not all options will work with all cameras.</td>
</tr>
<tr class="even">
<td>Pre Command</td>
<td>A command to execute (as user 'root') before a still image is captured.</td>
</tr>
<tr class="odd">
<td>Post Command</td>
<td>A command to execute (as user 'root') after a still image is captured.</td>
</tr>
<tr class="even">
<td>Flip horizontally</td>
<td>Flip, or mirror, the image horizontally.</td>
</tr>
<tr class="odd">
<td>Flip vertically</td>
<td>Flip, or mirror, the image vertically.</td>
</tr>
</tbody>
</table>
<h2 id="diagnostic-settings">Diagnostic Settings</h2>
<p><code>[Gear Icon] -&gt; Configure -&gt; Diagnostics</code></p>
<p>Sometimes issues arise in the system as a result of incompatible configurations, either the result of a misconfigured part of the system (Input, Output, etc.) or an update that didn't properly handle a database upgrade, or other unforeseen issue. Sometimes it is necessary to perform diagnostic actions that can determine the cause of the issue or fix the issue itself. The options below are meant to alleviate issues, such as a misconfigured dashboard element causing an error on the <code>Data -&gt; Dashboard</code> page, which may cause an inability to access the <code>Data -&gt; Dashboard</code> page to correct the issue. Deleting all Dashboard Elements may be the most economical method to enable access to the <code>Data -&gt; Dashboard</code> page again, at the cost of having to readd all the Dashboard Elements that were once there.</p>
<table>
<colgroup>
<col style="width: 40%"></col>
<col style="width: 59%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Delete All Dashboard Elements</td>
<td>Delete all saved Dashboard Elements from the Dashboard.</td>
</tr>
<tr class="even">
<td>Delete All Notes and Note Tags</td>
<td>Delete all notes and note tags.</td>
</tr>
</tbody>
</table>
<h1 id="troubleshooting">Troubleshooting</h1>
<h2 id="daemon-not-running">Daemon Not Running</h2>
<ul>
<li>Check the Logs: From the <code>[Gear Icon] -&gt; Mycodo Logs</code> page, check the Daemon Log for any errors. If the issue began after an upgrade, also check the Upgrade Log for indications of an issue.</li>
<li>Determine if the Daemon is Running: Execute <code>ps aux | grep '/var/mycodo-root/env/bin/python /var/mycodo-root/mycodo/mycodo_daemon.py'</code> in a terminal and look for an entry to be returned. If nothing is returned, the daemon is not running.</li>
<li>Daemon Lock File: If the daemon is not running, make sure the daemon lock file is deleted at <code>/var/lock/mycodo.pid</code>. The daemon cannot start if the lock file is present.</li>
<li>If a solution could not be found after investigating the above suggestions, submit a <a href="https://github.com/kizniche/Mycodo/issues/new">New Mycodo Issue</a> on github.</li>
</ul>
<h2 id="incorrect-database-version">Incorrect Database Version</h2>
<ul>
<li>Check the <code>[Gear Icon] -&gt; System Information</code> page or select the mycodo logo in the top-left.</li>
<li>An incorrect database version error means the version stored in the Mycodo settings database (<code>~/Mycodo/databases/mycodo.db</code>) is not correct for the latest version of Mycodo, determined in the Mycodo config file (<code>~/Mycodo/mycodo/config.py</code>).</li>
<li>This can be caused by an error in the upgrade process from an older database version to a newer version, or from a database that did not upgrade during the Mycodo upgrade process.</li>
<li>Check the Upgrade Log for any issues that may have occurred. The log is located at <code>/var/log/mycodo/mycodoupgrade.log</code> but may also be accessed from the web UI (if you're able to): select <code>[Gear Icon] -&gt; Mycodo Logs -&gt; Upgrade Log</code>.</li>
<li>Sometimes issues may not immediately present themselves. It is not uncommon to be experiencing a database issue that was actually introduced several Mycodo versions ago, before the latest upgrade.</li>
<li>Because of the nature of how many versions the database can be in, correcting a database issue may be very difficult. It may be much easier to delete your database and let Mycodo generate a new one.</li>
<li>Use the following commands to rename your database and restart the web UI. If both commands are successful, refresh your web UI page in your browser in order to generate a new database and create a new Admin user.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">mv</span> ~/Mycodo/databases/mycodo.db ~/Mycodo/databases/mycodo.db.backup
<span class="fu">sudo</span> service mycodoflask restart</code></pre></div>
<h2 id="more">More</h2>
<p>Check out the <a href="https://github.com/kizniche/Mycodo/wiki/Diagnosing-Issues">Diagnosing Mycodo Issues Wiki Page</a> on github for more information about diagnosing issues.</p>
<h1 id="devices">Devices</h1>
<h2 id="input-devices">Input Devices</h2>
<p>Supported Input devices are listed below. I2C Multiplexers</p>
<h3 id="built-in-inputs-system-specific">Built-In Inputs (System-Specific)</h3>
<h4 id="linux-bash-command">Linux: Bash Command</h4>
<div style="white-space: pre-line;">Measurements: Return Value</div>
<p>This Input will execute a command in the shell and store the output as a float value. Perform any unit conversions within your script or command. A measurement/unit is required to be selected.</p>
<h4 id="linux-python-3-code">Linux: Python 3 Code</h4>
<div style="white-space: pre-line;">Measurements: Store Value(s)</div>
<h4 id="mycodo-mqtt-protocol-paho">Mycodo: MQTT Protocol (paho)</h4>
<div style="white-space: pre-line;">Measurements: Variable measurements
Dependencies: <a href="https://pypi.org/project/paho-mqtt">paho-mqtt</a></div>
<h4 id="mycodo-mycodo-ram">Mycodo: Mycodo RAM</h4>
<div style="white-space: pre-line;">Measurements: Size RAM in Use</div>
<h4 id="mycodo-mycodo-version">Mycodo: Mycodo Version</h4>
<div style="white-space: pre-line;">Measurements: Version as Major.Minor.Revision</div>
<h4 id="mycodo-ttn-integration-data-storage">Mycodo: TTN Integration: Data Storage</h4>
<div style="white-space: pre-line;">Measurements: Variable measurements
Dependencies: <a href="https://pypi.org/project/requests">requests</a></div>
<p>This Input receives and stores measurements from the Data Storage Integration on The Things Network.</p>
<h4 id="raspberry-pi-cpugpu-temperature">Raspberry Pi: CPU/GPU Temperature</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/subprocess">subprocess</a></div>
<p>The internal CPU and GPU temperature of the Raspberry Pi.</p>
<h4 id="raspberry-pi-edge">Raspberry Pi: Edge</h4>
<div style="white-space: pre-line;">Measurements: Rising/Falling Edge
Dependencies: <a href="https://pypi.org/project/RPi.GPIO">RPi.GPIO</a></div>
<h4 id="raspberry-pi-gpio-state">Raspberry Pi: GPIO State</h4>
<div style="white-space: pre-line;">Measurements: GPIO State
Dependencies: <a href="https://pypi.org/project/RPi.GPIO">RPi.GPIO</a></div>
<h4 id="raspberry-pi-signal-pwm">Raspberry Pi: Signal (PWM)</h4>
<div style="white-space: pre-line;">Measurements: Frequency/Pulse Width/Duty Cycle
Dependencies: pigpio</div>
<h4 id="raspberry-pi-signal-revolutions">Raspberry Pi: Signal (Revolutions)</h4>
<div style="white-space: pre-line;">Measurements: RPM
Dependencies: pigpio</div>
<h4 id="system-cpu-load">System: CPU Load</h4>
<div style="white-space: pre-line;">Measurements: CPULoad</div>
<h4 id="system-free-space">System: Free Space</h4>
<div style="white-space: pre-line;">Measurements: Unallocated Disk Space</div>
<h4 id="system-server-ping">System: Server Ping</h4>
<div style="white-space: pre-line;">Measurements: Boolean</div>
<p>This Input executes the bash command &quot;ping -c [times] -w [deadline] [host]&quot; to determine if the host can be pinged.</p>
<h4 id="system-server-port-open">System: Server Port Open</h4>
<div style="white-space: pre-line;">Measurements: Boolean</div>
<p>This Input executes the bash command &quot;nc -zv [host] [port]&quot; to determine if the host at a particular port is accessible.</p>
<h3 id="built-in-inputs-sensors">Built-In Inputs (Sensors)</h3>
<h4 id="ams-as7262">AMS: AS7262</h4>
<div style="white-space: pre-line;">Measurements: Light at 450, 500, 550, 570, 600, 650 nm
Dependencies: <a href="https://pypi.org/project/as7262">as7262</a>
Manufacturer URL: <a href="https://ams.com/as7262">Link</a>
Datasheet URL: <a href="https://ams.com/documents/20143/36005/AS7262_DS000486_2-00.pdf/0031f605-5629-e030-73b2-f365fd36a43b">Link</a>
Product URL: <a href="https://www.sparkfun.com/products/14347">Link</a></div>
<h4 id="ams-ccs811">AMS: CCS811</h4>
<div style="white-space: pre-line;">Measurements: CO2/VOC/Temperature
Dependencies: <a href="https://pypi.org/project/Adafruit_CCS811">Adafruit_CCS811</a>, <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>
Manufacturer URL: <a href="https://www.sciosense.com/products/environmental-sensors/ccs811-gas-sensor-solution/">Link</a>
Datasheet URL: <a href="https://www.sciosense.com/wp-content/uploads/2020/01/CCS811-Datasheet.pdf">Link</a>
Product URL(s): <a href="https://www.adafruit.com/product/3566">Link 1</a>, <a href="https://www.sparkfun.com/products/14193">Link 2</a></div>
<h4 id="ams-tsl2561">AMS: TSL2561</h4>
<div style="white-space: pre-line;">Measurements: Light
Dependencies: <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>, <a href="https://pypi.org/project/Adafruit_PureIO">Adafruit_PureIO</a>, <a href="https://pypi.org/project/tsl2561">tsl2561</a>
Manufacturer URL: <a href="https://ams.com/tsl2561">Link</a>
Datasheet URL: <a href="https://ams.com/documents/20143/36005/TSL2561_DS000110_3-00.pdf/18a41097-2035-4333-c70e-bfa544c0a98b">Link</a>
Product URL: <a href="https://www.adafruit.com/product/439">Link</a></div>
<h4 id="ams-tsl2591">AMS: TSL2591</h4>
<div style="white-space: pre-line;">Measurements: Light
Dependencies: <a href="https://github.com/maxlklaxl/python-tsl2591">tsl2591</a>
Manufacturer URL: <a href="https://ams.com/tsl25911">Link</a>
Datasheet URL: <a href="https://ams.com/documents/20143/36005/TSL2591_DS000338_6-00.pdf/090eb50d-bb18-5b45-4938-9b3672f86b80">Link</a>
Product URL: <a href="https://www.adafruit.com/product/1980">Link</a></div>
<h4 id="aosong-am2315am2320">AOSONG: AM2315/AM2320</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: <a href="https://pypi.org/project/quick2wire-api">quick2wire-api</a>
Datasheet URL: <a href="https://cdn-shop.adafruit.com/datasheets/AM2315.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/1293">Link</a></div>
<h4 id="aosong-dht11">AOSONG: DHT11</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: pigpio
Datasheet URL: <a href="http://www.adafruit.com/datasheets/DHT11-chinese.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/386">Link</a></div>
<h4 id="aosong-dht22">AOSONG: DHT22</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: pigpio
Datasheet URL: <a href="http://www.adafruit.com/datasheets/DHT22.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/385">Link</a></div>
<h4 id="atlas-scientific-do">Atlas Scientific: DO</h4>
<div style="white-space: pre-line;">Measurements: Dissolved Oxygen
Dependencies: <a href="https://pypi.org/project/pylibftdi">pylibftdi</a>
Manufacturer URL: <a href="https://www.atlas-scientific.com/dissolved-oxygen.html">Link</a>
Datasheet URL: <a href="https://www.atlas-scientific.com/files/DO_EZO_Datasheet.pdf">Link</a></div>
<h4 id="atlas-scientific-ec">Atlas Scientific: EC</h4>
<div style="white-space: pre-line;">Measurements: Electrical Conductivity
Dependencies: <a href="https://pypi.org/project/pylibftdi">pylibftdi</a>
Manufacturer URL: <a href="https://www.atlas-scientific.com/conductivity/">Link</a>
Datasheet URL: <a href="https://www.atlas-scientific.com/files/EC_EZO_Datasheet.pdf">Link</a></div>
<h4 id="atlas-scientific-flow-meter">Atlas Scientific: Flow Meter</h4>
<div style="white-space: pre-line;">Measurements: Total Volume, Flow Rate
Dependencies: <a href="https://pypi.org/project/pylibftdi">pylibftdi</a>
Manufacturer URL: <a href="https://www.atlas-scientific.com/flow/">Link</a>
Datasheet URL: <a href="https://www.atlas-scientific.com/files/flow_EZO_Datasheet.pdf">Link</a></div>
<p>Set the Measurement Time Base to a value most appropriate for your anticipated flow (it will affect accuracy). This flow rate time base that is set and returned from the sensor will be converted to liters per minute, which is the default unit for this input module. If you desire a different rate to be stored in the database (such as liters per second or hour), then use the Convert to Unit option.</p>
<h4 id="atlas-scientific-orp">Atlas Scientific: ORP</h4>
<div style="white-space: pre-line;">Measurements: Oxidation Reduction Potential
Dependencies: <a href="https://pypi.org/project/pylibftdi">pylibftdi</a>
Manufacturer URL: <a href="https://www.atlas-scientific.com/orp/">Link</a>
Datasheet URL: <a href="https://www.atlas-scientific.com/files/ORP_EZO_Datasheet.pdf">Link</a></div>
<h4 id="atlas-scientific-pt-1000">Atlas Scientific: PT-1000</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/pylibftdi">pylibftdi</a>
Manufacturer URL: <a href="https://www.atlas-scientific.com/temperature/">Link</a>
Datasheet URL: <a href="https://www.atlas-scientific.com/files/EZO_RTD_Datasheet.pdf">Link</a></div>
<h4 id="atlas-scientific-pressure">Atlas Scientific: Pressure</h4>
<div style="white-space: pre-line;">Measurements: Pressure
Dependencies: <a href="https://pypi.org/project/pylibftdi">pylibftdi</a>
Manufacturer URL: <a href="https://www.atlas-scientific.com/pressure/">Link</a>
Datasheet URL: <a href="https://www.atlas-scientific.com/files/EZO-PRS-Datasheet.pdf">Link</a></div>
<h4 id="atlas-scientific-rgb-color">Atlas Scientific: RGB Color</h4>
<div style="white-space: pre-line;">Measurements: RGB, CIE, LUX, Proximity
Dependencies: <a href="https://pypi.org/project/pylibftdi">pylibftdi</a>
Manufacturer URL: <a href="https://www.atlas-scientific.com/ezo-rgb/">Link</a>
Datasheet URL: <a href="https://www.atlas-scientific.com/files/EZO_RGB_Datasheet.pdf">Link</a></div>
<h4 id="atlas-scientific-ph">Atlas Scientific: pH</h4>
<div style="white-space: pre-line;">Measurements: Ion Concentration
Dependencies: <a href="https://pypi.org/project/pylibftdi">pylibftdi</a>
Manufacturer URL: <a href="https://www.atlas-scientific.com/ph/">Link</a>
Datasheet URL: <a href="https://www.atlas-scientific.com/files/pH_EZO_Datasheet.pdf">Link</a></div>
<p>Calibration Measurement is an optional setting that provides a temperature measurement (in Celsius) of the water that the pH is being measured from.</p>
<h4 id="bosch-bme280">BOSCH: BME280</h4>
<div style="white-space: pre-line;">Measurements: Pressure/Humidity/Temperature
Dependencies: Input Variant 1: <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>, <a href="https://github.com/adafruit/Adafruit_Python_BME280">Adafruit_BME280</a>; Input Variant 2: <a href="https://pypi.org/project/RPi.bme280">RPi.bme280</a>
Manufacturer URL: <a href="https://www.bosch-sensortec.com/bst/products/all_products/bme280">Link</a>
Datasheet URL: <a href="https://www.bosch-sensortec.com/media/boschsensortec/downloads/datasheets/bst-bme280-ds002.pdf">Link</a>
Product URL(s): <a href="https://www.adafruit.com/product/2652">Link 1</a>, <a href="https://www.sparkfun.com/products/13676">Link 2</a>
Additional URL: <a href="https://github.com/cpetrich/counterfeit_DS18B20">Link</a></div>
<h4 id="bosch-bme680">BOSCH: BME680</h4>
<div style="white-space: pre-line;">Measurements: Temperature/Humidity/Pressure/Gas
Dependencies: <a href="https://pypi.org/project/bme680">bme680</a>, <a href="https://pypi.org/project/smbus2">smbus2</a>
Manufacturer URL: <a href="https://www.bosch-sensortec.com/products/environmental-sensors/gas-sensors-bme680/">Link</a>
Datasheet URL: <a href="https://www.bosch-sensortec.com/media/boschsensortec/downloads/datasheets/bst-bme680-ds001.pdf">Link</a>
Product URL(s): <a href="https://www.adafruit.com/product/3660">Link 1</a>, <a href="https://www.sparkfun.com/products/16466">Link 2</a></div>
<h4 id="bosch-bmp180">BOSCH: BMP180</h4>
<div style="white-space: pre-line;">Measurements: Pressure/Temperature
Dependencies: <a href="https://pypi.org/project/Adafruit_BMP">Adafruit_BMP</a>, <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>
Datasheet URL: <a href="https://ae-bst.resource.bosch.com/media/_tech/media/product_flyer/BST-BMP180-FL000.pdf">Link</a></div>
<h4 id="bosch-bmp280">BOSCH: BMP280</h4>
<div style="white-space: pre-line;">Measurements: Pressure/Temperature
Dependencies: <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>
Manufacturer URL: <a href="https://www.bosch-sensortec.com/products/environmental-sensors/pressure-sensors/pressure-sensors-bmp280-1.html">Link</a>
Datasheet URL: <a href="https://www.bosch-sensortec.com/media/boschsensortec/downloads/datasheets/bst-bmp280-ds001.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/2651">Link</a></div>
<h4 id="co2meter-k30">CO2Meter: K30</h4>
<div style="white-space: pre-line;">Measurements: CO2
Manufacturer URL: <a href="https://www.co2meter.com/products/k-30-co2-sensor-module">Link</a>
Datasheet URL: <a href="http://co2meters.com/Documentation/Datasheets/DS_SE_0118_CM_0024_Revised9%20(1).pdf">Link</a></div>
<h4 id="catnip-electronics-chirp">Catnip Electronics: Chirp</h4>
<div style="white-space: pre-line;">Measurements: Light/Moisture/Temperature
Dependencies: <a href="https://pypi.org/project/smbus2">smbus2</a>
Manufacturer URL: <a href="https://wemakethings.net/chirp/">Link</a>
Product URL: <a href="https://www.tindie.com/products/miceuz/chirp-plant-watering-alarm/">Link</a></div>
<h4 id="cozir-cozir-co2">Cozir: Cozir CO2</h4>
<div style="white-space: pre-line;">Measurements: CO2/Humidity/Temperature
Dependencies: <a href="https://github.com/pierre-haessig/pycozir">cozir</a>
Manufacturer URL: <a href="https://www.co2meter.com/products/cozir-2000-ppm-co2-sensor">Link</a>
Datasheet URL: <a href="https://cdn.shopify.com/s/files/1/0019/5952/files/Datasheet_COZIR_A_CO2Meter_4_15.pdf">Link</a></div>
<h4 id="maxim-ds1822">MAXIM: DS1822</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/w1thermsensor">w1thermsensor</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/sensors/DS1822.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/DS1822.pdf">Link</a></div>
<h4 id="maxim-ds1825">MAXIM: DS1825</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/w1thermsensor">w1thermsensor</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/sensors/DS1825.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/DS1825.pdf">Link</a></div>
<h4 id="maxim-ds18b20">MAXIM: DS18B20</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: Input Variant 1: <a href="https://packages.debian.org/buster/ow-shell">ow-shell</a>, <a href="https://pypi.org/project/subprocess">subprocess</a>; Input Variant 2: <a href="https://pypi.org/project/w1thermsensor">w1thermsensor</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/sensors/DS18B20.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/DS18B20.pdf">Link</a>
Product URL(s): <a href="https://www.adafruit.com/product/374">Link 1</a>, <a href="https://www.adafruit.com/product/381">Link 2</a>, <a href="https://www.sparkfun.com/products/245">Link 3</a></div>
<h4 id="maxim-ds18s20">MAXIM: DS18S20</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/w1thermsensor">w1thermsensor</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/sensors/DS18S20.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/DS18S20.pdf">Link</a></div>
<h4 id="maxim-ds28ea00">MAXIM: DS28EA00</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/w1thermsensor">w1thermsensor</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/interface/sensor-interface/DS28EA00.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/DS28EA00.pdf">Link</a></div>
<h4 id="maxim-max31850k">MAXIM: MAX31850K</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/w1thermsensor">w1thermsensor</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/sensors/MAX31850EVKIT.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/MAX31850-MAX31851.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/1727">Link</a></div>
<h4 id="maxim-max31855">MAXIM: MAX31855</h4>
<div style="white-space: pre-line;">Measurements: Temperature (Object/Die)
Dependencies: <a href="https://github.com/adafruit/Adafruit_Python_MAX31855">Adafruit_MAX31855</a>, <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/interface/sensor-interface/MAX31855.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/MAX31855.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/269">Link</a></div>
<h4 id="maxim-max31856">MAXIM: MAX31856</h4>
<div style="white-space: pre-line;">Measurements: Temperature (Object/Die)
Dependencies: <a href="https://pypi.org/project/RPi.GPIO">RPi.GPIO</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/sensors/MAX31856.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/MAX31856.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/3263">Link</a></div>
<h4 id="maxim-max31865">MAXIM: MAX31865</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/RPi.GPIO">RPi.GPIO</a>
Manufacturer URL: <a href="https://www.maximintegrated.com/en/products/interface/sensor-interface/MAX31865.html">Link</a>
Datasheet URL: <a href="https://datasheets.maximintegrated.com/en/ds/MAX31865.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/3328">Link</a></div>
<h4 id="melexis-mlx90614">Melexis: MLX90614</h4>
<div style="white-space: pre-line;">Measurements: Temperature (Ambient/Object)
Dependencies: <a href="https://pypi.org/project/smbus2">smbus2</a>
Manufacturer URL: <a href="https://www.melexis.com/en/product/MLX90614/Digital-Plug-Play-Infrared-Thermometer-TO-Can">Link</a>
Datasheet URL: <a href="https://www.melexis.com/-/media/files/documents/datasheets/mlx90614-datasheet-melexis.pdf">Link</a>
Product URL: <a href="https://www.sparkfun.com/products/9570">Link</a></div>
<h4 id="microchip-mcp3008">Microchip: MCP3008</h4>
<div style="white-space: pre-line;">Measurements: Voltage (Analog-to-Digital Converter)
Dependencies: <a href="https://pypi.org/project/Adafruit_MCP3008">Adafruit_MCP3008</a>
Manufacturer URL: <a href="https://www.microchip.com/wwwproducts/en/en010530">Link</a>
Datasheet URL: <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/21295d.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/856">Link</a></div>
<h4 id="microchip-mcp342x-x234678">Microchip: MCP342x (x=2,3,4,6,7,8)</h4>
<div style="white-space: pre-line;">Measurements: Voltage (Analog-to-Digital Converter)
Dependencies: <a href="https://pypi.org/project/smbus2">smbus2</a>, <a href="https://pypi.org/project/MCP342x">MCP342x</a>
Manufacturer URL(s): <a href="https://www.microchip.com/wwwproducts/en/MCP3422">Link 1</a>, <a href="https://www.microchip.com/wwwproducts/en/MCP3423">Link 2</a>, <a href="https://www.microchip.com/wwwproducts/en/MCP3424">Link 3</a>, <a href="https://www.microchip.com/wwwproducts/en/MCP3426https://www.microchip.com/wwwproducts/en/MCP3427">Link 4</a>, <a href="https://www.microchip.com/wwwproducts/en/MCP3428">Link 5</a>
Datasheet URL(s): <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/22088c.pdf">Link 1</a>, <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/22226a.pdf">Link 2</a></div>
<h4 id="microchip-mcp9808">Microchip: MCP9808</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>, <a href="https://github.com/adafruit/Adafruit_Python_MCP9808">Adafruit_MCP9808</a>
Manufacturer URL: <a href="https://www.microchip.com/wwwproducts/en/en556182">Link</a>
Datasheet URL: <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/MCP9808-0.5C-Maximum-Accuracy-Digital-Temperature-Sensor-Data-Sheet-DS20005095B.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/1782">Link</a></div>
<h4 id="panasonic-amg8833">Panasonic: AMG8833</h4>
<div style="white-space: pre-line;">Measurements: 8x8 Temperature Grid
Dependencies: <a href="https://packages.debian.org/buster/libjpeg-dev">libjpeg-dev</a>, <a href="https://packages.debian.org/buster/zlib1g-dev">zlib1g-dev</a>, <a href="https://pypi.org/project/colour">colour</a>, <a href="https://pypi.org/project/Pillow">Pillow</a>, <a href="https://github.com/adafruit/Adafruit_AMG88xx_python">Adafruit_AMG88xx</a></div>
<h4 id="rohm-bh1750">ROHM: BH1750</h4>
<div style="white-space: pre-line;">Measurements: Light
Dependencies: <a href="https://pypi.org/project/smbus2">smbus2</a>
Datasheet URL: <a href="http://rohmfs.rohm.com/en/products/databook/datasheet/ic/sensor/light/bh1721fvc-e.pdf">Link</a>
Product URL: <a href="https://www.dfrobot.com/product-531.html">Link</a></div>
<h4 id="ruuvi-ruuvitag">Ruuvi: RuuviTag</h4>
<div style="white-space: pre-line;">Measurements: Acceleration/Humidity/Pressure/Temperature
Dependencies: <a href="https://packages.debian.org/buster/python3-dev">python3-dev</a>, <a href="https://packages.debian.org/buster/python3-psutil">python3-psutil</a>, <a href="https://packages.debian.org/buster/bluez">bluez</a>, <a href="https://packages.debian.org/buster/bluez-hcidump">bluez-hcidump</a>, <a href="https://pypi.org/project/ruuvitag_sensor">ruuvitag_sensor</a>, <a href="https://pypi.org/project/subprocess">subprocess</a>
Manufacturer URL: <a href="https://ruuvi.com/">Link</a>
Datasheet URL: <a href="https://ruuvi.com/files/ruuvitag-tech-spec-2019-7.pdf">Link</a></div>
<h4 id="stmicroelectronics-vl53l0x">STMicroelectronics: VL53L0X</h4>
<div style="white-space: pre-line;">Measurements: Millimeter (Time-of-Flight Distance)
Dependencies: <a href="https://github.com/grantramsay/VL53L0X_rasp_python">VL53L0X</a>
Manufacturer URL: <a href="https://www.st.com/en/imaging-and-photonics-solutions/vl53l0x.html">Link</a>
Datasheet URL: <a href="https://www.st.com/resource/en/datasheet/vl53l0x.pdf">Link</a>
Product URL(s): <a href="https://www.adafruit.com/product/3317">Link 1</a>, <a href="https://www.pololu.com/product/2490">Link 2</a></div>
<h4 id="sensirion-sht1x7x">Sensirion: SHT1x/7x</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: <a href="https://pypi.org/project/sht_sensor">sht_sensor</a>
Manufacturer URL(s): <a href="https://www.sensirion.com/en/environmental-sensors/humidity-sensors/digital-humidity-sensors-for-accurate-measurements/">Link 1</a>, <a href="https://www.sensirion.com/en/environmental-sensors/humidity-sensors/pintype-digital-humidity-sensors/">Link 2</a></div>
<h4 id="sensirion-sht2x">Sensirion: SHT2x</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: <a href="https://pypi.org/project/smbus2">smbus2</a>
Manufacturer URL: <a href="https://www.sensirion.com/en/environmental-sensors/humidity-sensors/humidity-temperature-sensor-sht2x-digital-i2c-accurate/">Link</a></div>
<h4 id="sensirion-sht3x-30-31-35">Sensirion: SHT3x (30, 31, 35)</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>, <a href="https://github.com/ralf1070/Adafruit_Python_SHT31">Adafruit_SHT31</a>
Manufacturer URL: <a href="https://www.sensirion.com/en/environmental-sensors/humidity-sensors/digital-humidity-sensors-for-various-applications/">Link</a></div>
<h4 id="sensorion-sht31-smart-gadget">Sensorion: SHT31 Smart Gadget</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: <a href="https://packages.debian.org/buster/pi-bluetooth">pi-bluetooth</a>, <a href="https://packages.debian.org/buster/libglib2.0-dev">libglib2.0-dev</a>, <a href="https://pypi.org/project/bluepy">bluepy</a>
Manufacturer URL: <a href="https://www.sensirion.com/en/environmental-sensors/humidity-sensors/development-kit/">Link</a></div>
<h4 id="sonoff-th1610-tasmota-firmware-with-am2301">Sonoff: TH16/10 (Tasmota firmware) with AM2301</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: <a href="https://pypi.org/project/requests">requests</a>
Manufacturer URL: <a href="https://sonoff.tech/product/wifi-diy-smart-switches/th10-th16">Link</a></div>
<h4 id="sonoff-th1610-tasmota-firmware-with-ds18b20">Sonoff: TH16/10 (Tasmota firmware) with DS18B20</h4>
<div style="white-space: pre-line;">Measurements: Temperature
Dependencies: <a href="https://pypi.org/project/requests">requests</a>
Manufacturer URL: <a href="https://sonoff.tech/product/wifi-diy-smart-switches/th10-th16">Link</a></div>
<h4 id="te-connectivity-htu21d">TE Connectivity: HTU21D</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Dependencies: pigpio
Manufacturer URL: <a href="https://www.te.com/usa-en/product-CAT-HSC0004.html">Link</a>
Datasheet URL: <a href="https://www.te.com/commerce/DocumentDelivery/DDEController?Action=showdoc&amp;DocId=Data+Sheet%7FHPC199_6%7FA6%7Fpdf%7FEnglish%7FENG_DS_HPC199_6_A6.pdf%7FCAT-HSC0004">Link</a>
Product URL: <a href="https://www.adafruit.com/product/1899">Link</a></div>
<h4 id="texas-instruments-ads1256">Texas Instruments: ADS1256</h4>
<div style="white-space: pre-line;">Measurements: Voltage (Waveshare, Analog-to-Digital Converter)
Dependencies: <a href="https://pypi.org/project/wiringpi">wiringpi</a>, <a href="https://github.com/kizniche/PiPyADC-py3">pipyadc_py3</a></div>
<h4 id="texas-instruments-ads1x15">Texas Instruments: ADS1x15</h4>
<div style="white-space: pre-line;">Measurements: Voltage (Analog-to-Digital Converter)
Dependencies: <a href="https://pypi.org/project/Adafruit_GPIO">Adafruit_GPIO</a>, <a href="https://pypi.org/project/Adafruit_ADS1x15">Adafruit_ADS1x15</a></div>
<h4 id="texas-instruments-hdc1000">Texas Instruments: HDC1000</h4>
<div style="white-space: pre-line;">Measurements: Humidity/Temperature
Manufacturer URL: <a href="https://www.ti.com/product/HDC1000">Link</a>
Datasheet URL: <a href="https://www.ti.com/lit/ds/symlink/hdc1000.pdf">Link</a></div>
<h4 id="texas-instruments-tmp006">Texas Instruments: TMP006</h4>
<div style="white-space: pre-line;">Measurements: Temperature (Object/Die)
Dependencies: <a href="https://pypi.org/project/Adafruit_TMP">Adafruit_TMP</a>
Datasheet URL: <a href="http://www.adafruit.com/datasheets/tmp006.pdf">Link</a>
Product URL: <a href="https://www.adafruit.com/product/1296">Link</a></div>
<h4 id="winsen-mh-z16">Winsen: MH-Z16</h4>
<div style="white-space: pre-line;">Measurements: CO2
Dependencies: <a href="https://pypi.org/project/smbus2">smbus2</a>
Manufacturer URL: <a href="https://www.winsen-sensor.com/sensors/co2-sensor/mh-z16.html">Link</a>
Datasheet URL: <a href="https://www.winsen-sensor.com/d/files/MH-Z16.pdf">Link</a></div>
<h4 id="winsen-mh-z19">Winsen: MH-Z19</h4>
<div style="white-space: pre-line;">Measurements: CO2
Datasheet URL: <a href="https://www.winsen-sensor.com/d/files/PDF/Infrared%20Gas%20Sensor/NDIR%20CO2%20SENSOR/MH-Z19%20CO2%20Ver1.0.pdf">Link</a></div>
<p>This is the version of the sensor that does not include the ability to conduct automatic baseline correction (ABC). See the B version of the sensor if you wish to use ABC.</p>
<h4 id="winsen-mh-z19b">Winsen: MH-Z19B</h4>
<div style="white-space: pre-line;">Measurements: CO2
Manufacturer URL: <a href="https://www.winsen-sensor.com/sensors/co2-sensor/mh-z19b.html">Link</a>
Datasheet URL: <a href="https://www.winsen-sensor.com/d/files/MH-Z19B.pdf">Link</a></div>
<p>This is the B version of the sensor that includes the ability to conduct automatic baseline correction (ABC).</p>
<h4 id="winsen-zh03b">Winsen: ZH03B</h4>
<div style="white-space: pre-line;">Measurements: Particulates
Manufacturer URL: <a href="https://www.winsen-sensor.com/sensors/dust-sensor/zh3b.html">Link</a>
Datasheet URL: <a href="https://www.winsen-sensor.com/d/files/ZH03B.pdf">Link</a></div>
<h4 id="xiaomi-miflora">Xiaomi: Miflora</h4>
<div style="white-space: pre-line;">Measurements: EC/Light/Moisture/Temperature
Dependencies: <a href="https://packages.debian.org/buster/libglib2.0-dev">libglib2.0-dev</a>, <a href="https://pypi.org/project/miflora">miflora</a>, <a href="https://pypi.org/project/btlewrap">btlewrap</a>, <a href="https://pypi.org/project/bluepy">bluepy</a></div>
</body>
</html>
